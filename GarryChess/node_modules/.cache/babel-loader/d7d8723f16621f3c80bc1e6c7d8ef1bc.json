{"ast":null,"code":"import React, { createContext, memo, useEffect, isValidElement, cloneElement, createRef, Component, useLayoutEffect, useMemo, useContext, useState, useCallback, forwardRef, useRef, useImperativeHandle, Fragment as Fragment$1 } from 'react';\nimport 'react-dom';\nimport { jsx, jsxs, Fragment } from 'react/jsx-runtime';\n/**\n * Create the React Context\n */\n\nvar DndContext = /*#__PURE__*/createContext({\n  dragDropManager: undefined\n});\nvar HandlerRole;\n\n(function (HandlerRole) {\n  HandlerRole[\"SOURCE\"] = \"SOURCE\";\n  HandlerRole[\"TARGET\"] = \"TARGET\";\n})(HandlerRole || (HandlerRole = {}));\n/**\r\n * Use invariant() to assert state which your program assumes to be true.\r\n *\r\n * Provide sprintf-style format (only %s is supported) and arguments\r\n * to provide information about what broke and what you were\r\n * expecting.\r\n *\r\n * The invariant message will be stripped in production, but the invariant\r\n * will remain to ensure logic does not differ in production.\r\n */\n\n\nfunction invariant(condition, format) {\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var argIndex = 0;\n      error = new Error(format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n\n    throw error;\n  }\n}\n\nvar INIT_COORDS = 'dnd-core/INIT_COORDS';\nvar BEGIN_DRAG = 'dnd-core/BEGIN_DRAG';\nvar PUBLISH_DRAG_SOURCE = 'dnd-core/PUBLISH_DRAG_SOURCE';\nvar HOVER = 'dnd-core/HOVER';\nvar DROP = 'dnd-core/DROP';\nvar END_DRAG = 'dnd-core/END_DRAG';\n\nfunction setClientOffset(clientOffset, sourceClientOffset) {\n  return {\n    type: INIT_COORDS,\n    payload: {\n      sourceClientOffset: sourceClientOffset || null,\n      clientOffset: clientOffset || null\n    }\n  };\n}\n\nfunction _typeof$5(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof$5 = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof$5 = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof$5(obj);\n} // cheap lodash replacements\n\n/**\n * drop-in replacement for _.get\n * @param obj\n * @param path\n * @param defaultValue\n */\n\n\nfunction get(obj, path, defaultValue) {\n  return path.split('.').reduce(function (a, c) {\n    return a && a[c] ? a[c] : defaultValue || null;\n  }, obj);\n}\n/**\n * drop-in replacement for _.without\n */\n\n\nfunction without$1(items, item) {\n  return items.filter(function (i) {\n    return i !== item;\n  });\n}\n/**\n * drop-in replacement for _.isString\n * @param input\n */\n\n\nfunction isObject(input) {\n  return _typeof$5(input) === 'object';\n}\n/**\n * repalcement for _.xor\n * @param itemsA\n * @param itemsB\n */\n\n\nfunction xor(itemsA, itemsB) {\n  var map = new Map();\n\n  var insertItem = function insertItem(item) {\n    map.set(item, map.has(item) ? map.get(item) + 1 : 1);\n  };\n\n  itemsA.forEach(insertItem);\n  itemsB.forEach(insertItem);\n  var result = [];\n  map.forEach(function (count, key) {\n    if (count === 1) {\n      result.push(key);\n    }\n  });\n  return result;\n}\n/**\n * replacement for _.intersection\n * @param itemsA\n * @param itemsB\n */\n\n\nfunction intersection(itemsA, itemsB) {\n  return itemsA.filter(function (t) {\n    return itemsB.indexOf(t) > -1;\n  });\n}\n\nvar ResetCoordinatesAction = {\n  type: INIT_COORDS,\n  payload: {\n    clientOffset: null,\n    sourceClientOffset: null\n  }\n};\n\nfunction createBeginDrag(manager) {\n  return function beginDrag() {\n    var sourceIds = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      publishSource: true\n    };\n    var _options$publishSourc = options.publishSource,\n        publishSource = _options$publishSourc === void 0 ? true : _options$publishSourc,\n        clientOffset = options.clientOffset,\n        getSourceClientOffset = options.getSourceClientOffset;\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry(); // Initialize the coordinates using the client offset\n\n    manager.dispatch(setClientOffset(clientOffset));\n    verifyInvariants$1(sourceIds, monitor, registry); // Get the draggable source\n\n    var sourceId = getDraggableSource(sourceIds, monitor);\n\n    if (sourceId === null) {\n      manager.dispatch(ResetCoordinatesAction);\n      return;\n    } // Get the source client offset\n\n\n    var sourceClientOffset = null;\n\n    if (clientOffset) {\n      if (!getSourceClientOffset) {\n        throw new Error('getSourceClientOffset must be defined');\n      }\n\n      verifyGetSourceClientOffsetIsFunction(getSourceClientOffset);\n      sourceClientOffset = getSourceClientOffset(sourceId);\n    } // Initialize the full coordinates\n\n\n    manager.dispatch(setClientOffset(clientOffset, sourceClientOffset));\n    var source = registry.getSource(sourceId);\n    var item = source.beginDrag(monitor, sourceId); // If source.beginDrag returns null, this is an indicator to cancel the drag\n\n    if (item == null) {\n      return undefined;\n    }\n\n    verifyItemIsObject(item);\n    registry.pinSource(sourceId);\n    var itemType = registry.getSourceType(sourceId);\n    return {\n      type: BEGIN_DRAG,\n      payload: {\n        itemType: itemType,\n        item: item,\n        sourceId: sourceId,\n        clientOffset: clientOffset || null,\n        sourceClientOffset: sourceClientOffset || null,\n        isSourcePublic: !!publishSource\n      }\n    };\n  };\n}\n\nfunction verifyInvariants$1(sourceIds, monitor, registry) {\n  invariant(!monitor.isDragging(), 'Cannot call beginDrag while dragging.');\n  sourceIds.forEach(function (sourceId) {\n    invariant(registry.getSource(sourceId), 'Expected sourceIds to be registered.');\n  });\n}\n\nfunction verifyGetSourceClientOffsetIsFunction(getSourceClientOffset) {\n  invariant(typeof getSourceClientOffset === 'function', 'When clientOffset is provided, getSourceClientOffset must be a function.');\n}\n\nfunction verifyItemIsObject(item) {\n  invariant(isObject(item), 'Item must be an object.');\n}\n\nfunction getDraggableSource(sourceIds, monitor) {\n  var sourceId = null;\n\n  for (var i = sourceIds.length - 1; i >= 0; i--) {\n    if (monitor.canDragSource(sourceIds[i])) {\n      sourceId = sourceIds[i];\n      break;\n    }\n  }\n\n  return sourceId;\n}\n\nfunction createPublishDragSource(manager) {\n  return function publishDragSource() {\n    var monitor = manager.getMonitor();\n\n    if (monitor.isDragging()) {\n      return {\n        type: PUBLISH_DRAG_SOURCE\n      };\n    }\n  };\n}\n\nfunction matchesType(targetType, draggedItemType) {\n  if (draggedItemType === null) {\n    return targetType === null;\n  }\n\n  return Array.isArray(targetType) ? targetType.some(function (t) {\n    return t === draggedItemType;\n  }) : targetType === draggedItemType;\n}\n\nfunction createHover(manager) {\n  return function hover(targetIdsArg) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        clientOffset = _ref.clientOffset;\n\n    verifyTargetIdsIsArray(targetIdsArg);\n    var targetIds = targetIdsArg.slice(0);\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    checkInvariants(targetIds, monitor, registry);\n    var draggedItemType = monitor.getItemType();\n    removeNonMatchingTargetIds(targetIds, registry, draggedItemType);\n    hoverAllTargets(targetIds, monitor, registry);\n    return {\n      type: HOVER,\n      payload: {\n        targetIds: targetIds,\n        clientOffset: clientOffset || null\n      }\n    };\n  };\n}\n\nfunction verifyTargetIdsIsArray(targetIdsArg) {\n  invariant(Array.isArray(targetIdsArg), 'Expected targetIds to be an array.');\n}\n\nfunction checkInvariants(targetIds, monitor, registry) {\n  invariant(monitor.isDragging(), 'Cannot call hover while not dragging.');\n  invariant(!monitor.didDrop(), 'Cannot call hover after drop.');\n\n  for (var i = 0; i < targetIds.length; i++) {\n    var targetId = targetIds[i];\n    invariant(targetIds.lastIndexOf(targetId) === i, 'Expected targetIds to be unique in the passed array.');\n    var target = registry.getTarget(targetId);\n    invariant(target, 'Expected targetIds to be registered.');\n  }\n}\n\nfunction removeNonMatchingTargetIds(targetIds, registry, draggedItemType) {\n  // Remove those targetIds that don't match the targetType.  This\n  // fixes shallow isOver which would only be non-shallow because of\n  // non-matching targets.\n  for (var i = targetIds.length - 1; i >= 0; i--) {\n    var targetId = targetIds[i];\n    var targetType = registry.getTargetType(targetId);\n\n    if (!matchesType(targetType, draggedItemType)) {\n      targetIds.splice(i, 1);\n    }\n  }\n}\n\nfunction hoverAllTargets(targetIds, monitor, registry) {\n  // Finally call hover on all matching targets.\n  targetIds.forEach(function (targetId) {\n    var target = registry.getTarget(targetId);\n    target.hover(monitor, targetId);\n  });\n}\n\nfunction ownKeys$4(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$4(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$4(Object(source), true).forEach(function (key) {\n        _defineProperty$l(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$4(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty$l(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction createDrop(manager) {\n  return function drop() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    verifyInvariants(monitor);\n    var targetIds = getDroppableTargets(monitor); // Multiple actions are dispatched here, which is why this doesn't return an action\n\n    targetIds.forEach(function (targetId, index) {\n      var dropResult = determineDropResult(targetId, index, registry, monitor);\n      var action = {\n        type: DROP,\n        payload: {\n          dropResult: _objectSpread$4(_objectSpread$4({}, options), dropResult)\n        }\n      };\n      manager.dispatch(action);\n    });\n  };\n}\n\nfunction verifyInvariants(monitor) {\n  invariant(monitor.isDragging(), 'Cannot call drop while not dragging.');\n  invariant(!monitor.didDrop(), 'Cannot call drop twice during one drag operation.');\n}\n\nfunction determineDropResult(targetId, index, registry, monitor) {\n  var target = registry.getTarget(targetId);\n  var dropResult = target ? target.drop(monitor, targetId) : undefined;\n  verifyDropResultType(dropResult);\n\n  if (typeof dropResult === 'undefined') {\n    dropResult = index === 0 ? {} : monitor.getDropResult();\n  }\n\n  return dropResult;\n}\n\nfunction verifyDropResultType(dropResult) {\n  invariant(typeof dropResult === 'undefined' || isObject(dropResult), 'Drop result must either be an object or undefined.');\n}\n\nfunction getDroppableTargets(monitor) {\n  var targetIds = monitor.getTargetIds().filter(monitor.canDropOnTarget, monitor);\n  targetIds.reverse();\n  return targetIds;\n}\n\nfunction createEndDrag(manager) {\n  return function endDrag() {\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    verifyIsDragging(monitor);\n    var sourceId = monitor.getSourceId();\n\n    if (sourceId != null) {\n      var source = registry.getSource(sourceId, true);\n      source.endDrag(monitor, sourceId);\n      registry.unpinSource();\n    }\n\n    return {\n      type: END_DRAG\n    };\n  };\n}\n\nfunction verifyIsDragging(monitor) {\n  invariant(monitor.isDragging(), 'Cannot call endDrag while not dragging.');\n}\n\nfunction createDragDropActions(manager) {\n  return {\n    beginDrag: createBeginDrag(manager),\n    publishDragSource: createPublishDragSource(manager),\n    hover: createHover(manager),\n    drop: createDrop(manager),\n    endDrag: createEndDrag(manager)\n  };\n}\n\nfunction _classCallCheck$i(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$g(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$g(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$g(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$g(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$k(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar DragDropManagerImpl = /*#__PURE__*/function () {\n  function DragDropManagerImpl(store, monitor) {\n    var _this = this;\n\n    _classCallCheck$i(this, DragDropManagerImpl);\n\n    _defineProperty$k(this, \"store\", void 0);\n\n    _defineProperty$k(this, \"monitor\", void 0);\n\n    _defineProperty$k(this, \"backend\", void 0);\n\n    _defineProperty$k(this, \"isSetUp\", false);\n\n    _defineProperty$k(this, \"handleRefCountChange\", function () {\n      var shouldSetUp = _this.store.getState().refCount > 0;\n\n      if (_this.backend) {\n        if (shouldSetUp && !_this.isSetUp) {\n          _this.backend.setup();\n\n          _this.isSetUp = true;\n        } else if (!shouldSetUp && _this.isSetUp) {\n          _this.backend.teardown();\n\n          _this.isSetUp = false;\n        }\n      }\n    });\n\n    this.store = store;\n    this.monitor = monitor;\n    store.subscribe(this.handleRefCountChange);\n  }\n\n  _createClass$g(DragDropManagerImpl, [{\n    key: \"receiveBackend\",\n    value: function receiveBackend(backend) {\n      this.backend = backend;\n    }\n  }, {\n    key: \"getMonitor\",\n    value: function getMonitor() {\n      return this.monitor;\n    }\n  }, {\n    key: \"getBackend\",\n    value: function getBackend() {\n      return this.backend;\n    }\n  }, {\n    key: \"getRegistry\",\n    value: function getRegistry() {\n      return this.monitor.registry;\n    }\n  }, {\n    key: \"getActions\",\n    value: function getActions() {\n      /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n      var manager = this;\n      var dispatch = this.store.dispatch;\n\n      function bindActionCreator(actionCreator) {\n        return function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          var action = actionCreator.apply(manager, args);\n\n          if (typeof action !== 'undefined') {\n            dispatch(action);\n          }\n        };\n      }\n\n      var actions = createDragDropActions(this);\n      return Object.keys(actions).reduce(function (boundActions, key) {\n        var action = actions[key];\n        boundActions[key] = bindActionCreator(action);\n        return boundActions;\n      }, {});\n    }\n  }, {\n    key: \"dispatch\",\n    value: function dispatch(action) {\n      this.store.dispatch(action);\n    }\n  }]);\n\n  return DragDropManagerImpl;\n}();\n/**\n * Adapted from React: https://github.com/facebook/react/blob/master/packages/shared/formatProdErrorMessage.js\n *\n * Do not require this module directly! Use normal throw error calls. These messages will be replaced with error codes\n * during build.\n * @param {number} code\n */\n\n\nfunction formatProdErrorMessage(code) {\n  return \"Minified Redux error #\" + code + \"; visit https://redux.js.org/Errors?code=\" + code + \" for the full message or \" + 'use the non-minified dev environment for full errors. ';\n} // Inlined version of the `symbol-observable` polyfill\n\n\nvar $$observable = function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n}();\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\n\n\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\n\nfunction isPlainObject$1(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n} // Inlined / shortened version of `kindOf` from https://github.com/jonschlinkert/kind-of\n\n\nfunction miniKindOf(val) {\n  if (val === void 0) return 'undefined';\n  if (val === null) return 'null';\n  var type = typeof val;\n\n  switch (type) {\n    case 'boolean':\n    case 'string':\n    case 'number':\n    case 'symbol':\n    case 'function':\n      {\n        return type;\n      }\n  }\n\n  if (Array.isArray(val)) return 'array';\n  if (isDate(val)) return 'date';\n  if (isError(val)) return 'error';\n  var constructorName = ctorName(val);\n\n  switch (constructorName) {\n    case 'Symbol':\n    case 'Promise':\n    case 'WeakMap':\n    case 'WeakSet':\n    case 'Map':\n    case 'Set':\n      return constructorName;\n  } // other\n\n\n  return type.slice(8, -1).toLowerCase().replace(/\\s/g, '');\n}\n\nfunction ctorName(val) {\n  return typeof val.constructor === 'function' ? val.constructor.name : null;\n}\n\nfunction isError(val) {\n  return val instanceof Error || typeof val.message === 'string' && val.constructor && typeof val.constructor.stackTraceLimit === 'number';\n}\n\nfunction isDate(val) {\n  if (val instanceof Date) return true;\n  return typeof val.toDateString === 'function' && typeof val.getDate === 'function' && typeof val.setDate === 'function';\n}\n\nfunction kindOf(val) {\n  var typeOfVal = typeof val;\n\n  if (process.env.NODE_ENV !== 'production') {\n    typeOfVal = miniKindOf(val);\n  }\n\n  return typeOfVal;\n}\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(0) : 'It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(1) : \"Expected the enhancer to be a function. Instead, received: '\" + kindOf(enhancer) + \"'\");\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(2) : \"Expected the root reducer to be a function. Instead, received: '\" + kindOf(reducer) + \"'\");\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(3) : 'You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(4) : \"Expected the listener to be a function. Instead, received: '\" + kindOf(listener) + \"'\");\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(5) : 'You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(6) : 'You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject$1(action)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(7) : \"Actions must be plain objects. Instead, the actual type was: '\" + kindOf(action) + \"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.\");\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(8) : 'Actions may not have an undefined \"type\" property. You may have misspelled an action type string constant.');\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(9) : 'Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(10) : \"Expected the nextReducer to be a function. Instead, received: '\" + kindOf(nextReducer));\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(11) : \"Expected the observer to be an object. Instead, received: '\" + kindOf(observer) + \"'\");\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\n\n\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nvar strictEquality = function strictEquality(a, b) {\n  return a === b;\n};\n/**\n * Determine if two cartesian coordinate offsets are equal\n * @param offsetA\n * @param offsetB\n */\n\n\nfunction areCoordsEqual(offsetA, offsetB) {\n  if (!offsetA && !offsetB) {\n    return true;\n  } else if (!offsetA || !offsetB) {\n    return false;\n  } else {\n    return offsetA.x === offsetB.x && offsetA.y === offsetB.y;\n  }\n}\n/**\n * Determines if two arrays of items are equal\n * @param a The first array of items\n * @param b The second array of items\n */\n\n\nfunction areArraysEqual(a, b) {\n  var isEqual = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : strictEquality;\n\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  for (var i = 0; i < a.length; ++i) {\n    if (!isEqual(a[i], b[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction ownKeys$3(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$3(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$3(Object(source), true).forEach(function (key) {\n        _defineProperty$j(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$3(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty$j(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar initialState$1 = {\n  initialSourceClientOffset: null,\n  initialClientOffset: null,\n  clientOffset: null\n};\n\nfunction reduce$5() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState$1;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var payload = action.payload;\n\n  switch (action.type) {\n    case INIT_COORDS:\n    case BEGIN_DRAG:\n      return {\n        initialSourceClientOffset: payload.sourceClientOffset,\n        initialClientOffset: payload.clientOffset,\n        clientOffset: payload.clientOffset\n      };\n\n    case HOVER:\n      if (areCoordsEqual(state.clientOffset, payload.clientOffset)) {\n        return state;\n      }\n\n      return _objectSpread$3(_objectSpread$3({}, state), {}, {\n        clientOffset: payload.clientOffset\n      });\n\n    case END_DRAG:\n    case DROP:\n      return initialState$1;\n\n    default:\n      return state;\n  }\n}\n\nvar ADD_SOURCE = 'dnd-core/ADD_SOURCE';\nvar ADD_TARGET = 'dnd-core/ADD_TARGET';\nvar REMOVE_SOURCE = 'dnd-core/REMOVE_SOURCE';\nvar REMOVE_TARGET = 'dnd-core/REMOVE_TARGET';\n\nfunction addSource(sourceId) {\n  return {\n    type: ADD_SOURCE,\n    payload: {\n      sourceId: sourceId\n    }\n  };\n}\n\nfunction addTarget(targetId) {\n  return {\n    type: ADD_TARGET,\n    payload: {\n      targetId: targetId\n    }\n  };\n}\n\nfunction removeSource(sourceId) {\n  return {\n    type: REMOVE_SOURCE,\n    payload: {\n      sourceId: sourceId\n    }\n  };\n}\n\nfunction removeTarget(targetId) {\n  return {\n    type: REMOVE_TARGET,\n    payload: {\n      targetId: targetId\n    }\n  };\n}\n\nfunction ownKeys$2(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$2(Object(source), true).forEach(function (key) {\n        _defineProperty$i(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$2(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty$i(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar initialState = {\n  itemType: null,\n  item: null,\n  sourceId: null,\n  targetIds: [],\n  dropResult: null,\n  didDrop: false,\n  isSourcePublic: null\n};\n\nfunction reduce$4() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var payload = action.payload;\n\n  switch (action.type) {\n    case BEGIN_DRAG:\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        itemType: payload.itemType,\n        item: payload.item,\n        sourceId: payload.sourceId,\n        isSourcePublic: payload.isSourcePublic,\n        dropResult: null,\n        didDrop: false\n      });\n\n    case PUBLISH_DRAG_SOURCE:\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        isSourcePublic: true\n      });\n\n    case HOVER:\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        targetIds: payload.targetIds\n      });\n\n    case REMOVE_TARGET:\n      if (state.targetIds.indexOf(payload.targetId) === -1) {\n        return state;\n      }\n\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        targetIds: without$1(state.targetIds, payload.targetId)\n      });\n\n    case DROP:\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        dropResult: payload.dropResult,\n        didDrop: true,\n        targetIds: []\n      });\n\n    case END_DRAG:\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        itemType: null,\n        item: null,\n        sourceId: null,\n        dropResult: null,\n        didDrop: false,\n        isSourcePublic: null,\n        targetIds: []\n      });\n\n    default:\n      return state;\n  }\n}\n\nfunction reduce$3() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ADD_SOURCE:\n    case ADD_TARGET:\n      return state + 1;\n\n    case REMOVE_SOURCE:\n    case REMOVE_TARGET:\n      return state - 1;\n\n    default:\n      return state;\n  }\n}\n\nvar NONE = [];\nvar ALL = [];\nNONE.__IS_NONE__ = true;\nALL.__IS_ALL__ = true;\n/**\n * Determines if the given handler IDs are dirty or not.\n *\n * @param dirtyIds The set of dirty handler ids\n * @param handlerIds The set of handler ids to check\n */\n\nfunction areDirty(dirtyIds, handlerIds) {\n  if (dirtyIds === NONE) {\n    return false;\n  }\n\n  if (dirtyIds === ALL || typeof handlerIds === 'undefined') {\n    return true;\n  }\n\n  var commonIds = intersection(handlerIds, dirtyIds);\n  return commonIds.length > 0;\n}\n\nfunction reduce$2() {\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case HOVER:\n      break;\n\n    case ADD_SOURCE:\n    case ADD_TARGET:\n    case REMOVE_TARGET:\n    case REMOVE_SOURCE:\n      return NONE;\n\n    case BEGIN_DRAG:\n    case PUBLISH_DRAG_SOURCE:\n    case END_DRAG:\n    case DROP:\n    default:\n      return ALL;\n  }\n\n  var _action$payload = action.payload,\n      _action$payload$targe = _action$payload.targetIds,\n      targetIds = _action$payload$targe === void 0 ? [] : _action$payload$targe,\n      _action$payload$prevT = _action$payload.prevTargetIds,\n      prevTargetIds = _action$payload$prevT === void 0 ? [] : _action$payload$prevT;\n  var result = xor(targetIds, prevTargetIds);\n  var didChange = result.length > 0 || !areArraysEqual(targetIds, prevTargetIds);\n\n  if (!didChange) {\n    return NONE;\n  } // Check the target ids at the innermost position. If they are valid, add them\n  // to the result\n\n\n  var prevInnermostTargetId = prevTargetIds[prevTargetIds.length - 1];\n  var innermostTargetId = targetIds[targetIds.length - 1];\n\n  if (prevInnermostTargetId !== innermostTargetId) {\n    if (prevInnermostTargetId) {\n      result.push(prevInnermostTargetId);\n    }\n\n    if (innermostTargetId) {\n      result.push(innermostTargetId);\n    }\n  }\n\n  return result;\n}\n\nfunction reduce$1() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  return state + 1;\n}\n\nfunction ownKeys$1(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$1(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$1(Object(source), true).forEach(function (key) {\n        _defineProperty$h(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$1(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty$h(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return {\n    dirtyHandlerIds: reduce$2(state.dirtyHandlerIds, {\n      type: action.type,\n      payload: _objectSpread$1(_objectSpread$1({}, action.payload), {}, {\n        prevTargetIds: get(state, 'dragOperation.targetIds', [])\n      })\n    }),\n    dragOffset: reduce$5(state.dragOffset, action),\n    refCount: reduce$3(state.refCount, action),\n    dragOperation: reduce$4(state.dragOperation, action),\n    stateId: reduce$1(state.stateId)\n  };\n}\n/**\n * Coordinate addition\n * @param a The first coordinate\n * @param b The second coordinate\n */\n\n\nfunction add(a, b) {\n  return {\n    x: a.x + b.x,\n    y: a.y + b.y\n  };\n}\n/**\n * Coordinate subtraction\n * @param a The first coordinate\n * @param b The second coordinate\n */\n\n\nfunction subtract(a, b) {\n  return {\n    x: a.x - b.x,\n    y: a.y - b.y\n  };\n}\n/**\n * Returns the cartesian distance of the drag source component's position, based on its position\n * at the time when the current drag operation has started, and the movement difference.\n *\n * Returns null if no item is being dragged.\n *\n * @param state The offset state to compute from\n */\n\n\nfunction getSourceClientOffset(state) {\n  var clientOffset = state.clientOffset,\n      initialClientOffset = state.initialClientOffset,\n      initialSourceClientOffset = state.initialSourceClientOffset;\n\n  if (!clientOffset || !initialClientOffset || !initialSourceClientOffset) {\n    return null;\n  }\n\n  return subtract(add(clientOffset, initialSourceClientOffset), initialClientOffset);\n}\n/**\n * Determines the x,y offset between the client offset and the initial client offset\n *\n * @param state The offset state to compute from\n */\n\n\nfunction getDifferenceFromInitialOffset(state) {\n  var clientOffset = state.clientOffset,\n      initialClientOffset = state.initialClientOffset;\n\n  if (!clientOffset || !initialClientOffset) {\n    return null;\n  }\n\n  return subtract(clientOffset, initialClientOffset);\n}\n\nfunction _classCallCheck$h(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$f(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$f(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$f(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$f(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$g(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar DragDropMonitorImpl = /*#__PURE__*/function () {\n  function DragDropMonitorImpl(store, registry) {\n    _classCallCheck$h(this, DragDropMonitorImpl);\n\n    _defineProperty$g(this, \"store\", void 0);\n\n    _defineProperty$g(this, \"registry\", void 0);\n\n    this.store = store;\n    this.registry = registry;\n  }\n\n  _createClass$f(DragDropMonitorImpl, [{\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        handlerIds: undefined\n      };\n      var handlerIds = options.handlerIds;\n      invariant(typeof listener === 'function', 'listener must be a function.');\n      invariant(typeof handlerIds === 'undefined' || Array.isArray(handlerIds), 'handlerIds, when specified, must be an array of strings.');\n      var prevStateId = this.store.getState().stateId;\n\n      var handleChange = function handleChange() {\n        var state = _this.store.getState();\n\n        var currentStateId = state.stateId;\n\n        try {\n          var canSkipListener = currentStateId === prevStateId || currentStateId === prevStateId + 1 && !areDirty(state.dirtyHandlerIds, handlerIds);\n\n          if (!canSkipListener) {\n            listener();\n          }\n        } finally {\n          prevStateId = currentStateId;\n        }\n      };\n\n      return this.store.subscribe(handleChange);\n    }\n  }, {\n    key: \"subscribeToOffsetChange\",\n    value: function subscribeToOffsetChange(listener) {\n      var _this2 = this;\n\n      invariant(typeof listener === 'function', 'listener must be a function.');\n      var previousState = this.store.getState().dragOffset;\n\n      var handleChange = function handleChange() {\n        var nextState = _this2.store.getState().dragOffset;\n\n        if (nextState === previousState) {\n          return;\n        }\n\n        previousState = nextState;\n        listener();\n      };\n\n      return this.store.subscribe(handleChange);\n    }\n  }, {\n    key: \"canDragSource\",\n    value: function canDragSource(sourceId) {\n      if (!sourceId) {\n        return false;\n      }\n\n      var source = this.registry.getSource(sourceId);\n      invariant(source, \"Expected to find a valid source. sourceId=\".concat(sourceId));\n\n      if (this.isDragging()) {\n        return false;\n      }\n\n      return source.canDrag(this, sourceId);\n    }\n  }, {\n    key: \"canDropOnTarget\",\n    value: function canDropOnTarget(targetId) {\n      // undefined on initial render\n      if (!targetId) {\n        return false;\n      }\n\n      var target = this.registry.getTarget(targetId);\n      invariant(target, \"Expected to find a valid target. targetId=\".concat(targetId));\n\n      if (!this.isDragging() || this.didDrop()) {\n        return false;\n      }\n\n      var targetType = this.registry.getTargetType(targetId);\n      var draggedItemType = this.getItemType();\n      return matchesType(targetType, draggedItemType) && target.canDrop(this, targetId);\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging() {\n      return Boolean(this.getItemType());\n    }\n  }, {\n    key: \"isDraggingSource\",\n    value: function isDraggingSource(sourceId) {\n      // undefined on initial render\n      if (!sourceId) {\n        return false;\n      }\n\n      var source = this.registry.getSource(sourceId, true);\n      invariant(source, \"Expected to find a valid source. sourceId=\".concat(sourceId));\n\n      if (!this.isDragging() || !this.isSourcePublic()) {\n        return false;\n      }\n\n      var sourceType = this.registry.getSourceType(sourceId);\n      var draggedItemType = this.getItemType();\n\n      if (sourceType !== draggedItemType) {\n        return false;\n      }\n\n      return source.isDragging(this, sourceId);\n    }\n  }, {\n    key: \"isOverTarget\",\n    value: function isOverTarget(targetId) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        shallow: false\n      }; // undefined on initial render\n\n      if (!targetId) {\n        return false;\n      }\n\n      var shallow = options.shallow;\n\n      if (!this.isDragging()) {\n        return false;\n      }\n\n      var targetType = this.registry.getTargetType(targetId);\n      var draggedItemType = this.getItemType();\n\n      if (draggedItemType && !matchesType(targetType, draggedItemType)) {\n        return false;\n      }\n\n      var targetIds = this.getTargetIds();\n\n      if (!targetIds.length) {\n        return false;\n      }\n\n      var index = targetIds.indexOf(targetId);\n\n      if (shallow) {\n        return index === targetIds.length - 1;\n      } else {\n        return index > -1;\n      }\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.store.getState().dragOperation.itemType;\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.store.getState().dragOperation.item;\n    }\n  }, {\n    key: \"getSourceId\",\n    value: function getSourceId() {\n      return this.store.getState().dragOperation.sourceId;\n    }\n  }, {\n    key: \"getTargetIds\",\n    value: function getTargetIds() {\n      return this.store.getState().dragOperation.targetIds;\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.store.getState().dragOperation.dropResult;\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.store.getState().dragOperation.didDrop;\n    }\n  }, {\n    key: \"isSourcePublic\",\n    value: function isSourcePublic() {\n      return Boolean(this.store.getState().dragOperation.isSourcePublic);\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.store.getState().dragOffset.initialClientOffset;\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.store.getState().dragOffset.initialSourceClientOffset;\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.store.getState().dragOffset.clientOffset;\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset$1() {\n      return getSourceClientOffset(this.store.getState().dragOffset);\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset$1() {\n      return getDifferenceFromInitialOffset(this.store.getState().dragOffset);\n    }\n  }]);\n\n  return DragDropMonitorImpl;\n}();\n\nvar nextUniqueId = 0;\n\nfunction getNextUniqueId() {\n  return nextUniqueId++;\n}\n\nfunction _typeof$4(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof$4 = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof$4 = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof$4(obj);\n}\n\nfunction validateSourceContract(source) {\n  invariant(typeof source.canDrag === 'function', 'Expected canDrag to be a function.');\n  invariant(typeof source.beginDrag === 'function', 'Expected beginDrag to be a function.');\n  invariant(typeof source.endDrag === 'function', 'Expected endDrag to be a function.');\n}\n\nfunction validateTargetContract(target) {\n  invariant(typeof target.canDrop === 'function', 'Expected canDrop to be a function.');\n  invariant(typeof target.hover === 'function', 'Expected hover to be a function.');\n  invariant(typeof target.drop === 'function', 'Expected beginDrag to be a function.');\n}\n\nfunction validateType(type, allowArray) {\n  if (allowArray && Array.isArray(type)) {\n    type.forEach(function (t) {\n      return validateType(t, false);\n    });\n    return;\n  }\n\n  invariant(typeof type === 'string' || _typeof$4(type) === 'symbol', allowArray ? 'Type can only be a string, a symbol, or an array of either.' : 'Type can only be a string or a symbol.');\n} // Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\n\n\nfunction rawAsap(task) {\n  if (!queue.length) {\n    requestFlush();\n  } // Equivalent to push, but avoids a function call.\n\n\n  queue[queue.length] = task;\n}\n\nvar queue = []; // Once a flush has been requested, no further calls to `requestFlush` are\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\n\nvar requestFlush; // The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\n\nvar index = 0; // If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\n\nvar capacity = 1024; // The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\n\nfunction flush() {\n  while (index < queue.length) {\n    var currentIndex = index; // Advance the index before calling the task. This ensures that we will\n    // begin flushing on the next task the task throws an error.\n\n    index = index + 1;\n    queue[currentIndex].call(); // Prevent leaking memory for long chains of recursive calls to `asap`.\n    // If we call `asap` within tasks scheduled by `asap`, the queue will\n    // grow, but to avoid an O(n) walk for every task we execute, we don't\n    // shift tasks off the queue after they have been executed.\n    // Instead, we periodically shift 1024 tasks off the queue.\n\n    if (index > capacity) {\n      // Manually shift all values starting at the index back to the\n      // beginning of the queue.\n      for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n        queue[scan] = queue[scan + index];\n      }\n\n      queue.length -= index;\n      index = 0;\n    }\n  }\n\n  queue.length = 0;\n  index = 0;\n} // `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\n\n\nvar scope = typeof global !== 'undefined' ? global : self;\nvar BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver; // MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\n\nif (typeof BrowserMutationObserver === 'function') {\n  requestFlush = makeRequestCallFromMutationObserver(flush); // MessageChannels are desirable because they give direct access to the HTML\n  // task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n  // 11-12, and in web workers in many engines.\n  // Although message channels yield to any queued rendering and IO tasks, they\n  // would be better than imposing the 4ms delay of timers.\n  // However, they do not work reliably in Internet Explorer or Safari.\n  // Internet Explorer 10 is the only browser that has setImmediate but does\n  // not have MutationObservers.\n  // Although setImmediate yields to the browser's renderer, it would be\n  // preferrable to falling back to setTimeout since it does not have\n  // the minimum 4ms penalty.\n  // Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n  // Desktop to a lesser extent) that renders both setImmediate and\n  // MessageChannel useless for the purposes of ASAP.\n  // https://github.com/kriskowal/q/issues/396\n  // Timers are implemented universally.\n  // We fall back to timers in workers in most engines, and in foreground\n  // contexts in the following browsers.\n  // However, note that even this simple case requires nuances to operate in a\n  // broad spectrum of browsers.\n  //\n  // - Firefox 3-13\n  // - Internet Explorer 6-9\n  // - iPad Safari 4.3\n  // - Lynx 2.8.7\n} else {\n  requestFlush = makeRequestCallFromTimer(flush);\n} // `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.js’s\n// `process.on(\"uncaughtException\")` or by a domain.\n\n\nrawAsap.requestFlush = requestFlush; // To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\n\nfunction makeRequestCallFromMutationObserver(callback) {\n  var toggle = 1;\n  var observer = new BrowserMutationObserver(callback);\n  var node = document.createTextNode('');\n  observer.observe(node, {\n    characterData: true\n  });\n  return function requestCall() {\n    toggle = -toggle;\n    node.data = toggle;\n  };\n} // The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\n\nfunction makeRequestCallFromTimer(callback) {\n  return function requestCall() {\n    // We dispatch a timeout with a specified delay of 0 for engines that\n    // can reliably accommodate that request. This will usually be snapped\n    // to a 4 milisecond delay, but once we're flushing, there's no delay\n    // between events.\n    var timeoutHandle = setTimeout(handleTimer, 0); // However, since this timer gets frequently dropped in Firefox\n    // workers, we enlist an interval handle that will try to fire\n    // an event 20 times per second until it succeeds.\n\n    var intervalHandle = setInterval(handleTimer, 50);\n\n    function handleTimer() {\n      // Whichever timer succeeds will cancel both timers and\n      // execute the callback.\n      clearTimeout(timeoutHandle);\n      clearInterval(intervalHandle);\n      callback();\n    }\n  };\n} // This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\n\n\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer; // ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n// RawTasks are recycled to reduce GC churn.\n\nvar freeTasks = []; // We queue errors to ensure they are thrown in right order (FIFO).\n// Array-as-queue is good enough here, since we are just dealing with exceptions.\n\nvar pendingErrors = [];\nvar requestErrorThrow = rawAsap.makeRequestCallFromTimer(throwFirstError);\n\nfunction throwFirstError() {\n  if (pendingErrors.length) {\n    throw pendingErrors.shift();\n  }\n}\n/**\n * Calls a task as soon as possible after returning, in its own event, with priority\n * over other events like animation, reflow, and repaint. An error thrown from an\n * event will not interrupt, nor even substantially slow down the processing of\n * other events, but will be rather postponed to a lower priority event.\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */\n\n\nfunction asap(task) {\n  var rawTask;\n\n  if (freeTasks.length) {\n    rawTask = freeTasks.pop();\n  } else {\n    rawTask = new RawTask();\n  }\n\n  rawTask.task = task;\n  rawAsap(rawTask);\n} // We wrap tasks with recyclable task objects.  A task object implements\n// `call`, just like a function.\n\n\nvar RawTask =\n/** @class */\nfunction () {\n  function RawTask() {}\n\n  RawTask.prototype.call = function () {\n    try {\n      this.task.call();\n    } catch (error) {\n      if (asap.onerror) {\n        // This hook exists purely for testing purposes.\n        // Its name will be periodically randomized to break any code that\n        // depends on its existence.\n        asap.onerror(error);\n      } else {\n        // In a web browser, exceptions are not fatal. However, to avoid\n        // slowing down the queue of pending tasks, we rethrow the error in a\n        // lower priority turn.\n        pendingErrors.push(error);\n        requestErrorThrow();\n      }\n    } finally {\n      this.task = null;\n      freeTasks[freeTasks.length] = this;\n    }\n  };\n\n  return RawTask;\n}();\n\nfunction _classCallCheck$g(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$e(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$e(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$e(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$e(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$f(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _slicedToArray$5(arr, i) {\n  return _arrayWithHoles$5(arr) || _iterableToArrayLimit$5(arr, i) || _unsupportedIterableToArray$8(arr, i) || _nonIterableRest$5();\n}\n\nfunction _nonIterableRest$5() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$8(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$8(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$8(o, minLen);\n}\n\nfunction _arrayLikeToArray$8(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit$5(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles$5(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction getNextHandlerId(role) {\n  var id = getNextUniqueId().toString();\n\n  switch (role) {\n    case HandlerRole.SOURCE:\n      return \"S\".concat(id);\n\n    case HandlerRole.TARGET:\n      return \"T\".concat(id);\n\n    default:\n      throw new Error(\"Unknown Handler Role: \".concat(role));\n  }\n}\n\nfunction parseRoleFromHandlerId(handlerId) {\n  switch (handlerId[0]) {\n    case 'S':\n      return HandlerRole.SOURCE;\n\n    case 'T':\n      return HandlerRole.TARGET;\n\n    default:\n      invariant(false, \"Cannot parse handler ID: \".concat(handlerId));\n  }\n}\n\nfunction mapContainsValue(map, searchValue) {\n  var entries = map.entries();\n  var isDone = false;\n\n  do {\n    var _entries$next = entries.next(),\n        done = _entries$next.done,\n        _entries$next$value = _slicedToArray$5(_entries$next.value, 2),\n        value = _entries$next$value[1];\n\n    if (value === searchValue) {\n      return true;\n    }\n\n    isDone = !!done;\n  } while (!isDone);\n\n  return false;\n}\n\nvar HandlerRegistryImpl = /*#__PURE__*/function () {\n  function HandlerRegistryImpl(store) {\n    _classCallCheck$g(this, HandlerRegistryImpl);\n\n    _defineProperty$f(this, \"types\", new Map());\n\n    _defineProperty$f(this, \"dragSources\", new Map());\n\n    _defineProperty$f(this, \"dropTargets\", new Map());\n\n    _defineProperty$f(this, \"pinnedSourceId\", null);\n\n    _defineProperty$f(this, \"pinnedSource\", null);\n\n    _defineProperty$f(this, \"store\", void 0);\n\n    this.store = store;\n  }\n\n  _createClass$e(HandlerRegistryImpl, [{\n    key: \"addSource\",\n    value: function addSource$1(type, source) {\n      validateType(type);\n      validateSourceContract(source);\n      var sourceId = this.addHandler(HandlerRole.SOURCE, type, source);\n      this.store.dispatch(addSource(sourceId));\n      return sourceId;\n    }\n  }, {\n    key: \"addTarget\",\n    value: function addTarget$1(type, target) {\n      validateType(type, true);\n      validateTargetContract(target);\n      var targetId = this.addHandler(HandlerRole.TARGET, type, target);\n      this.store.dispatch(addTarget(targetId));\n      return targetId;\n    }\n  }, {\n    key: \"containsHandler\",\n    value: function containsHandler(handler) {\n      return mapContainsValue(this.dragSources, handler) || mapContainsValue(this.dropTargets, handler);\n    }\n  }, {\n    key: \"getSource\",\n    value: function getSource(sourceId) {\n      var includePinned = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n      var isPinned = includePinned && sourceId === this.pinnedSourceId;\n      var source = isPinned ? this.pinnedSource : this.dragSources.get(sourceId);\n      return source;\n    }\n  }, {\n    key: \"getTarget\",\n    value: function getTarget(targetId) {\n      invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n      return this.dropTargets.get(targetId);\n    }\n  }, {\n    key: \"getSourceType\",\n    value: function getSourceType(sourceId) {\n      invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n      return this.types.get(sourceId);\n    }\n  }, {\n    key: \"getTargetType\",\n    value: function getTargetType(targetId) {\n      invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n      return this.types.get(targetId);\n    }\n  }, {\n    key: \"isSourceId\",\n    value: function isSourceId(handlerId) {\n      var role = parseRoleFromHandlerId(handlerId);\n      return role === HandlerRole.SOURCE;\n    }\n  }, {\n    key: \"isTargetId\",\n    value: function isTargetId(handlerId) {\n      var role = parseRoleFromHandlerId(handlerId);\n      return role === HandlerRole.TARGET;\n    }\n  }, {\n    key: \"removeSource\",\n    value: function removeSource$1(sourceId) {\n      var _this = this;\n\n      invariant(this.getSource(sourceId), 'Expected an existing source.');\n      this.store.dispatch(removeSource(sourceId));\n      asap(function () {\n        _this.dragSources.delete(sourceId);\n\n        _this.types.delete(sourceId);\n      });\n    }\n  }, {\n    key: \"removeTarget\",\n    value: function removeTarget$1(targetId) {\n      invariant(this.getTarget(targetId), 'Expected an existing target.');\n      this.store.dispatch(removeTarget(targetId));\n      this.dropTargets.delete(targetId);\n      this.types.delete(targetId);\n    }\n  }, {\n    key: \"pinSource\",\n    value: function pinSource(sourceId) {\n      var source = this.getSource(sourceId);\n      invariant(source, 'Expected an existing source.');\n      this.pinnedSourceId = sourceId;\n      this.pinnedSource = source;\n    }\n  }, {\n    key: \"unpinSource\",\n    value: function unpinSource() {\n      invariant(this.pinnedSource, 'No source is pinned at the time.');\n      this.pinnedSourceId = null;\n      this.pinnedSource = null;\n    }\n  }, {\n    key: \"addHandler\",\n    value: function addHandler(role, type, handler) {\n      var id = getNextHandlerId(role);\n      this.types.set(id, type);\n\n      if (role === HandlerRole.SOURCE) {\n        this.dragSources.set(id, handler);\n      } else if (role === HandlerRole.TARGET) {\n        this.dropTargets.set(id, handler);\n      }\n\n      return id;\n    }\n  }]);\n\n  return HandlerRegistryImpl;\n}();\n\nfunction createDragDropManager(backendFactory) {\n  var globalContext = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n  var backendOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var debugMode = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var store = makeStoreInstance(debugMode);\n  var monitor = new DragDropMonitorImpl(store, new HandlerRegistryImpl(store));\n  var manager = new DragDropManagerImpl(store, monitor);\n  var backend = backendFactory(manager, globalContext, backendOptions);\n  manager.receiveBackend(backend);\n  return manager;\n}\n\nfunction makeStoreInstance(debugMode) {\n  // TODO: if we ever make a react-native version of this,\n  // we'll need to consider how to pull off dev-tooling\n  var reduxDevTools = typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION__;\n  return createStore(reduce, debugMode && reduxDevTools && reduxDevTools({\n    name: 'dnd-core',\n    instanceId: 'dnd-core'\n  }));\n}\n\nvar _excluded = [\"children\"];\n\nfunction _slicedToArray$4(arr, i) {\n  return _arrayWithHoles$4(arr) || _iterableToArrayLimit$4(arr, i) || _unsupportedIterableToArray$7(arr, i) || _nonIterableRest$4();\n}\n\nfunction _nonIterableRest$4() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$7(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$7(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$7(o, minLen);\n}\n\nfunction _arrayLikeToArray$7(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit$4(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles$4(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nvar refCount = 0;\nvar INSTANCE_SYM = Symbol.for('__REACT_DND_CONTEXT_INSTANCE__');\n/**\n * A React component that provides the React-DnD context\n */\n\nvar DndProvider = /*#__PURE__*/memo(function DndProvider(_ref) {\n  var children = _ref.children,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var _getDndContextValue = getDndContextValue(props),\n      _getDndContextValue2 = _slicedToArray$4(_getDndContextValue, 2),\n      manager = _getDndContextValue2[0],\n      isGlobalInstance = _getDndContextValue2[1]; // memoized from props\n\n  /**\n   * If the global context was used to store the DND context\n   * then where theres no more references to it we should\n   * clean it up to avoid memory leaks\n   */\n\n\n  useEffect(function () {\n    if (isGlobalInstance) {\n      var context = getGlobalContext();\n      ++refCount;\n      return function () {\n        if (--refCount === 0) {\n          context[INSTANCE_SYM] = null;\n        }\n      };\n    }\n  }, []);\n  return jsx(DndContext.Provider, Object.assign({\n    value: manager\n  }, {\n    children: children\n  }), void 0);\n});\n\nfunction getDndContextValue(props) {\n  if ('manager' in props) {\n    var _manager = {\n      dragDropManager: props.manager\n    };\n    return [_manager, false];\n  }\n\n  var manager = createSingletonDndContext(props.backend, props.context, props.options, props.debugMode);\n  var isGlobalInstance = !props.context;\n  return [manager, isGlobalInstance];\n}\n\nfunction createSingletonDndContext(backend) {\n  var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getGlobalContext();\n  var options = arguments.length > 2 ? arguments[2] : undefined;\n  var debugMode = arguments.length > 3 ? arguments[3] : undefined;\n  var ctx = context;\n\n  if (!ctx[INSTANCE_SYM]) {\n    ctx[INSTANCE_SYM] = {\n      dragDropManager: createDragDropManager(backend, context, options, debugMode)\n    };\n  }\n\n  return ctx[INSTANCE_SYM];\n}\n\nfunction getGlobalContext() {\n  return typeof global !== 'undefined' ? global : window;\n}\n\nfunction _classCallCheck$f(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$d(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$d(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$d(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$d(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$e(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar isCallingCanDrag = false;\nvar isCallingIsDragging = false;\n\nvar DragSourceMonitorImpl = /*#__PURE__*/function () {\n  function DragSourceMonitorImpl(manager) {\n    _classCallCheck$f(this, DragSourceMonitorImpl);\n\n    _defineProperty$e(this, \"internalMonitor\", void 0);\n\n    _defineProperty$e(this, \"sourceId\", null);\n\n    this.internalMonitor = manager.getMonitor();\n  }\n\n  _createClass$d(DragSourceMonitorImpl, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(sourceId) {\n      this.sourceId = sourceId;\n    }\n  }, {\n    key: \"getHandlerId\",\n    value: function getHandlerId() {\n      return this.sourceId;\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      invariant(!isCallingCanDrag, 'You may not call monitor.canDrag() inside your canDrag() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n\n      try {\n        isCallingCanDrag = true;\n        return this.internalMonitor.canDragSource(this.sourceId);\n      } finally {\n        isCallingCanDrag = false;\n      }\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging() {\n      if (!this.sourceId) {\n        return false;\n      }\n\n      invariant(!isCallingIsDragging, 'You may not call monitor.isDragging() inside your isDragging() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n\n      try {\n        isCallingIsDragging = true;\n        return this.internalMonitor.isDraggingSource(this.sourceId);\n      } finally {\n        isCallingIsDragging = false;\n      }\n    }\n  }, {\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener, options) {\n      return this.internalMonitor.subscribeToStateChange(listener, options);\n    }\n  }, {\n    key: \"isDraggingSource\",\n    value: function isDraggingSource(sourceId) {\n      return this.internalMonitor.isDraggingSource(sourceId);\n    }\n  }, {\n    key: \"isOverTarget\",\n    value: function isOverTarget(targetId, options) {\n      return this.internalMonitor.isOverTarget(targetId, options);\n    }\n  }, {\n    key: \"getTargetIds\",\n    value: function getTargetIds() {\n      return this.internalMonitor.getTargetIds();\n    }\n  }, {\n    key: \"isSourcePublic\",\n    value: function isSourcePublic() {\n      return this.internalMonitor.isSourcePublic();\n    }\n  }, {\n    key: \"getSourceId\",\n    value: function getSourceId() {\n      return this.internalMonitor.getSourceId();\n    }\n  }, {\n    key: \"subscribeToOffsetChange\",\n    value: function subscribeToOffsetChange(listener) {\n      return this.internalMonitor.subscribeToOffsetChange(listener);\n    }\n  }, {\n    key: \"canDragSource\",\n    value: function canDragSource(sourceId) {\n      return this.internalMonitor.canDragSource(sourceId);\n    }\n  }, {\n    key: \"canDropOnTarget\",\n    value: function canDropOnTarget(targetId) {\n      return this.internalMonitor.canDropOnTarget(targetId);\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.internalMonitor.getItemType();\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.internalMonitor.getItem();\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.internalMonitor.getDropResult();\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.internalMonitor.didDrop();\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.internalMonitor.getInitialClientOffset();\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.internalMonitor.getInitialSourceClientOffset();\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset() {\n      return this.internalMonitor.getSourceClientOffset();\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.internalMonitor.getClientOffset();\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset() {\n      return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n  }]);\n\n  return DragSourceMonitorImpl;\n}();\n\nfunction _classCallCheck$e(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$c(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$c(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$c(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$c(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$d(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar isCallingCanDrop = false;\n\nvar DropTargetMonitorImpl = /*#__PURE__*/function () {\n  function DropTargetMonitorImpl(manager) {\n    _classCallCheck$e(this, DropTargetMonitorImpl);\n\n    _defineProperty$d(this, \"internalMonitor\", void 0);\n\n    _defineProperty$d(this, \"targetId\", null);\n\n    this.internalMonitor = manager.getMonitor();\n  }\n\n  _createClass$c(DropTargetMonitorImpl, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(targetId) {\n      this.targetId = targetId;\n    }\n  }, {\n    key: \"getHandlerId\",\n    value: function getHandlerId() {\n      return this.targetId;\n    }\n  }, {\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener, options) {\n      return this.internalMonitor.subscribeToStateChange(listener, options);\n    }\n  }, {\n    key: \"canDrop\",\n    value: function canDrop() {\n      // Cut out early if the target id has not been set. This should prevent errors\n      // where the user has an older version of dnd-core like in\n      // https://github.com/react-dnd/react-dnd/issues/1310\n      if (!this.targetId) {\n        return false;\n      }\n\n      invariant(!isCallingCanDrop, 'You may not call monitor.canDrop() inside your canDrop() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor');\n\n      try {\n        isCallingCanDrop = true;\n        return this.internalMonitor.canDropOnTarget(this.targetId);\n      } finally {\n        isCallingCanDrop = false;\n      }\n    }\n  }, {\n    key: \"isOver\",\n    value: function isOver(options) {\n      if (!this.targetId) {\n        return false;\n      }\n\n      return this.internalMonitor.isOverTarget(this.targetId, options);\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.internalMonitor.getItemType();\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.internalMonitor.getItem();\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.internalMonitor.getDropResult();\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.internalMonitor.didDrop();\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.internalMonitor.getInitialClientOffset();\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.internalMonitor.getInitialSourceClientOffset();\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset() {\n      return this.internalMonitor.getSourceClientOffset();\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.internalMonitor.getClientOffset();\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset() {\n      return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n  }]);\n\n  return DropTargetMonitorImpl;\n}();\n\nfunction throwIfCompositeComponentElement(element) {\n  // Custom components can no longer be wrapped directly in React DnD 2.0\n  // so that we don't need to depend on findDOMNode() from react-dom.\n  if (typeof element.type === 'string') {\n    return;\n  }\n\n  var displayName = element.type.displayName || element.type.name || 'the component';\n  throw new Error('Only native element nodes can now be passed to React DnD connectors.' + \"You can either wrap \".concat(displayName, \" into a <div>, or turn it into a \") + 'drag source or a drop target itself.');\n}\n\nfunction wrapHookToRecognizeElement(hook) {\n  return function () {\n    var elementOrNode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null; // When passed a node, call the hook straight away.\n\n    if (! /*#__PURE__*/isValidElement(elementOrNode)) {\n      var node = elementOrNode;\n      hook(node, options); // return the node so it can be chained (e.g. when within callback refs\n      // <div ref={node => connectDragSource(connectDropTarget(node))}/>\n\n      return node;\n    } // If passed a ReactElement, clone it and attach this function as a ref.\n    // This helps us achieve a neat API where user doesn't even know that refs\n    // are being used under the hood.\n\n\n    var element = elementOrNode;\n    throwIfCompositeComponentElement(element); // When no options are passed, use the hook directly\n\n    var ref = options ? function (node) {\n      return hook(node, options);\n    } : hook;\n    return cloneWithRef(element, ref);\n  };\n}\n\nfunction wrapConnectorHooks(hooks) {\n  var wrappedHooks = {};\n  Object.keys(hooks).forEach(function (key) {\n    var hook = hooks[key]; // ref objects should be passed straight through without wrapping\n\n    if (key.endsWith('Ref')) {\n      wrappedHooks[key] = hooks[key];\n    } else {\n      var wrappedHook = wrapHookToRecognizeElement(hook);\n\n      wrappedHooks[key] = function () {\n        return wrappedHook;\n      };\n    }\n  });\n  return wrappedHooks;\n}\n\nfunction setRef(ref, node) {\n  if (typeof ref === 'function') {\n    ref(node);\n  } else {\n    ref.current = node;\n  }\n}\n\nfunction cloneWithRef(element, newRef) {\n  var previousRef = element.ref;\n  invariant(typeof previousRef !== 'string', 'Cannot connect React DnD to an element with an existing string ref. ' + 'Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. ' + 'Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs');\n\n  if (!previousRef) {\n    // When there is no ref on the element, use the new ref directly\n    return /*#__PURE__*/cloneElement(element, {\n      ref: newRef\n    });\n  } else {\n    return /*#__PURE__*/cloneElement(element, {\n      ref: function ref(node) {\n        setRef(previousRef, node);\n        setRef(newRef, node);\n      }\n    });\n  }\n}\n\nfunction _typeof$3(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof$3 = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof$3 = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof$3(obj);\n}\n\nfunction isRef(obj) {\n  return (// eslint-disable-next-line no-prototype-builtins\n    obj !== null && _typeof$3(obj) === 'object' && Object.prototype.hasOwnProperty.call(obj, 'current')\n  );\n}\n\nfunction shallowEqual(objA, objB, compare, compareContext) {\n  var compareResult = compare ? compare.call(compareContext, objA, objB) : void 0;\n\n  if (compareResult !== void 0) {\n    return !!compareResult;\n  }\n\n  if (objA === objB) {\n    return true;\n  }\n\n  if (typeof objA !== 'object' || !objA || typeof objB !== 'object' || !objB) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB); // Test for A's keys different from B.\n\n  for (var idx = 0; idx < keysA.length; idx++) {\n    var key = keysA[idx];\n\n    if (!bHasOwnProperty(key)) {\n      return false;\n    }\n\n    var valueA = objA[key];\n    var valueB = objB[key];\n    compareResult = compare ? compare.call(compareContext, valueA, valueB, key) : void 0;\n\n    if (compareResult === false || compareResult === void 0 && valueA !== valueB) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction _classCallCheck$d(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$b(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$b(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$b(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$b(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$c(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar SourceConnector = /*#__PURE__*/function () {\n  // The drop target may either be attached via ref or connect function\n  // The drag preview may either be attached via ref or connect function\n  function SourceConnector(backend) {\n    var _this = this;\n\n    _classCallCheck$d(this, SourceConnector);\n\n    _defineProperty$c(this, \"hooks\", wrapConnectorHooks({\n      dragSource: function dragSource(node, options) {\n        _this.clearDragSource();\n\n        _this.dragSourceOptions = options || null;\n\n        if (isRef(node)) {\n          _this.dragSourceRef = node;\n        } else {\n          _this.dragSourceNode = node;\n        }\n\n        _this.reconnectDragSource();\n      },\n      dragPreview: function dragPreview(node, options) {\n        _this.clearDragPreview();\n\n        _this.dragPreviewOptions = options || null;\n\n        if (isRef(node)) {\n          _this.dragPreviewRef = node;\n        } else {\n          _this.dragPreviewNode = node;\n        }\n\n        _this.reconnectDragPreview();\n      }\n    }));\n\n    _defineProperty$c(this, \"handlerId\", null);\n\n    _defineProperty$c(this, \"dragSourceRef\", null);\n\n    _defineProperty$c(this, \"dragSourceNode\", void 0);\n\n    _defineProperty$c(this, \"dragSourceOptionsInternal\", null);\n\n    _defineProperty$c(this, \"dragSourceUnsubscribe\", void 0);\n\n    _defineProperty$c(this, \"dragPreviewRef\", null);\n\n    _defineProperty$c(this, \"dragPreviewNode\", void 0);\n\n    _defineProperty$c(this, \"dragPreviewOptionsInternal\", null);\n\n    _defineProperty$c(this, \"dragPreviewUnsubscribe\", void 0);\n\n    _defineProperty$c(this, \"lastConnectedHandlerId\", null);\n\n    _defineProperty$c(this, \"lastConnectedDragSource\", null);\n\n    _defineProperty$c(this, \"lastConnectedDragSourceOptions\", null);\n\n    _defineProperty$c(this, \"lastConnectedDragPreview\", null);\n\n    _defineProperty$c(this, \"lastConnectedDragPreviewOptions\", null);\n\n    _defineProperty$c(this, \"backend\", void 0);\n\n    this.backend = backend;\n  }\n\n  _createClass$b(SourceConnector, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(newHandlerId) {\n      if (this.handlerId === newHandlerId) {\n        return;\n      }\n\n      this.handlerId = newHandlerId;\n      this.reconnect();\n    }\n  }, {\n    key: \"connectTarget\",\n    get: function get() {\n      return this.dragSource;\n    }\n  }, {\n    key: \"dragSourceOptions\",\n    get: function get() {\n      return this.dragSourceOptionsInternal;\n    },\n    set: function set(options) {\n      this.dragSourceOptionsInternal = options;\n    }\n  }, {\n    key: \"dragPreviewOptions\",\n    get: function get() {\n      return this.dragPreviewOptionsInternal;\n    },\n    set: function set(options) {\n      this.dragPreviewOptionsInternal = options;\n    }\n  }, {\n    key: \"reconnect\",\n    value: function reconnect() {\n      this.reconnectDragSource();\n      this.reconnectDragPreview();\n    }\n  }, {\n    key: \"reconnectDragSource\",\n    value: function reconnectDragSource() {\n      var dragSource = this.dragSource; // if nothing has changed then don't resubscribe\n\n      var didChange = this.didHandlerIdChange() || this.didConnectedDragSourceChange() || this.didDragSourceOptionsChange();\n\n      if (didChange) {\n        this.disconnectDragSource();\n      }\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dragSource) {\n        this.lastConnectedDragSource = dragSource;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDragSource = dragSource;\n        this.lastConnectedDragSourceOptions = this.dragSourceOptions;\n        this.dragSourceUnsubscribe = this.backend.connectDragSource(this.handlerId, dragSource, this.dragSourceOptions);\n      }\n    }\n  }, {\n    key: \"reconnectDragPreview\",\n    value: function reconnectDragPreview() {\n      var dragPreview = this.dragPreview; // if nothing has changed then don't resubscribe\n\n      var didChange = this.didHandlerIdChange() || this.didConnectedDragPreviewChange() || this.didDragPreviewOptionsChange();\n\n      if (didChange) {\n        this.disconnectDragPreview();\n      }\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dragPreview) {\n        this.lastConnectedDragPreview = dragPreview;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDragPreview = dragPreview;\n        this.lastConnectedDragPreviewOptions = this.dragPreviewOptions;\n        this.dragPreviewUnsubscribe = this.backend.connectDragPreview(this.handlerId, dragPreview, this.dragPreviewOptions);\n      }\n    }\n  }, {\n    key: \"didHandlerIdChange\",\n    value: function didHandlerIdChange() {\n      return this.lastConnectedHandlerId !== this.handlerId;\n    }\n  }, {\n    key: \"didConnectedDragSourceChange\",\n    value: function didConnectedDragSourceChange() {\n      return this.lastConnectedDragSource !== this.dragSource;\n    }\n  }, {\n    key: \"didConnectedDragPreviewChange\",\n    value: function didConnectedDragPreviewChange() {\n      return this.lastConnectedDragPreview !== this.dragPreview;\n    }\n  }, {\n    key: \"didDragSourceOptionsChange\",\n    value: function didDragSourceOptionsChange() {\n      return !shallowEqual(this.lastConnectedDragSourceOptions, this.dragSourceOptions);\n    }\n  }, {\n    key: \"didDragPreviewOptionsChange\",\n    value: function didDragPreviewOptionsChange() {\n      return !shallowEqual(this.lastConnectedDragPreviewOptions, this.dragPreviewOptions);\n    }\n  }, {\n    key: \"disconnectDragSource\",\n    value: function disconnectDragSource() {\n      if (this.dragSourceUnsubscribe) {\n        this.dragSourceUnsubscribe();\n        this.dragSourceUnsubscribe = undefined;\n      }\n    }\n  }, {\n    key: \"disconnectDragPreview\",\n    value: function disconnectDragPreview() {\n      if (this.dragPreviewUnsubscribe) {\n        this.dragPreviewUnsubscribe();\n        this.dragPreviewUnsubscribe = undefined;\n        this.dragPreviewNode = null;\n        this.dragPreviewRef = null;\n      }\n    }\n  }, {\n    key: \"dragSource\",\n    get: function get() {\n      return this.dragSourceNode || this.dragSourceRef && this.dragSourceRef.current;\n    }\n  }, {\n    key: \"dragPreview\",\n    get: function get() {\n      return this.dragPreviewNode || this.dragPreviewRef && this.dragPreviewRef.current;\n    }\n  }, {\n    key: \"clearDragSource\",\n    value: function clearDragSource() {\n      this.dragSourceNode = null;\n      this.dragSourceRef = null;\n    }\n  }, {\n    key: \"clearDragPreview\",\n    value: function clearDragPreview() {\n      this.dragPreviewNode = null;\n      this.dragPreviewRef = null;\n    }\n  }]);\n\n  return SourceConnector;\n}();\n\nfunction _classCallCheck$c(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$a(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$a(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$a(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$a(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$b(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar TargetConnector = /*#__PURE__*/function () {\n  // The drop target may either be attached via ref or connect function\n  function TargetConnector(backend) {\n    var _this = this;\n\n    _classCallCheck$c(this, TargetConnector);\n\n    _defineProperty$b(this, \"hooks\", wrapConnectorHooks({\n      dropTarget: function dropTarget(node, options) {\n        _this.clearDropTarget();\n\n        _this.dropTargetOptions = options;\n\n        if (isRef(node)) {\n          _this.dropTargetRef = node;\n        } else {\n          _this.dropTargetNode = node;\n        }\n\n        _this.reconnect();\n      }\n    }));\n\n    _defineProperty$b(this, \"handlerId\", null);\n\n    _defineProperty$b(this, \"dropTargetRef\", null);\n\n    _defineProperty$b(this, \"dropTargetNode\", void 0);\n\n    _defineProperty$b(this, \"dropTargetOptionsInternal\", null);\n\n    _defineProperty$b(this, \"unsubscribeDropTarget\", void 0);\n\n    _defineProperty$b(this, \"lastConnectedHandlerId\", null);\n\n    _defineProperty$b(this, \"lastConnectedDropTarget\", null);\n\n    _defineProperty$b(this, \"lastConnectedDropTargetOptions\", null);\n\n    _defineProperty$b(this, \"backend\", void 0);\n\n    this.backend = backend;\n  }\n\n  _createClass$a(TargetConnector, [{\n    key: \"connectTarget\",\n    get: function get() {\n      return this.dropTarget;\n    }\n  }, {\n    key: \"reconnect\",\n    value: function reconnect() {\n      // if nothing has changed then don't resubscribe\n      var didChange = this.didHandlerIdChange() || this.didDropTargetChange() || this.didOptionsChange();\n\n      if (didChange) {\n        this.disconnectDropTarget();\n      }\n\n      var dropTarget = this.dropTarget;\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dropTarget) {\n        this.lastConnectedDropTarget = dropTarget;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDropTarget = dropTarget;\n        this.lastConnectedDropTargetOptions = this.dropTargetOptions;\n        this.unsubscribeDropTarget = this.backend.connectDropTarget(this.handlerId, dropTarget, this.dropTargetOptions);\n      }\n    }\n  }, {\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(newHandlerId) {\n      if (newHandlerId === this.handlerId) {\n        return;\n      }\n\n      this.handlerId = newHandlerId;\n      this.reconnect();\n    }\n  }, {\n    key: \"dropTargetOptions\",\n    get: function get() {\n      return this.dropTargetOptionsInternal;\n    },\n    set: function set(options) {\n      this.dropTargetOptionsInternal = options;\n    }\n  }, {\n    key: \"didHandlerIdChange\",\n    value: function didHandlerIdChange() {\n      return this.lastConnectedHandlerId !== this.handlerId;\n    }\n  }, {\n    key: \"didDropTargetChange\",\n    value: function didDropTargetChange() {\n      return this.lastConnectedDropTarget !== this.dropTarget;\n    }\n  }, {\n    key: \"didOptionsChange\",\n    value: function didOptionsChange() {\n      return !shallowEqual(this.lastConnectedDropTargetOptions, this.dropTargetOptions);\n    }\n  }, {\n    key: \"disconnectDropTarget\",\n    value: function disconnectDropTarget() {\n      if (this.unsubscribeDropTarget) {\n        this.unsubscribeDropTarget();\n        this.unsubscribeDropTarget = undefined;\n      }\n    }\n  }, {\n    key: \"dropTarget\",\n    get: function get() {\n      return this.dropTargetNode || this.dropTargetRef && this.dropTargetRef.current;\n    }\n  }, {\n    key: \"clearDropTarget\",\n    value: function clearDropTarget() {\n      this.dropTargetRef = null;\n      this.dropTargetNode = null;\n    }\n  }]);\n\n  return TargetConnector;\n}();\n\nfunction registerTarget(type, target, manager) {\n  var registry = manager.getRegistry();\n  var targetId = registry.addTarget(type, target);\n  return [targetId, function () {\n    return registry.removeTarget(targetId);\n  }];\n}\n\nfunction registerSource(type, source, manager) {\n  var registry = manager.getRegistry();\n  var sourceId = registry.addSource(type, source);\n  return [sourceId, function () {\n    return registry.removeSource(sourceId);\n  }];\n}\n\nfunction _typeof$2(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof$2 = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof$2 = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof$2(obj);\n}\n\nfunction isClassComponent(Component) {\n  return Component && Component.prototype && typeof Component.prototype.render === 'function';\n}\n\nfunction isRefForwardingComponent(C) {\n  var _item$$$typeof;\n\n  var item = C;\n  return (item === null || item === void 0 ? void 0 : (_item$$$typeof = item.$$typeof) === null || _item$$$typeof === void 0 ? void 0 : _item$$$typeof.toString()) === 'Symbol(react.forward_ref)';\n}\n\nfunction isRefable(C) {\n  return isClassComponent(C) || isRefForwardingComponent(C);\n}\n\nfunction checkDecoratorArguments(functionName, signature) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var i = 0; i < (arguments.length <= 2 ? 0 : arguments.length - 2); i++) {\n      var arg = i + 2 < 2 || arguments.length <= i + 2 ? undefined : arguments[i + 2];\n\n      if (arg && arg.prototype && arg.prototype.render) {\n        // eslint-disable-next-line no-console\n        console.error('You seem to be applying the arguments in the wrong order. ' + \"It should be \".concat(functionName, \"(\").concat(signature, \")(Component), not the other way around. \") + 'Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#you-seem-to-be-applying-the-arguments-in-the-wrong-order');\n        return;\n      }\n    }\n  }\n}\n\nfunction isObjectLike(input) {\n  return _typeof$2(input) === 'object' && input !== null;\n}\n\nfunction isPlainObject(input) {\n  if (!isObjectLike(input)) {\n    return false;\n  }\n\n  if (Object.getPrototypeOf(input) === null) {\n    return true;\n  }\n\n  var proto = input;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(input) === proto;\n}\n\nvar reactIs$1 = {\n  exports: {}\n};\nvar reactIs_production_min = {};\n/** @license React v16.13.1\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar b = \"function\" === typeof Symbol && Symbol.for,\n    c = b ? Symbol.for(\"react.element\") : 60103,\n    d = b ? Symbol.for(\"react.portal\") : 60106,\n    e = b ? Symbol.for(\"react.fragment\") : 60107,\n    f = b ? Symbol.for(\"react.strict_mode\") : 60108,\n    g = b ? Symbol.for(\"react.profiler\") : 60114,\n    h = b ? Symbol.for(\"react.provider\") : 60109,\n    k = b ? Symbol.for(\"react.context\") : 60110,\n    l = b ? Symbol.for(\"react.async_mode\") : 60111,\n    m = b ? Symbol.for(\"react.concurrent_mode\") : 60111,\n    n = b ? Symbol.for(\"react.forward_ref\") : 60112,\n    p = b ? Symbol.for(\"react.suspense\") : 60113,\n    q = b ? Symbol.for(\"react.suspense_list\") : 60120,\n    r = b ? Symbol.for(\"react.memo\") : 60115,\n    t = b ? Symbol.for(\"react.lazy\") : 60116,\n    v = b ? Symbol.for(\"react.block\") : 60121,\n    w = b ? Symbol.for(\"react.fundamental\") : 60117,\n    x = b ? Symbol.for(\"react.responder\") : 60118,\n    y = b ? Symbol.for(\"react.scope\") : 60119;\n\nfunction z(a) {\n  if (\"object\" === typeof a && null !== a) {\n    var u = a.$$typeof;\n\n    switch (u) {\n      case c:\n        switch (a = a.type, a) {\n          case l:\n          case m:\n          case e:\n          case g:\n          case f:\n          case p:\n            return a;\n\n          default:\n            switch (a = a && a.$$typeof, a) {\n              case k:\n              case n:\n              case t:\n              case r:\n              case h:\n                return a;\n\n              default:\n                return u;\n            }\n\n        }\n\n      case d:\n        return u;\n    }\n  }\n}\n\nfunction A(a) {\n  return z(a) === m;\n}\n\nreactIs_production_min.AsyncMode = l;\nreactIs_production_min.ConcurrentMode = m;\nreactIs_production_min.ContextConsumer = k;\nreactIs_production_min.ContextProvider = h;\nreactIs_production_min.Element = c;\nreactIs_production_min.ForwardRef = n;\nreactIs_production_min.Fragment = e;\nreactIs_production_min.Lazy = t;\nreactIs_production_min.Memo = r;\nreactIs_production_min.Portal = d;\nreactIs_production_min.Profiler = g;\nreactIs_production_min.StrictMode = f;\nreactIs_production_min.Suspense = p;\n\nreactIs_production_min.isAsyncMode = function (a) {\n  return A(a) || z(a) === l;\n};\n\nreactIs_production_min.isConcurrentMode = A;\n\nreactIs_production_min.isContextConsumer = function (a) {\n  return z(a) === k;\n};\n\nreactIs_production_min.isContextProvider = function (a) {\n  return z(a) === h;\n};\n\nreactIs_production_min.isElement = function (a) {\n  return \"object\" === typeof a && null !== a && a.$$typeof === c;\n};\n\nreactIs_production_min.isForwardRef = function (a) {\n  return z(a) === n;\n};\n\nreactIs_production_min.isFragment = function (a) {\n  return z(a) === e;\n};\n\nreactIs_production_min.isLazy = function (a) {\n  return z(a) === t;\n};\n\nreactIs_production_min.isMemo = function (a) {\n  return z(a) === r;\n};\n\nreactIs_production_min.isPortal = function (a) {\n  return z(a) === d;\n};\n\nreactIs_production_min.isProfiler = function (a) {\n  return z(a) === g;\n};\n\nreactIs_production_min.isStrictMode = function (a) {\n  return z(a) === f;\n};\n\nreactIs_production_min.isSuspense = function (a) {\n  return z(a) === p;\n};\n\nreactIs_production_min.isValidElementType = function (a) {\n  return \"string\" === typeof a || \"function\" === typeof a || a === e || a === m || a === g || a === f || a === p || a === q || \"object\" === typeof a && null !== a && (a.$$typeof === t || a.$$typeof === r || a.$$typeof === h || a.$$typeof === k || a.$$typeof === n || a.$$typeof === w || a.$$typeof === x || a.$$typeof === y || a.$$typeof === v);\n};\n\nreactIs_production_min.typeOf = z;\nvar reactIs_development = {};\n/** @license React v16.13.1\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function () {\n    // nor polyfill, then a plain number is used for performance.\n    var hasSymbol = typeof Symbol === 'function' && Symbol.for;\n    var REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\n    var REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\n    var REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\n    var REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\n    var REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\n    var REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\n    var REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary\n    // (unstable) APIs that have been removed. Can we remove the symbols?\n\n    var REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\n    var REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\n    var REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\n    var REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\n    var REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;\n    var REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\n    var REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\n    var REACT_BLOCK_TYPE = hasSymbol ? Symbol.for('react.block') : 0xead9;\n    var REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;\n    var REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;\n    var REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;\n\n    function isValidElementType(type) {\n      return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n      type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE || type.$$typeof === REACT_BLOCK_TYPE);\n    }\n\n    function typeOf(object) {\n      if (typeof object === 'object' && object !== null) {\n        var $$typeof = object.$$typeof;\n\n        switch ($$typeof) {\n          case REACT_ELEMENT_TYPE:\n            var type = object.type;\n\n            switch (type) {\n              case REACT_ASYNC_MODE_TYPE:\n              case REACT_CONCURRENT_MODE_TYPE:\n              case REACT_FRAGMENT_TYPE:\n              case REACT_PROFILER_TYPE:\n              case REACT_STRICT_MODE_TYPE:\n              case REACT_SUSPENSE_TYPE:\n                return type;\n\n              default:\n                var $$typeofType = type && type.$$typeof;\n\n                switch ($$typeofType) {\n                  case REACT_CONTEXT_TYPE:\n                  case REACT_FORWARD_REF_TYPE:\n                  case REACT_LAZY_TYPE:\n                  case REACT_MEMO_TYPE:\n                  case REACT_PROVIDER_TYPE:\n                    return $$typeofType;\n\n                  default:\n                    return $$typeof;\n                }\n\n            }\n\n          case REACT_PORTAL_TYPE:\n            return $$typeof;\n        }\n      }\n\n      return undefined;\n    } // AsyncMode is deprecated along with isAsyncMode\n\n\n    var AsyncMode = REACT_ASYNC_MODE_TYPE;\n    var ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\n    var ContextConsumer = REACT_CONTEXT_TYPE;\n    var ContextProvider = REACT_PROVIDER_TYPE;\n    var Element = REACT_ELEMENT_TYPE;\n    var ForwardRef = REACT_FORWARD_REF_TYPE;\n    var Fragment = REACT_FRAGMENT_TYPE;\n    var Lazy = REACT_LAZY_TYPE;\n    var Memo = REACT_MEMO_TYPE;\n    var Portal = REACT_PORTAL_TYPE;\n    var Profiler = REACT_PROFILER_TYPE;\n    var StrictMode = REACT_STRICT_MODE_TYPE;\n    var Suspense = REACT_SUSPENSE_TYPE;\n    var hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated\n\n    function isAsyncMode(object) {\n      {\n        if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n          hasWarnedAboutDeprecatedIsAsyncMode = true; // Using console['warn'] to evade Babel and ESLint\n\n          console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n        }\n      }\n      return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n    }\n\n    function isConcurrentMode(object) {\n      return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n    }\n\n    function isContextConsumer(object) {\n      return typeOf(object) === REACT_CONTEXT_TYPE;\n    }\n\n    function isContextProvider(object) {\n      return typeOf(object) === REACT_PROVIDER_TYPE;\n    }\n\n    function isElement(object) {\n      return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n    }\n\n    function isForwardRef(object) {\n      return typeOf(object) === REACT_FORWARD_REF_TYPE;\n    }\n\n    function isFragment(object) {\n      return typeOf(object) === REACT_FRAGMENT_TYPE;\n    }\n\n    function isLazy(object) {\n      return typeOf(object) === REACT_LAZY_TYPE;\n    }\n\n    function isMemo(object) {\n      return typeOf(object) === REACT_MEMO_TYPE;\n    }\n\n    function isPortal(object) {\n      return typeOf(object) === REACT_PORTAL_TYPE;\n    }\n\n    function isProfiler(object) {\n      return typeOf(object) === REACT_PROFILER_TYPE;\n    }\n\n    function isStrictMode(object) {\n      return typeOf(object) === REACT_STRICT_MODE_TYPE;\n    }\n\n    function isSuspense(object) {\n      return typeOf(object) === REACT_SUSPENSE_TYPE;\n    }\n\n    reactIs_development.AsyncMode = AsyncMode;\n    reactIs_development.ConcurrentMode = ConcurrentMode;\n    reactIs_development.ContextConsumer = ContextConsumer;\n    reactIs_development.ContextProvider = ContextProvider;\n    reactIs_development.Element = Element;\n    reactIs_development.ForwardRef = ForwardRef;\n    reactIs_development.Fragment = Fragment;\n    reactIs_development.Lazy = Lazy;\n    reactIs_development.Memo = Memo;\n    reactIs_development.Portal = Portal;\n    reactIs_development.Profiler = Profiler;\n    reactIs_development.StrictMode = StrictMode;\n    reactIs_development.Suspense = Suspense;\n    reactIs_development.isAsyncMode = isAsyncMode;\n    reactIs_development.isConcurrentMode = isConcurrentMode;\n    reactIs_development.isContextConsumer = isContextConsumer;\n    reactIs_development.isContextProvider = isContextProvider;\n    reactIs_development.isElement = isElement;\n    reactIs_development.isForwardRef = isForwardRef;\n    reactIs_development.isFragment = isFragment;\n    reactIs_development.isLazy = isLazy;\n    reactIs_development.isMemo = isMemo;\n    reactIs_development.isPortal = isPortal;\n    reactIs_development.isProfiler = isProfiler;\n    reactIs_development.isStrictMode = isStrictMode;\n    reactIs_development.isSuspense = isSuspense;\n    reactIs_development.isValidElementType = isValidElementType;\n    reactIs_development.typeOf = typeOf;\n  })();\n}\n\nif (process.env.NODE_ENV === 'production') {\n  reactIs$1.exports = reactIs_production_min;\n} else {\n  reactIs$1.exports = reactIs_development;\n}\n\nvar reactIs = reactIs$1.exports;\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\n\nvar REACT_STATICS = {\n  childContextTypes: true,\n  contextType: true,\n  contextTypes: true,\n  defaultProps: true,\n  displayName: true,\n  getDefaultProps: true,\n  getDerivedStateFromError: true,\n  getDerivedStateFromProps: true,\n  mixins: true,\n  propTypes: true,\n  type: true\n};\nvar KNOWN_STATICS = {\n  name: true,\n  length: true,\n  prototype: true,\n  caller: true,\n  callee: true,\n  arguments: true,\n  arity: true\n};\nvar FORWARD_REF_STATICS = {\n  '$$typeof': true,\n  render: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true\n};\nvar MEMO_STATICS = {\n  '$$typeof': true,\n  compare: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true,\n  type: true\n};\nvar TYPE_STATICS = {};\nTYPE_STATICS[reactIs.ForwardRef] = FORWARD_REF_STATICS;\nTYPE_STATICS[reactIs.Memo] = MEMO_STATICS;\n\nfunction getStatics(component) {\n  // React v16.11 and below\n  if (reactIs.isMemo(component)) {\n    return MEMO_STATICS;\n  } // React v16.12 and above\n\n\n  return TYPE_STATICS[component['$$typeof']] || REACT_STATICS;\n}\n\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols$1 = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = Object.prototype;\n\nfunction hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n  if (typeof sourceComponent !== 'string') {\n    // don't hoist over string (html) components\n    if (objectPrototype) {\n      var inheritedComponent = getPrototypeOf(sourceComponent);\n\n      if (inheritedComponent && inheritedComponent !== objectPrototype) {\n        hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n      }\n    }\n\n    var keys = getOwnPropertyNames(sourceComponent);\n\n    if (getOwnPropertySymbols$1) {\n      keys = keys.concat(getOwnPropertySymbols$1(sourceComponent));\n    }\n\n    var targetStatics = getStatics(targetComponent);\n    var sourceStatics = getStatics(sourceComponent);\n\n    for (var i = 0; i < keys.length; ++i) {\n      var key = keys[i];\n\n      if (!KNOWN_STATICS[key] && !(blacklist && blacklist[key]) && !(sourceStatics && sourceStatics[key]) && !(targetStatics && targetStatics[key])) {\n        var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n\n        try {\n          // Avoid failures from read-only properties\n          defineProperty(targetComponent, key, descriptor);\n        } catch (e) {}\n      }\n    }\n  }\n\n  return targetComponent;\n}\n\nvar hoistNonReactStatics_cjs = hoistNonReactStatics;\nvar hoistStatics = hoistNonReactStatics_cjs;\n\nfunction _typeof$1(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof$1 = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof$1 = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof$1(obj);\n}\n\nfunction _classCallCheck$b(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$9(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$9(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$9(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$9(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof$1(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _defineProperty$a(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/**\n * @param collect The props collector function\n * @param options The DnD options\n */\n\n\nfunction DragLayer(collect) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  checkDecoratorArguments('DragLayer', 'collect[, options]', collect, options);\n  invariant(typeof collect === 'function', 'Expected \"collect\" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ', 'Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer', collect);\n  invariant(isPlainObject(options), 'Expected \"options\" provided as the second argument to DragLayer to be a plain object when specified. ' + 'Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer', options);\n  return function decorateLayer(DecoratedComponent) {\n    var Decorated = DecoratedComponent;\n    var _options$arePropsEqua = options.arePropsEqual,\n        arePropsEqual = _options$arePropsEqua === void 0 ? shallowEqual : _options$arePropsEqua;\n    var displayName = Decorated.displayName || Decorated.name || 'Component';\n\n    var DragLayerContainer = /*#__PURE__*/function (_Component) {\n      _inherits(DragLayerContainer, _Component);\n\n      var _super = _createSuper(DragLayerContainer);\n\n      function DragLayerContainer() {\n        var _this;\n\n        _classCallCheck$b(this, DragLayerContainer);\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        _this = _super.call.apply(_super, [this].concat(args));\n\n        _defineProperty$a(_assertThisInitialized(_this), \"manager\", void 0);\n\n        _defineProperty$a(_assertThisInitialized(_this), \"isCurrentlyMounted\", false);\n\n        _defineProperty$a(_assertThisInitialized(_this), \"unsubscribeFromOffsetChange\", void 0);\n\n        _defineProperty$a(_assertThisInitialized(_this), \"unsubscribeFromStateChange\", void 0);\n\n        _defineProperty$a(_assertThisInitialized(_this), \"ref\", /*#__PURE__*/createRef());\n\n        _defineProperty$a(_assertThisInitialized(_this), \"handleChange\", function () {\n          if (!_this.isCurrentlyMounted) {\n            return;\n          }\n\n          var nextState = _this.getCurrentState();\n\n          if (!shallowEqual(nextState, _this.state)) {\n            _this.setState(nextState);\n          }\n        });\n\n        return _this;\n      }\n\n      _createClass$9(DragLayerContainer, [{\n        key: \"getDecoratedComponentInstance\",\n        value: function getDecoratedComponentInstance() {\n          invariant(this.ref.current, 'In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()');\n          return this.ref.current;\n        }\n      }, {\n        key: \"shouldComponentUpdate\",\n        value: function shouldComponentUpdate(nextProps, nextState) {\n          return !arePropsEqual(nextProps, this.props) || !shallowEqual(nextState, this.state);\n        }\n      }, {\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          this.isCurrentlyMounted = true;\n          this.handleChange();\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          this.isCurrentlyMounted = false;\n\n          if (this.unsubscribeFromOffsetChange) {\n            this.unsubscribeFromOffsetChange();\n            this.unsubscribeFromOffsetChange = undefined;\n          }\n\n          if (this.unsubscribeFromStateChange) {\n            this.unsubscribeFromStateChange();\n            this.unsubscribeFromStateChange = undefined;\n          }\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this2 = this;\n\n          return jsx(DndContext.Consumer, {\n            children: function children(_ref) {\n              var dragDropManager = _ref.dragDropManager;\n\n              if (dragDropManager === undefined) {\n                return null;\n              }\n\n              _this2.receiveDragDropManager(dragDropManager); // Let componentDidMount fire to initialize the collected state\n\n\n              if (!_this2.isCurrentlyMounted) {\n                return null;\n              }\n\n              return jsx(Decorated, Object.assign({}, _this2.props, _this2.state, {\n                ref: isRefable(Decorated) ? _this2.ref : null\n              }), void 0);\n            }\n          }, void 0);\n        }\n      }, {\n        key: \"receiveDragDropManager\",\n        value: function receiveDragDropManager(dragDropManager) {\n          if (this.manager !== undefined) {\n            return;\n          }\n\n          this.manager = dragDropManager;\n          invariant(_typeof$1(dragDropManager) === 'object', 'Could not find the drag and drop manager in the context of %s. ' + 'Make sure to render a DndProvider component in your top-level component. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context', displayName, displayName);\n          var monitor = this.manager.getMonitor();\n          this.unsubscribeFromOffsetChange = monitor.subscribeToOffsetChange(this.handleChange);\n          this.unsubscribeFromStateChange = monitor.subscribeToStateChange(this.handleChange);\n        }\n      }, {\n        key: \"getCurrentState\",\n        value: function getCurrentState() {\n          if (!this.manager) {\n            return {};\n          }\n\n          var monitor = this.manager.getMonitor();\n          return collect(monitor, this.props);\n        }\n      }]);\n\n      return DragLayerContainer;\n    }(Component);\n\n    _defineProperty$a(DragLayerContainer, \"displayName\", \"DragLayer(\".concat(displayName, \")\"));\n\n    _defineProperty$a(DragLayerContainer, \"DecoratedComponent\", DecoratedComponent);\n\n    return hoistStatics(DragLayerContainer, DecoratedComponent);\n  };\n}\n\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect;\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck$a(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$8(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$8(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$8(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$8(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$9(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar DragSourceImpl = /*#__PURE__*/function () {\n  function DragSourceImpl(spec, monitor, connector) {\n    _classCallCheck$a(this, DragSourceImpl);\n\n    _defineProperty$9(this, \"spec\", void 0);\n\n    _defineProperty$9(this, \"monitor\", void 0);\n\n    _defineProperty$9(this, \"connector\", void 0);\n\n    this.spec = spec;\n    this.monitor = monitor;\n    this.connector = connector;\n  }\n\n  _createClass$8(DragSourceImpl, [{\n    key: \"beginDrag\",\n    value: function beginDrag() {\n      var _result;\n\n      var spec = this.spec;\n      var monitor = this.monitor;\n      var result = null;\n\n      if (_typeof(spec.item) === 'object') {\n        result = spec.item;\n      } else if (typeof spec.item === 'function') {\n        result = spec.item(monitor);\n      } else {\n        result = {};\n      }\n\n      return (_result = result) !== null && _result !== void 0 ? _result : null;\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n\n      if (typeof spec.canDrag === 'boolean') {\n        return spec.canDrag;\n      } else if (typeof spec.canDrag === 'function') {\n        return spec.canDrag(monitor);\n      } else {\n        return true;\n      }\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging(globalMonitor, target) {\n      var spec = this.spec;\n      var monitor = this.monitor;\n      var isDragging = spec.isDragging;\n      return isDragging ? isDragging(monitor) : target === globalMonitor.getSourceId();\n    }\n  }, {\n    key: \"endDrag\",\n    value: function endDrag() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n      var connector = this.connector;\n      var end = spec.end;\n\n      if (end) {\n        end(monitor.getItem(), monitor);\n      }\n\n      connector.reconnect();\n    }\n  }]);\n\n  return DragSourceImpl;\n}();\n\nfunction useDragSource(spec, monitor, connector) {\n  var handler = useMemo(function () {\n    return new DragSourceImpl(spec, monitor, connector);\n  }, [monitor, connector]);\n  useEffect(function () {\n    handler.spec = spec;\n  }, [spec]);\n  return handler;\n}\n/**\n * A hook to retrieve the DragDropManager from Context\n */\n\n\nfunction useDragDropManager() {\n  var _useContext = useContext(DndContext),\n      dragDropManager = _useContext.dragDropManager;\n\n  invariant(dragDropManager != null, 'Expected drag drop context');\n  return dragDropManager;\n}\n\nfunction useDragType(spec) {\n  return useMemo(function () {\n    var result = spec.type;\n    invariant(result != null, 'spec.type must be defined');\n    return result;\n  }, [spec]);\n}\n\nfunction _slicedToArray$3(arr, i) {\n  return _arrayWithHoles$3(arr) || _iterableToArrayLimit$3(arr, i) || _unsupportedIterableToArray$6(arr, i) || _nonIterableRest$3();\n}\n\nfunction _nonIterableRest$3() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$6(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$6(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$6(o, minLen);\n}\n\nfunction _arrayLikeToArray$6(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit$3(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles$3(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction useRegisteredDragSource(spec, monitor, connector) {\n  var manager = useDragDropManager();\n  var handler = useDragSource(spec, monitor, connector);\n  var itemType = useDragType(spec);\n  useIsomorphicLayoutEffect(function registerDragSource() {\n    if (itemType != null) {\n      var _registerSource = registerSource(itemType, handler, manager),\n          _registerSource2 = _slicedToArray$3(_registerSource, 2),\n          handlerId = _registerSource2[0],\n          unregister = _registerSource2[1];\n\n      monitor.receiveHandlerId(handlerId);\n      connector.receiveHandlerId(handlerId);\n      return unregister;\n    }\n  }, [manager, monitor, connector, handler, itemType]);\n}\n\nfunction _toConsumableArray$1(arr) {\n  return _arrayWithoutHoles$1(arr) || _iterableToArray$1(arr) || _unsupportedIterableToArray$5(arr) || _nonIterableSpread$1();\n}\n\nfunction _nonIterableSpread$1() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$5(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$5(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$5(o, minLen);\n}\n\nfunction _iterableToArray$1(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles$1(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray$5(arr);\n}\n\nfunction _arrayLikeToArray$5(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction useOptionalFactory(arg, deps) {\n  var memoDeps = _toConsumableArray$1(deps || []);\n\n  if (deps == null && typeof arg !== 'function') {\n    memoDeps.push(arg);\n  }\n\n  return useMemo(function () {\n    return typeof arg === 'function' ? arg() : arg;\n  }, memoDeps);\n}\n\nfunction useDragSourceMonitor() {\n  var manager = useDragDropManager();\n  return useMemo(function () {\n    return new DragSourceMonitorImpl(manager);\n  }, [manager]);\n}\n\nfunction useDragSourceConnector(dragSourceOptions, dragPreviewOptions) {\n  var manager = useDragDropManager();\n  var connector = useMemo(function () {\n    return new SourceConnector(manager.getBackend());\n  }, [manager]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dragSourceOptions = dragSourceOptions || null;\n    connector.reconnect();\n    return function () {\n      return connector.disconnectDragSource();\n    };\n  }, [connector, dragSourceOptions]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dragPreviewOptions = dragPreviewOptions || null;\n    connector.reconnect();\n    return function () {\n      return connector.disconnectDragPreview();\n    };\n  }, [connector, dragPreviewOptions]);\n  return connector;\n}\n\nvar fastDeepEqual = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n    var length, i, keys;\n\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n\n      for (i = length; i-- !== 0;) if (!equal(a[i], b[i])) return false;\n\n      return true;\n    }\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;) if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  } // true if both NaN, false otherwise\n\n\n  return a !== a && b !== b;\n};\n\nfunction _slicedToArray$2(arr, i) {\n  return _arrayWithHoles$2(arr) || _iterableToArrayLimit$2(arr, i) || _unsupportedIterableToArray$4(arr, i) || _nonIterableRest$2();\n}\n\nfunction _nonIterableRest$2() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$4(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$4(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$4(o, minLen);\n}\n\nfunction _arrayLikeToArray$4(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit$2(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles$2(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n/**\n *\n * @param monitor The monitor to collect state from\n * @param collect The collecting function\n * @param onUpdate A method to invoke when updates occur\n */\n\n\nfunction useCollector(monitor, collect, onUpdate) {\n  var _useState = useState(function () {\n    return collect(monitor);\n  }),\n      _useState2 = _slicedToArray$2(_useState, 2),\n      collected = _useState2[0],\n      setCollected = _useState2[1];\n\n  var updateCollected = useCallback(function () {\n    var nextValue = collect(monitor); // This needs to be a deep-equality check because some monitor-collected values\n    // include XYCoord objects that may be equivalent, but do not have instance equality.\n\n    if (!fastDeepEqual(collected, nextValue)) {\n      setCollected(nextValue);\n\n      if (onUpdate) {\n        onUpdate();\n      }\n    }\n  }, [collected, monitor, onUpdate]); // update the collected properties after react renders.\n  // Note that the \"Dustbin Stress Test\" fails if this is not\n  // done when the component updates\n\n  useIsomorphicLayoutEffect(updateCollected);\n  return [collected, updateCollected];\n}\n\nfunction _slicedToArray$1(arr, i) {\n  return _arrayWithHoles$1(arr) || _iterableToArrayLimit$1(arr, i) || _unsupportedIterableToArray$3(arr, i) || _nonIterableRest$1();\n}\n\nfunction _nonIterableRest$1() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$3(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$3(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$3(o, minLen);\n}\n\nfunction _arrayLikeToArray$3(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit$1(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles$1(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction useMonitorOutput(monitor, collect, onCollect) {\n  var _useCollector = useCollector(monitor, collect, onCollect),\n      _useCollector2 = _slicedToArray$1(_useCollector, 2),\n      collected = _useCollector2[0],\n      updateCollected = _useCollector2[1];\n\n  useIsomorphicLayoutEffect(function subscribeToMonitorStateChange() {\n    var handlerId = monitor.getHandlerId();\n\n    if (handlerId == null) {\n      return;\n    }\n\n    return monitor.subscribeToStateChange(updateCollected, {\n      handlerIds: [handlerId]\n    });\n  }, [monitor, updateCollected]);\n  return collected;\n}\n\nfunction useCollectedProps(collector, monitor, connector) {\n  return useMonitorOutput(monitor, collector || function () {\n    return {};\n  }, function () {\n    return connector.reconnect();\n  });\n}\n\nfunction useConnectDragSource(connector) {\n  return useMemo(function () {\n    return connector.hooks.dragSource();\n  }, [connector]);\n}\n\nfunction useConnectDragPreview(connector) {\n  return useMemo(function () {\n    return connector.hooks.dragPreview();\n  }, [connector]);\n}\n/**\n * useDragSource hook\n * @param sourceSpec The drag source specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */\n\n\nfunction useDrag(specArg, deps) {\n  var spec = useOptionalFactory(specArg, deps);\n  invariant(!spec.begin, \"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)\");\n  var monitor = useDragSourceMonitor();\n  var connector = useDragSourceConnector(spec.options, spec.previewOptions);\n  useRegisteredDragSource(spec, monitor, connector);\n  return [useCollectedProps(spec.collect, monitor, connector), useConnectDragSource(connector), useConnectDragPreview(connector)];\n}\n/**\n * Internal utility hook to get an array-version of spec.accept.\n * The main utility here is that we aren't creating a new array on every render if a non-array spec.accept is passed in.\n * @param spec\n */\n\n\nfunction useAccept(spec) {\n  var accept = spec.accept;\n  return useMemo(function () {\n    invariant(spec.accept != null, 'accept must be defined');\n    return Array.isArray(accept) ? accept : [accept];\n  }, [accept]);\n}\n\nfunction _classCallCheck$9(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$7(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$7(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$7(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$7(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$8(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar DropTargetImpl = /*#__PURE__*/function () {\n  function DropTargetImpl(spec, monitor) {\n    _classCallCheck$9(this, DropTargetImpl);\n\n    _defineProperty$8(this, \"spec\", void 0);\n\n    _defineProperty$8(this, \"monitor\", void 0);\n\n    this.spec = spec;\n    this.monitor = monitor;\n  }\n\n  _createClass$7(DropTargetImpl, [{\n    key: \"canDrop\",\n    value: function canDrop() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n      return spec.canDrop ? spec.canDrop(monitor.getItem(), monitor) : true;\n    }\n  }, {\n    key: \"hover\",\n    value: function hover() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n\n      if (spec.hover) {\n        spec.hover(monitor.getItem(), monitor);\n      }\n    }\n  }, {\n    key: \"drop\",\n    value: function drop() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n\n      if (spec.drop) {\n        return spec.drop(monitor.getItem(), monitor);\n      }\n    }\n  }]);\n\n  return DropTargetImpl;\n}();\n\nfunction useDropTarget(spec, monitor) {\n  var dropTarget = useMemo(function () {\n    return new DropTargetImpl(spec, monitor);\n  }, [monitor]);\n  useEffect(function () {\n    dropTarget.spec = spec;\n  }, [spec]);\n  return dropTarget;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray$2(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$2(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$2(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$2(o, minLen);\n}\n\nfunction _arrayLikeToArray$2(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction useRegisteredDropTarget(spec, monitor, connector) {\n  var manager = useDragDropManager();\n  var dropTarget = useDropTarget(spec, monitor);\n  var accept = useAccept(spec);\n  useIsomorphicLayoutEffect(function registerDropTarget() {\n    var _registerTarget = registerTarget(accept, dropTarget, manager),\n        _registerTarget2 = _slicedToArray(_registerTarget, 2),\n        handlerId = _registerTarget2[0],\n        unregister = _registerTarget2[1];\n\n    monitor.receiveHandlerId(handlerId);\n    connector.receiveHandlerId(handlerId);\n    return unregister;\n  }, [manager, monitor, dropTarget, connector, accept.map(function (a) {\n    return a.toString();\n  }).join('|')]);\n}\n\nfunction useDropTargetMonitor() {\n  var manager = useDragDropManager();\n  return useMemo(function () {\n    return new DropTargetMonitorImpl(manager);\n  }, [manager]);\n}\n\nfunction useDropTargetConnector(options) {\n  var manager = useDragDropManager();\n  var connector = useMemo(function () {\n    return new TargetConnector(manager.getBackend());\n  }, [manager]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dropTargetOptions = options || null;\n    connector.reconnect();\n    return function () {\n      return connector.disconnectDropTarget();\n    };\n  }, [options]);\n  return connector;\n}\n\nfunction useConnectDropTarget(connector) {\n  return useMemo(function () {\n    return connector.hooks.dropTarget();\n  }, [connector]);\n}\n/**\n * useDropTarget Hook\n * @param spec The drop target specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */\n\n\nfunction useDrop(specArg, deps) {\n  var spec = useOptionalFactory(specArg, deps);\n  var monitor = useDropTargetMonitor();\n  var connector = useDropTargetConnector(spec.options);\n  useRegisteredDropTarget(spec, monitor, connector);\n  return [useCollectedProps(spec.collect, monitor, connector), useConnectDropTarget(connector)];\n}\n\nvar createTransition = function (event, check) {\n  return {\n    _isMBTransition: true,\n    event: event,\n    check: check\n  };\n};\n\nvar TouchTransition = createTransition('touchstart', function (event) {\n  return event.touches != null; // eslint-disable-line no-eq-null, eqeqeq\n});\nvar MouseTransition = createTransition('mousedown', function (event) {\n  if (event.type) {\n    return event.type.indexOf('touch') === -1 && event.type.indexOf('mouse') !== -1;\n  }\n\n  return false;\n});\n\nfunction _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = _unsupportedIterableToArray$1(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray$1(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$1(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$1(o, minLen);\n}\n\nfunction _arrayLikeToArray$1(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _classCallCheck$8(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar PreviewList = function PreviewList() {\n  var _this = this;\n\n  _classCallCheck$8(this, PreviewList);\n\n  this.register = function (preview) {\n    _this.previews.push(preview);\n  };\n\n  this.unregister = function (preview) {\n    var index;\n\n    while ((index = _this.previews.indexOf(preview)) !== -1) {\n      _this.previews.splice(index, 1);\n    }\n  };\n\n  this.backendChanged = function (backend) {\n    var _iterator = _createForOfIteratorHelper(_this.previews),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var preview = _step.value;\n        preview.backendChanged(backend);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  };\n\n  this.previews = [];\n};\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _classCallCheck$7(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar _default = function _default(manager, context, sourceOptions) {\n  var _this = this;\n\n  _classCallCheck$7(this, _default);\n\n  this.setup = function () {\n    if (typeof window === 'undefined') {\n      return;\n    }\n\n    if (_this.constructor.isSetUp) {\n      throw new Error('Cannot have two MultiBackends at the same time.');\n    }\n\n    _this.constructor.isSetUp = true;\n\n    _this.addEventListeners(window);\n\n    _this.backends[_this.current].instance.setup();\n  };\n\n  this.teardown = function () {\n    if (typeof window === 'undefined') {\n      return;\n    }\n\n    _this.constructor.isSetUp = false;\n\n    _this.removeEventListeners(window);\n\n    _this.backends[_this.current].instance.teardown();\n  };\n\n  this.connectDragSource = function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _this.connectBackend('connectDragSource', args);\n  };\n\n  this.connectDragPreview = function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return _this.connectBackend('connectDragPreview', args);\n  };\n\n  this.connectDropTarget = function () {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    return _this.connectBackend('connectDropTarget', args);\n  };\n\n  this.previewEnabled = function () {\n    return _this.backends[_this.current].preview;\n  };\n\n  this.addEventListeners = function (target) {\n    _this.backends.forEach(function (backend) {\n      if (backend.transition) {\n        target.addEventListener(backend.transition.event, _this.backendSwitcher, true);\n      }\n    });\n  };\n\n  this.removeEventListeners = function (target) {\n    _this.backends.forEach(function (backend) {\n      if (backend.transition) {\n        target.removeEventListener(backend.transition.event, _this.backendSwitcher, true);\n      }\n    });\n  };\n\n  this.backendSwitcher = function (event) {\n    var oldBackend = _this.current;\n    var i = 0;\n\n    _this.backends.some(function (backend) {\n      if (i !== _this.current && backend.transition && backend.transition.check(event)) {\n        _this.current = i;\n        return true;\n      }\n\n      i += 1;\n      return false;\n    });\n\n    if (_this.current !== oldBackend) {\n      _this.backends[oldBackend].instance.teardown();\n\n      Object.keys(_this.nodes).forEach(function (id) {\n        var node = _this.nodes[id];\n        node.handler();\n        node.handler = _this.callBackend(node.func, node.args);\n      });\n\n      _this.previews.backendChanged(_this);\n\n      var newBackend = _this.backends[_this.current];\n      newBackend.instance.setup();\n\n      if (newBackend.skipDispatchOnTransition) {\n        return;\n      }\n\n      var newEvent = null;\n\n      try {\n        newEvent = new event.constructor(event.type, event);\n      } catch (_e) {\n        newEvent = document.createEvent('Event');\n        newEvent.initEvent(event.type, event.bubbles, event.cancelable);\n      }\n\n      event.target.dispatchEvent(newEvent);\n    }\n  };\n\n  this.callBackend = function (func, args) {\n    var _this$backends$_this$;\n\n    return (_this$backends$_this$ = _this.backends[_this.current].instance)[func].apply(_this$backends$_this$, _toConsumableArray(args));\n  };\n\n  this.connectBackend = function (func, args) {\n    var nodeId = \"\".concat(func, \"_\").concat(args[0]);\n\n    var handler = _this.callBackend(func, args);\n\n    _this.nodes[nodeId] = {\n      func: func,\n      args: args,\n      handler: handler\n    };\n    return function () {\n      var _this$nodes$nodeId;\n\n      var r = (_this$nodes$nodeId = _this.nodes[nodeId]).handler.apply(_this$nodes$nodeId, arguments);\n\n      delete _this.nodes[nodeId];\n      return r;\n    };\n  };\n\n  var options = Object.assign({\n    backends: []\n  }, sourceOptions || {});\n\n  if (options.backends.length < 1) {\n    throw new Error(\"You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)\\n        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx\");\n  }\n\n  this.current = 0;\n  this.previews = new PreviewList();\n  this.backends = [];\n  options.backends.forEach(function (backend) {\n    if (!backend.backend) {\n      throw new Error(\"You must specify a 'backend' property in your Backend entry: \".concat(backend));\n    }\n\n    var transition = backend.transition;\n\n    if (transition && !transition._isMBTransition) {\n      throw new Error(\"You must specify a valid 'transition' property (either undefined or the return of 'createTransition') in your Backend entry: \".concat(backend));\n    }\n\n    _this.backends.push({\n      instance: backend.backend(manager, context, backend.options),\n      preview: backend.preview || false,\n      transition: transition,\n      skipDispatchOnTransition: Boolean(backend.skipDispatchOnTransition)\n    });\n  });\n  this.nodes = {};\n} // DnD Backend API\n;\n\nvar MultiBackend = function (manager, context, options) {\n  return new _default(manager, context, options);\n};\n\nvar propTypes = {\n  exports: {}\n};\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n/* eslint-disable no-unused-vars */\n\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n  if (val === null || val === undefined) {\n    throw new TypeError('Object.assign cannot be called with null or undefined');\n  }\n\n  return Object(val);\n}\n\nfunction shouldUseNative() {\n  try {\n    if (!Object.assign) {\n      return false;\n    } // Detect buggy property enumeration order in older V8 versions.\n    // https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\n\n    var test1 = new String('abc'); // eslint-disable-line no-new-wrappers\n\n    test1[5] = 'de';\n\n    if (Object.getOwnPropertyNames(test1)[0] === '5') {\n      return false;\n    } // https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\n\n    var test2 = {};\n\n    for (var i = 0; i < 10; i++) {\n      test2['_' + String.fromCharCode(i)] = i;\n    }\n\n    var order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n      return test2[n];\n    });\n\n    if (order2.join('') !== '0123456789') {\n      return false;\n    } // https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\n\n    var test3 = {};\n    'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n      test3[letter] = letter;\n    });\n\n    if (Object.keys(Object.assign({}, test3)).join('') !== 'abcdefghijklmnopqrst') {\n      return false;\n    }\n\n    return true;\n  } catch (err) {\n    // We don't expect any of the above to throw, but better to be safe.\n    return false;\n  }\n}\n\nvar objectAssign = shouldUseNative() ? Object.assign : function (target, source) {\n  var from;\n  var to = toObject(target);\n  var symbols;\n\n  for (var s = 1; s < arguments.length; s++) {\n    from = Object(arguments[s]);\n\n    for (var key in from) {\n      if (hasOwnProperty.call(from, key)) {\n        to[key] = from[key];\n      }\n    }\n\n    if (getOwnPropertySymbols) {\n      symbols = getOwnPropertySymbols(from);\n\n      for (var i = 0; i < symbols.length; i++) {\n        if (propIsEnumerable.call(from, symbols[i])) {\n          to[symbols[i]] = from[symbols[i]];\n        }\n      }\n    }\n  }\n\n  return to;\n};\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar ReactPropTypesSecret$3 = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\nvar ReactPropTypesSecret_1 = ReactPropTypesSecret$3;\nvar has$2 = Function.call.bind(Object.prototype.hasOwnProperty);\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar printWarning$1 = function () {};\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactPropTypesSecret$2 = ReactPropTypesSecret_1;\n  var loggedTypeFailures = {};\n  var has$1 = has$2;\n\n  printWarning$1 = function (text) {\n    var message = 'Warning: ' + text;\n\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {\n      /**/\n    }\n  };\n}\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n * @private\n */\n\n\nfunction checkPropTypes$1(typeSpecs, values, location, componentName, getStack) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var typeSpecName in typeSpecs) {\n      if (has$1(typeSpecs, typeSpecName)) {\n        var error; // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            var err = Error((componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' + 'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.');\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n\n          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret$2);\n        } catch (ex) {\n          error = ex;\n        }\n\n        if (error && !(error instanceof Error)) {\n          printWarning$1((componentName || 'React class') + ': type specification of ' + location + ' `' + typeSpecName + '` is invalid; the type checker ' + 'function must return `null` or an `Error` but returned a ' + typeof error + '. ' + 'You may have forgotten to pass an argument to the type checker ' + 'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' + 'shape all require an argument).');\n        }\n\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n          var stack = getStack ? getStack() : '';\n          printWarning$1('Failed ' + location + ' type: ' + error.message + (stack != null ? stack : ''));\n        }\n      }\n    }\n  }\n}\n/**\n * Resets warning cache when testing.\n *\n * @private\n */\n\n\ncheckPropTypes$1.resetWarningCache = function () {\n  if (process.env.NODE_ENV !== 'production') {\n    loggedTypeFailures = {};\n  }\n};\n\nvar checkPropTypes_1 = checkPropTypes$1;\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar ReactIs$1 = reactIs$1.exports;\nvar assign = objectAssign;\nvar ReactPropTypesSecret$1 = ReactPropTypesSecret_1;\nvar has = has$2;\nvar checkPropTypes = checkPropTypes_1;\n\nvar printWarning = function () {};\n\nif (process.env.NODE_ENV !== 'production') {\n  printWarning = function (text) {\n    var message = 'Warning: ' + text;\n\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\nfunction emptyFunctionThatReturnsNull() {\n  return null;\n}\n\nvar factoryWithTypeCheckers = function (isValidElement, throwOnDirectAccess) {\n  /* global Symbol */\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n  /**\n   * Returns the iterator method function contained on the iterable object.\n   *\n   * Be sure to invoke the function with the iterable as context:\n   *\n   *     var iteratorFn = getIteratorFn(myIterable);\n   *     if (iteratorFn) {\n   *       var iterator = iteratorFn.call(myIterable);\n   *       ...\n   *     }\n   *\n   * @param {?object} maybeIterable\n   * @return {?function}\n   */\n\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n  /**\n   * Collection of methods that allow declaration and validation of props that are\n   * supplied to React components. Example usage:\n   *\n   *   var Props = require('ReactPropTypes');\n   *   var MyArticle = React.createClass({\n   *     propTypes: {\n   *       // An optional string prop named \"description\".\n   *       description: Props.string,\n   *\n   *       // A required enum prop named \"category\".\n   *       category: Props.oneOf(['News','Photos']).isRequired,\n   *\n   *       // A prop named \"dialog\" that requires an instance of Dialog.\n   *       dialog: Props.instanceOf(Dialog).isRequired\n   *     },\n   *     render: function() { ... }\n   *   });\n   *\n   * A more formal specification of how these methods are used:\n   *\n   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n   *   decl := ReactPropTypes.{type}(.isRequired)?\n   *\n   * Each and every declaration produces a function with the same signature. This\n   * allows the creation of custom validation functions. For example:\n   *\n   *  var MyLink = React.createClass({\n   *    propTypes: {\n   *      // An optional string or URI prop named \"href\".\n   *      href: function(props, propName, componentName) {\n   *        var propValue = props[propName];\n   *        if (propValue != null && typeof propValue !== 'string' &&\n   *            !(propValue instanceof URI)) {\n   *          return new Error(\n   *            'Expected a string or an URI for ' + propName + ' in ' +\n   *            componentName\n   *          );\n   *        }\n   *      }\n   *    },\n   *    render: function() {...}\n   *  });\n   *\n   * @internal\n   */\n\n\n  var ANONYMOUS = '<<anonymous>>'; // Important!\n  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bigint: createPrimitiveTypeChecker('bigint'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n    symbol: createPrimitiveTypeChecker('symbol'),\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    elementType: createElementTypeTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker,\n    exact: createStrictShapeTypeChecker\n  };\n  /**\n   * inlined Object.is polyfill to avoid requiring consumers ship their own\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   */\n\n  /*eslint-disable no-self-compare*/\n\n  function is(x, y) {\n    // SameValue algorithm\n    if (x === y) {\n      // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  }\n  /*eslint-enable no-self-compare*/\n\n  /**\n   * We use an Error-like object for backward compatibility as people may call\n   * PropTypes directly and inspect their output. However, we don't use real\n   * Errors anymore. We don't inspect their stack anyway, and creating them\n   * is prohibitively expensive if they are created too often, such as what\n   * happens in oneOfType() for any type before the one that matched.\n   */\n\n\n  function PropTypeError(message, data) {\n    this.message = message;\n    this.data = data && typeof data === 'object' ? data : {};\n    this.stack = '';\n  } // Make `instanceof Error` still work for returned errors.\n\n\n  PropTypeError.prototype = Error.prototype;\n\n  function createChainableTypeChecker(validate) {\n    if (process.env.NODE_ENV !== 'production') {\n      var manualPropTypeCallCache = {};\n      var manualPropTypeWarningCount = 0;\n    }\n\n    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n\n      if (secret !== ReactPropTypesSecret$1) {\n        if (throwOnDirectAccess) {\n          // New behavior only for users of `prop-types` package\n          var err = new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. ' + 'Use `PropTypes.checkPropTypes()` to call them. ' + 'Read more at http://fb.me/use-check-prop-types');\n          err.name = 'Invariant Violation';\n          throw err;\n        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n          // Old behavior for people using React.PropTypes\n          var cacheKey = componentName + ':' + propName;\n\n          if (!manualPropTypeCallCache[cacheKey] && // Avoid spamming the console because they are often not actionable except for lib authors\n          manualPropTypeWarningCount < 3) {\n            printWarning('You are manually calling a React.PropTypes validation ' + 'function for the `' + propFullName + '` prop on `' + componentName + '`. This is deprecated ' + 'and will throw in the standalone `prop-types` package. ' + 'You may be seeing this warning due to a third-party PropTypes ' + 'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.');\n            manualPropTypeCallCache[cacheKey] = true;\n            manualPropTypeWarningCount++;\n          }\n        }\n      }\n\n      if (props[propName] == null) {\n        if (isRequired) {\n          if (props[propName] === null) {\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n          }\n\n          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n        }\n\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName, secret) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n\n      if (propType !== expectedType) {\n        // `propValue` being instance of, say, date/regexp, pass the 'object'\n        // check, but we can offer a more precise error message here rather than\n        // 'of type `object`'.\n        var preciseType = getPreciseType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'), {\n          expectedType: expectedType\n        });\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunctionThatReturnsNull);\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n      }\n\n      var propValue = props[propName];\n\n      if (!Array.isArray(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret$1);\n\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n\n      if (!isValidElement(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n\n      if (!ReactIs$1.isValidElementType(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement type.'));\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (arguments.length > 1) {\n          printWarning('Invalid arguments supplied to oneOf, expected an array, got ' + arguments.length + ' arguments. ' + 'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).');\n        } else {\n          printWarning('Invalid argument supplied to oneOf, expected an array.');\n        }\n      }\n\n      return emptyFunctionThatReturnsNull;\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (is(propValue, expectedValues[i])) {\n          return null;\n        }\n      }\n\n      var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {\n        var type = getPreciseType(value);\n\n        if (type === 'symbol') {\n          return String(value);\n        }\n\n        return value;\n      });\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + String(propValue) + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n      }\n\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n\n      for (var key in propValue) {\n        if (has(propValue, key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret$1);\n\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n      var checker = arrayOfTypeCheckers[i];\n\n      if (typeof checker !== 'function') {\n        printWarning('Invalid argument supplied to oneOfType. Expected an array of check functions, but ' + 'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.');\n        return emptyFunctionThatReturnsNull;\n      }\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var expectedTypes = [];\n\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        var checkerResult = checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret$1);\n\n        if (checkerResult == null) {\n          return null;\n        }\n\n        if (checkerResult.data && has(checkerResult.data, 'expectedType')) {\n          expectedTypes.push(checkerResult.data.expectedType);\n        }\n      }\n\n      var expectedTypesMessage = expectedTypes.length > 0 ? ', expected one of type [' + expectedTypes.join(', ') + ']' : '';\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`' + expectedTypesMessage + '.'));\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function invalidValidatorError(componentName, location, propFullName, key, type) {\n    return new PropTypeError((componentName || 'React class') + ': ' + location + ' type `' + propFullName + '.' + key + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + type + '`.');\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n\n        if (typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret$1);\n\n        if (error) {\n          return error;\n        }\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createStrictShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      } // We need to check all keys in case some are required but missing from props.\n\n\n      var allKeys = assign({}, props[propName], shapeTypes);\n\n      for (var key in allKeys) {\n        var checker = shapeTypes[key];\n\n        if (has(shapeTypes, key) && typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n\n        if (!checker) {\n          return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' + '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') + '\\nValid keys: ' + JSON.stringify(Object.keys(shapeTypes), null, '  '));\n        }\n\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret$1);\n\n        if (error) {\n          return error;\n        }\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n\n      case 'boolean':\n        return !propValue;\n\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n\n        if (propValue === null || isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            // Iterator will provide entry [k,v] tuples rather than values.\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n\n      default:\n        return false;\n    }\n  }\n\n  function isSymbol(propType, propValue) {\n    // Native Symbol.\n    if (propType === 'symbol') {\n      return true;\n    } // falsy value can't be a Symbol\n\n\n    if (!propValue) {\n      return false;\n    } // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n\n\n    if (propValue['@@toStringTag'] === 'Symbol') {\n      return true;\n    } // Fallback for non-spec compliant Symbols which are polyfilled.\n\n\n    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n      return true;\n    }\n\n    return false;\n  } // Equivalent of `typeof` but with special handling for array and regexp.\n\n\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n\n    if (propValue instanceof RegExp) {\n      // Old webkits (at least until Android 4.0) return 'function' rather than\n      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n      // passes PropTypes.object.\n      return 'object';\n    }\n\n    if (isSymbol(propType, propValue)) {\n      return 'symbol';\n    }\n\n    return propType;\n  } // This handles more types than `getPropType`. Only used for error messages.\n  // See `createPrimitiveTypeChecker`.\n\n\n  function getPreciseType(propValue) {\n    if (typeof propValue === 'undefined' || propValue === null) {\n      return '' + propValue;\n    }\n\n    var propType = getPropType(propValue);\n\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n\n    return propType;\n  } // Returns a string that is postfixed to a warning about an invalid type.\n  // For example, \"undefined\" or \"of type array\"\n\n\n  function getPostfixForTypeWarning(value) {\n    var type = getPreciseType(value);\n\n    switch (type) {\n      case 'array':\n      case 'object':\n        return 'an ' + type;\n\n      case 'boolean':\n      case 'date':\n      case 'regexp':\n        return 'a ' + type;\n\n      default:\n        return type;\n    }\n  } // Returns class name of the object, if any.\n\n\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n\n    return propValue.constructor.name;\n  }\n\n  ReactPropTypes.checkPropTypes = checkPropTypes;\n  ReactPropTypes.resetWarningCache = checkPropTypes.resetWarningCache;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n  return ReactPropTypes;\n};\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\nvar ReactPropTypesSecret = ReactPropTypesSecret_1;\n\nfunction emptyFunction() {}\n\nfunction emptyFunctionWithReset() {}\n\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nvar factoryWithThrowingShims = function () {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n\n    var err = new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. ' + 'Use PropTypes.checkPropTypes() to call them. ' + 'Read more at http://fb.me/use-check-prop-types');\n    err.name = 'Invariant Violation';\n    throw err;\n  }\n\n  shim.isRequired = shim;\n\n  function getShim() {\n    return shim;\n  } // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n\n\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n  ReactPropTypes.PropTypes = ReactPropTypes;\n  return ReactPropTypes;\n};\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = reactIs$1.exports; // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n\n  var throwOnDirectAccess = true;\n  propTypes.exports = factoryWithTypeCheckers(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  propTypes.exports = factoryWithThrowingShims();\n}\n\nvar PropTypes = propTypes.exports;\n({\n  manager: PropTypes.any,\n  context: PropTypes.any,\n  options: PropTypes.any,\n  debugMode: PropTypes.bool\n});\n({\n  generator: PropTypes.func,\n  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func])\n}); // cheap lodash replacements\n\nfunction memoize(fn) {\n  var result = null;\n\n  var memoized = function memoized() {\n    if (result == null) {\n      result = fn();\n    }\n\n    return result;\n  };\n\n  return memoized;\n}\n/**\n * drop-in replacement for _.without\n */\n\n\nfunction without(items, item) {\n  return items.filter(function (i) {\n    return i !== item;\n  });\n}\n\nfunction union(itemsA, itemsB) {\n  var set = new Set();\n\n  var insertItem = function insertItem(item) {\n    return set.add(item);\n  };\n\n  itemsA.forEach(insertItem);\n  itemsB.forEach(insertItem);\n  var result = [];\n  set.forEach(function (key) {\n    return result.push(key);\n  });\n  return result;\n}\n\nfunction _classCallCheck$6(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$6(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$6(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$6(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$6(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$7(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar EnterLeaveCounter = /*#__PURE__*/function () {\n  function EnterLeaveCounter(isNodeInDocument) {\n    _classCallCheck$6(this, EnterLeaveCounter);\n\n    _defineProperty$7(this, \"entered\", []);\n\n    _defineProperty$7(this, \"isNodeInDocument\", void 0);\n\n    this.isNodeInDocument = isNodeInDocument;\n  }\n\n  _createClass$6(EnterLeaveCounter, [{\n    key: \"enter\",\n    value: function enter(enteringNode) {\n      var _this = this;\n\n      var previousLength = this.entered.length;\n\n      var isNodeEntered = function isNodeEntered(node) {\n        return _this.isNodeInDocument(node) && (!node.contains || node.contains(enteringNode));\n      };\n\n      this.entered = union(this.entered.filter(isNodeEntered), [enteringNode]);\n      return previousLength === 0 && this.entered.length > 0;\n    }\n  }, {\n    key: \"leave\",\n    value: function leave(leavingNode) {\n      var previousLength = this.entered.length;\n      this.entered = without(this.entered.filter(this.isNodeInDocument), leavingNode);\n      return previousLength > 0 && this.entered.length === 0;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.entered = [];\n    }\n  }]);\n\n  return EnterLeaveCounter;\n}();\n\nvar isFirefox = memoize(function () {\n  return /firefox/i.test(navigator.userAgent);\n});\nvar isSafari = memoize(function () {\n  return Boolean(window.safari);\n});\n\nfunction _classCallCheck$5(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$5(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$5(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$5(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$5(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$6(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar MonotonicInterpolant = /*#__PURE__*/function () {\n  function MonotonicInterpolant(xs, ys) {\n    _classCallCheck$5(this, MonotonicInterpolant);\n\n    _defineProperty$6(this, \"xs\", void 0);\n\n    _defineProperty$6(this, \"ys\", void 0);\n\n    _defineProperty$6(this, \"c1s\", void 0);\n\n    _defineProperty$6(this, \"c2s\", void 0);\n\n    _defineProperty$6(this, \"c3s\", void 0);\n\n    var length = xs.length; // Rearrange xs and ys so that xs is sorted\n\n    var indexes = [];\n\n    for (var i = 0; i < length; i++) {\n      indexes.push(i);\n    }\n\n    indexes.sort(function (a, b) {\n      return xs[a] < xs[b] ? -1 : 1;\n    }); // Get consecutive differences and slopes\n\n    var dxs = [];\n    var ms = [];\n    var dx;\n    var dy;\n\n    for (var _i = 0; _i < length - 1; _i++) {\n      dx = xs[_i + 1] - xs[_i];\n      dy = ys[_i + 1] - ys[_i];\n      dxs.push(dx);\n      ms.push(dy / dx);\n    } // Get degree-1 coefficients\n\n\n    var c1s = [ms[0]];\n\n    for (var _i2 = 0; _i2 < dxs.length - 1; _i2++) {\n      var m2 = ms[_i2];\n      var mNext = ms[_i2 + 1];\n\n      if (m2 * mNext <= 0) {\n        c1s.push(0);\n      } else {\n        dx = dxs[_i2];\n        var dxNext = dxs[_i2 + 1];\n        var common = dx + dxNext;\n        c1s.push(3 * common / ((common + dxNext) / m2 + (common + dx) / mNext));\n      }\n    }\n\n    c1s.push(ms[ms.length - 1]); // Get degree-2 and degree-3 coefficients\n\n    var c2s = [];\n    var c3s = [];\n    var m;\n\n    for (var _i3 = 0; _i3 < c1s.length - 1; _i3++) {\n      m = ms[_i3];\n      var c1 = c1s[_i3];\n      var invDx = 1 / dxs[_i3];\n\n      var _common = c1 + c1s[_i3 + 1] - m - m;\n\n      c2s.push((m - c1 - _common) * invDx);\n      c3s.push(_common * invDx * invDx);\n    }\n\n    this.xs = xs;\n    this.ys = ys;\n    this.c1s = c1s;\n    this.c2s = c2s;\n    this.c3s = c3s;\n  }\n\n  _createClass$5(MonotonicInterpolant, [{\n    key: \"interpolate\",\n    value: function interpolate(x) {\n      var xs = this.xs,\n          ys = this.ys,\n          c1s = this.c1s,\n          c2s = this.c2s,\n          c3s = this.c3s; // The rightmost point in the dataset should give an exact result\n\n      var i = xs.length - 1;\n\n      if (x === xs[i]) {\n        return ys[i];\n      } // Search for the interval x is in, returning the corresponding y if x is one of the original xs\n\n\n      var low = 0;\n      var high = c3s.length - 1;\n      var mid;\n\n      while (low <= high) {\n        mid = Math.floor(0.5 * (low + high));\n        var xHere = xs[mid];\n\n        if (xHere < x) {\n          low = mid + 1;\n        } else if (xHere > x) {\n          high = mid - 1;\n        } else {\n          return ys[mid];\n        }\n      }\n\n      i = Math.max(0, high); // Interpolate\n\n      var diff = x - xs[i];\n      var diffSq = diff * diff;\n      return ys[i] + c1s[i] * diff + c2s[i] * diffSq + c3s[i] * diff * diffSq;\n    }\n  }]);\n\n  return MonotonicInterpolant;\n}();\n\nvar ELEMENT_NODE$1 = 1;\n\nfunction getNodeClientOffset$1(node) {\n  var el = node.nodeType === ELEMENT_NODE$1 ? node : node.parentElement;\n\n  if (!el) {\n    return null;\n  }\n\n  var _el$getBoundingClient = el.getBoundingClientRect(),\n      top = _el$getBoundingClient.top,\n      left = _el$getBoundingClient.left;\n\n  return {\n    x: left,\n    y: top\n  };\n}\n\nfunction getEventClientOffset$1(e) {\n  return {\n    x: e.clientX,\n    y: e.clientY\n  };\n}\n\nfunction isImageNode(node) {\n  var _document$documentEle;\n\n  return node.nodeName === 'IMG' && (isFirefox() || !((_document$documentEle = document.documentElement) !== null && _document$documentEle !== void 0 && _document$documentEle.contains(node)));\n}\n\nfunction getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight) {\n  var dragPreviewWidth = isImage ? dragPreview.width : sourceWidth;\n  var dragPreviewHeight = isImage ? dragPreview.height : sourceHeight; // Work around @2x coordinate discrepancies in browsers\n\n  if (isSafari() && isImage) {\n    dragPreviewHeight /= window.devicePixelRatio;\n    dragPreviewWidth /= window.devicePixelRatio;\n  }\n\n  return {\n    dragPreviewWidth: dragPreviewWidth,\n    dragPreviewHeight: dragPreviewHeight\n  };\n}\n\nfunction getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint) {\n  // The browsers will use the image intrinsic size under different conditions.\n  // Firefox only cares if it's an image, but WebKit also wants it to be detached.\n  var isImage = isImageNode(dragPreview);\n  var dragPreviewNode = isImage ? sourceNode : dragPreview;\n  var dragPreviewNodeOffsetFromClient = getNodeClientOffset$1(dragPreviewNode);\n  var offsetFromDragPreview = {\n    x: clientOffset.x - dragPreviewNodeOffsetFromClient.x,\n    y: clientOffset.y - dragPreviewNodeOffsetFromClient.y\n  };\n  var sourceWidth = sourceNode.offsetWidth,\n      sourceHeight = sourceNode.offsetHeight;\n  var anchorX = anchorPoint.anchorX,\n      anchorY = anchorPoint.anchorY;\n\n  var _getDragPreviewSize = getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight),\n      dragPreviewWidth = _getDragPreviewSize.dragPreviewWidth,\n      dragPreviewHeight = _getDragPreviewSize.dragPreviewHeight;\n\n  var calculateYOffset = function calculateYOffset() {\n    var interpolantY = new MonotonicInterpolant([0, 0.5, 1], [// Dock to the top\n    offsetFromDragPreview.y, // Align at the center\n    offsetFromDragPreview.y / sourceHeight * dragPreviewHeight, // Dock to the bottom\n    offsetFromDragPreview.y + dragPreviewHeight - sourceHeight]);\n    var y = interpolantY.interpolate(anchorY); // Work around Safari 8 positioning bug\n\n    if (isSafari() && isImage) {\n      // We'll have to wait for @3x to see if this is entirely correct\n      y += (window.devicePixelRatio - 1) * dragPreviewHeight;\n    }\n\n    return y;\n  };\n\n  var calculateXOffset = function calculateXOffset() {\n    // Interpolate coordinates depending on anchor point\n    // If you know a simpler way to do this, let me know\n    var interpolantX = new MonotonicInterpolant([0, 0.5, 1], [// Dock to the left\n    offsetFromDragPreview.x, // Align at the center\n    offsetFromDragPreview.x / sourceWidth * dragPreviewWidth, // Dock to the right\n    offsetFromDragPreview.x + dragPreviewWidth - sourceWidth]);\n    return interpolantX.interpolate(anchorX);\n  }; // Force offsets if specified in the options.\n\n\n  var offsetX = offsetPoint.offsetX,\n      offsetY = offsetPoint.offsetY;\n  var isManualOffsetX = offsetX === 0 || offsetX;\n  var isManualOffsetY = offsetY === 0 || offsetY;\n  return {\n    x: isManualOffsetX ? offsetX : calculateXOffset(),\n    y: isManualOffsetY ? offsetY : calculateYOffset()\n  };\n}\n\nvar FILE = '__NATIVE_FILE__';\nvar URL = '__NATIVE_URL__';\nvar TEXT = '__NATIVE_TEXT__';\nvar HTML = '__NATIVE_HTML__';\nvar NativeTypes = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  FILE: FILE,\n  URL: URL,\n  TEXT: TEXT,\n  HTML: HTML\n});\n\nfunction getDataFromDataTransfer(dataTransfer, typesToTry, defaultValue) {\n  var result = typesToTry.reduce(function (resultSoFar, typeToTry) {\n    return resultSoFar || dataTransfer.getData(typeToTry);\n  }, '');\n  return result != null ? result : defaultValue;\n}\n\nvar _nativeTypesConfig;\n\nfunction _defineProperty$5(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar nativeTypesConfig = (_nativeTypesConfig = {}, _defineProperty$5(_nativeTypesConfig, FILE, {\n  exposeProperties: {\n    files: function files(dataTransfer) {\n      return Array.prototype.slice.call(dataTransfer.files);\n    },\n    items: function items(dataTransfer) {\n      return dataTransfer.items;\n    },\n    dataTransfer: function dataTransfer(_dataTransfer) {\n      return _dataTransfer;\n    }\n  },\n  matchesTypes: ['Files']\n}), _defineProperty$5(_nativeTypesConfig, HTML, {\n  exposeProperties: {\n    html: function html(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '');\n    },\n    dataTransfer: function dataTransfer(_dataTransfer2) {\n      return _dataTransfer2;\n    }\n  },\n  matchesTypes: ['Html', 'text/html']\n}), _defineProperty$5(_nativeTypesConfig, URL, {\n  exposeProperties: {\n    urls: function urls(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '').split('\\n');\n    },\n    dataTransfer: function dataTransfer(_dataTransfer3) {\n      return _dataTransfer3;\n    }\n  },\n  matchesTypes: ['Url', 'text/uri-list']\n}), _defineProperty$5(_nativeTypesConfig, TEXT, {\n  exposeProperties: {\n    text: function text(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '');\n    },\n    dataTransfer: function dataTransfer(_dataTransfer4) {\n      return _dataTransfer4;\n    }\n  },\n  matchesTypes: ['Text', 'text/plain']\n}), _nativeTypesConfig);\n\nfunction _classCallCheck$4(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$4(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$4(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$4(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$4(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$4(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar NativeDragSource = /*#__PURE__*/function () {\n  function NativeDragSource(config) {\n    _classCallCheck$4(this, NativeDragSource);\n\n    _defineProperty$4(this, \"item\", void 0);\n\n    _defineProperty$4(this, \"config\", void 0);\n\n    this.config = config;\n    this.item = {};\n    this.initializeExposedProperties();\n  }\n\n  _createClass$4(NativeDragSource, [{\n    key: \"initializeExposedProperties\",\n    value: function initializeExposedProperties() {\n      var _this = this;\n\n      Object.keys(this.config.exposeProperties).forEach(function (property) {\n        Object.defineProperty(_this.item, property, {\n          configurable: true,\n          enumerable: true,\n          get: function get() {\n            // eslint-disable-next-line no-console\n            console.warn(\"Browser doesn't allow reading \\\"\".concat(property, \"\\\" until the drop event.\"));\n            return null;\n          }\n        });\n      });\n    }\n  }, {\n    key: \"loadDataTransfer\",\n    value: function loadDataTransfer(dataTransfer) {\n      var _this2 = this;\n\n      if (dataTransfer) {\n        var newProperties = {};\n        Object.keys(this.config.exposeProperties).forEach(function (property) {\n          newProperties[property] = {\n            value: _this2.config.exposeProperties[property](dataTransfer, _this2.config.matchesTypes),\n            configurable: true,\n            enumerable: true\n          };\n        });\n        Object.defineProperties(this.item, newProperties);\n      }\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      return true;\n    }\n  }, {\n    key: \"beginDrag\",\n    value: function beginDrag() {\n      return this.item;\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging(monitor, handle) {\n      return handle === monitor.getSourceId();\n    }\n  }, {\n    key: \"endDrag\",\n    value: function endDrag() {// empty\n    }\n  }]);\n\n  return NativeDragSource;\n}();\n\nfunction createNativeDragSource(type, dataTransfer) {\n  var result = new NativeDragSource(nativeTypesConfig[type]);\n  result.loadDataTransfer(dataTransfer);\n  return result;\n}\n\nfunction matchNativeItemType(dataTransfer) {\n  if (!dataTransfer) {\n    return null;\n  }\n\n  var dataTransferTypes = Array.prototype.slice.call(dataTransfer.types || []);\n  return Object.keys(nativeTypesConfig).filter(function (nativeItemType) {\n    var matchesTypes = nativeTypesConfig[nativeItemType].matchesTypes;\n    return matchesTypes.some(function (t) {\n      return dataTransferTypes.indexOf(t) > -1;\n    });\n  })[0] || null;\n}\n\nfunction _classCallCheck$3(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$3(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$3(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$3(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$3(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$3(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar OptionsReader$1 = /*#__PURE__*/function () {\n  function OptionsReader(globalContext, options) {\n    _classCallCheck$3(this, OptionsReader);\n\n    _defineProperty$3(this, \"ownerDocument\", null);\n\n    _defineProperty$3(this, \"globalContext\", void 0);\n\n    _defineProperty$3(this, \"optionsArgs\", void 0);\n\n    this.globalContext = globalContext;\n    this.optionsArgs = options;\n  }\n\n  _createClass$3(OptionsReader, [{\n    key: \"window\",\n    get: function get() {\n      if (this.globalContext) {\n        return this.globalContext;\n      } else if (typeof window !== 'undefined') {\n        return window;\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      var _this$globalContext;\n\n      if ((_this$globalContext = this.globalContext) !== null && _this$globalContext !== void 0 && _this$globalContext.document) {\n        return this.globalContext.document;\n      } else if (this.window) {\n        return this.window.document;\n      } else {\n        return undefined;\n      }\n    }\n  }, {\n    key: \"rootElement\",\n    get: function get() {\n      var _this$optionsArgs;\n\n      return ((_this$optionsArgs = this.optionsArgs) === null || _this$optionsArgs === void 0 ? void 0 : _this$optionsArgs.rootElement) || this.window;\n    }\n  }]);\n\n  return OptionsReader;\n}();\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty$2(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck$2(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$2(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$2(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$2(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$2(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$2(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar HTML5BackendImpl = /*#__PURE__*/function () {\n  // React-Dnd Components\n  // Internal State\n  function HTML5BackendImpl(manager, globalContext, options) {\n    var _this = this;\n\n    _classCallCheck$2(this, HTML5BackendImpl);\n\n    _defineProperty$2(this, \"options\", void 0);\n\n    _defineProperty$2(this, \"actions\", void 0);\n\n    _defineProperty$2(this, \"monitor\", void 0);\n\n    _defineProperty$2(this, \"registry\", void 0);\n\n    _defineProperty$2(this, \"enterLeaveCounter\", void 0);\n\n    _defineProperty$2(this, \"sourcePreviewNodes\", new Map());\n\n    _defineProperty$2(this, \"sourcePreviewNodeOptions\", new Map());\n\n    _defineProperty$2(this, \"sourceNodes\", new Map());\n\n    _defineProperty$2(this, \"sourceNodeOptions\", new Map());\n\n    _defineProperty$2(this, \"dragStartSourceIds\", null);\n\n    _defineProperty$2(this, \"dropTargetIds\", []);\n\n    _defineProperty$2(this, \"dragEnterTargetIds\", []);\n\n    _defineProperty$2(this, \"currentNativeSource\", null);\n\n    _defineProperty$2(this, \"currentNativeHandle\", null);\n\n    _defineProperty$2(this, \"currentDragSourceNode\", null);\n\n    _defineProperty$2(this, \"altKeyPressed\", false);\n\n    _defineProperty$2(this, \"mouseMoveTimeoutTimer\", null);\n\n    _defineProperty$2(this, \"asyncEndDragFrameId\", null);\n\n    _defineProperty$2(this, \"dragOverTargetIds\", null);\n\n    _defineProperty$2(this, \"lastClientOffset\", null);\n\n    _defineProperty$2(this, \"hoverRafId\", null);\n\n    _defineProperty$2(this, \"getSourceClientOffset\", function (sourceId) {\n      var source = _this.sourceNodes.get(sourceId);\n\n      return source && getNodeClientOffset$1(source) || null;\n    });\n\n    _defineProperty$2(this, \"endDragNativeItem\", function () {\n      if (!_this.isDraggingNativeItem()) {\n        return;\n      }\n\n      _this.actions.endDrag();\n\n      if (_this.currentNativeHandle) {\n        _this.registry.removeSource(_this.currentNativeHandle);\n      }\n\n      _this.currentNativeHandle = null;\n      _this.currentNativeSource = null;\n    });\n\n    _defineProperty$2(this, \"isNodeInDocument\", function (node) {\n      // Check the node either in the main document or in the current context\n      return Boolean(node && _this.document && _this.document.body && _this.document.body.contains(node));\n    });\n\n    _defineProperty$2(this, \"endDragIfSourceWasRemovedFromDOM\", function () {\n      var node = _this.currentDragSourceNode;\n\n      if (node == null || _this.isNodeInDocument(node)) {\n        return;\n      }\n\n      if (_this.clearCurrentDragSourceNode() && _this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragStartCapture\", function () {\n      _this.clearCurrentDragSourceNode();\n\n      _this.dragStartSourceIds = [];\n    });\n\n    _defineProperty$2(this, \"handleTopDragStart\", function (e) {\n      if (e.defaultPrevented) {\n        return;\n      }\n\n      var dragStartSourceIds = _this.dragStartSourceIds;\n      _this.dragStartSourceIds = null;\n      var clientOffset = getEventClientOffset$1(e); // Avoid crashing if we missed a drop event or our previous drag died\n\n      if (_this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      } // Don't publish the source just yet (see why below)\n\n\n      _this.actions.beginDrag(dragStartSourceIds || [], {\n        publishSource: false,\n        getSourceClientOffset: _this.getSourceClientOffset,\n        clientOffset: clientOffset\n      });\n\n      var dataTransfer = e.dataTransfer;\n      var nativeType = matchNativeItemType(dataTransfer);\n\n      if (_this.monitor.isDragging()) {\n        if (dataTransfer && typeof dataTransfer.setDragImage === 'function') {\n          // Use custom drag image if user specifies it.\n          // If child drag source refuses drag but parent agrees,\n          // use parent's node as drag image. Neither works in IE though.\n          var sourceId = _this.monitor.getSourceId();\n\n          var sourceNode = _this.sourceNodes.get(sourceId);\n\n          var dragPreview = _this.sourcePreviewNodes.get(sourceId) || sourceNode;\n\n          if (dragPreview) {\n            var _this$getCurrentSourc = _this.getCurrentSourcePreviewNodeOptions(),\n                anchorX = _this$getCurrentSourc.anchorX,\n                anchorY = _this$getCurrentSourc.anchorY,\n                offsetX = _this$getCurrentSourc.offsetX,\n                offsetY = _this$getCurrentSourc.offsetY;\n\n            var anchorPoint = {\n              anchorX: anchorX,\n              anchorY: anchorY\n            };\n            var offsetPoint = {\n              offsetX: offsetX,\n              offsetY: offsetY\n            };\n            var dragPreviewOffset = getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint);\n            dataTransfer.setDragImage(dragPreview, dragPreviewOffset.x, dragPreviewOffset.y);\n          }\n        }\n\n        try {\n          // Firefox won't drag without setting data\n          dataTransfer === null || dataTransfer === void 0 ? void 0 : dataTransfer.setData('application/json', {});\n        } catch (err) {// IE doesn't support MIME types in setData\n        } // Store drag source node so we can check whether\n        // it is removed from DOM and trigger endDrag manually.\n\n\n        _this.setCurrentDragSourceNode(e.target); // Now we are ready to publish the drag source.. or are we not?\n\n\n        var _this$getCurrentSourc2 = _this.getCurrentSourcePreviewNodeOptions(),\n            captureDraggingState = _this$getCurrentSourc2.captureDraggingState;\n\n        if (!captureDraggingState) {\n          // Usually we want to publish it in the next tick so that browser\n          // is able to screenshot the current (not yet dragging) state.\n          //\n          // It also neatly avoids a situation where render() returns null\n          // in the same tick for the source element, and browser freaks out.\n          setTimeout(function () {\n            return _this.actions.publishDragSource();\n          }, 0);\n        } else {\n          // In some cases the user may want to override this behavior, e.g.\n          // to work around IE not supporting custom drag previews.\n          //\n          // When using a custom drag layer, the only way to prevent\n          // the default drag preview from drawing in IE is to screenshot\n          // the dragging state in which the node itself has zero opacity\n          // and height. In this case, though, returning null from render()\n          // will abruptly end the dragging, which is not obvious.\n          //\n          // This is the reason such behavior is strictly opt-in.\n          _this.actions.publishDragSource();\n        }\n      } else if (nativeType) {\n        // A native item (such as URL) dragged from inside the document\n        _this.beginDragNativeItem(nativeType);\n      } else if (dataTransfer && !dataTransfer.types && (e.target && !e.target.hasAttribute || !e.target.hasAttribute('draggable'))) {\n        // Looks like a Safari bug: dataTransfer.types is null, but there was no draggable.\n        // Just let it drag. It's a native type (URL or text) and will be picked up in\n        // dragenter handler.\n        return;\n      } else {\n        // If by this time no drag source reacted, tell browser not to drag.\n        e.preventDefault();\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragEndCapture\", function () {\n      if (_this.clearCurrentDragSourceNode() && _this.monitor.isDragging()) {\n        // Firefox can dispatch this event in an infinite loop\n        // if dragend handler does something like showing an alert.\n        // Only proceed if we have not handled it already.\n        _this.actions.endDrag();\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragEnterCapture\", function (e) {\n      _this.dragEnterTargetIds = [];\n\n      var isFirstEnter = _this.enterLeaveCounter.enter(e.target);\n\n      if (!isFirstEnter || _this.monitor.isDragging()) {\n        return;\n      }\n\n      var dataTransfer = e.dataTransfer;\n      var nativeType = matchNativeItemType(dataTransfer);\n\n      if (nativeType) {\n        // A native item (such as file or URL) dragged from outside the document\n        _this.beginDragNativeItem(nativeType, dataTransfer);\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragEnter\", function (e) {\n      var dragEnterTargetIds = _this.dragEnterTargetIds;\n      _this.dragEnterTargetIds = [];\n\n      if (!_this.monitor.isDragging()) {\n        // This is probably a native item type we don't understand.\n        return;\n      }\n\n      _this.altKeyPressed = e.altKey; // If the target changes position as the result of `dragenter`, `dragover` might still\n      // get dispatched despite target being no longer there. The easy solution is to check\n      // whether there actually is a target before firing `hover`.\n\n      if (dragEnterTargetIds.length > 0) {\n        _this.actions.hover(dragEnterTargetIds, {\n          clientOffset: getEventClientOffset$1(e)\n        });\n      }\n\n      var canDrop = dragEnterTargetIds.some(function (targetId) {\n        return _this.monitor.canDropOnTarget(targetId);\n      });\n\n      if (canDrop) {\n        // IE requires this to fire dragover events\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n        }\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragOverCapture\", function () {\n      _this.dragOverTargetIds = [];\n    });\n\n    _defineProperty$2(this, \"handleTopDragOver\", function (e) {\n      var dragOverTargetIds = _this.dragOverTargetIds;\n      _this.dragOverTargetIds = [];\n\n      if (!_this.monitor.isDragging()) {\n        // This is probably a native item type we don't understand.\n        // Prevent default \"drop and blow away the whole document\" action.\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = 'none';\n        }\n\n        return;\n      }\n\n      _this.altKeyPressed = e.altKey;\n      _this.lastClientOffset = getEventClientOffset$1(e);\n\n      if (_this.hoverRafId === null && typeof requestAnimationFrame !== 'undefined') {\n        _this.hoverRafId = requestAnimationFrame(function () {\n          if (_this.monitor.isDragging()) {\n            _this.actions.hover(dragOverTargetIds || [], {\n              clientOffset: _this.lastClientOffset\n            });\n          }\n\n          _this.hoverRafId = null;\n        });\n      }\n\n      var canDrop = (dragOverTargetIds || []).some(function (targetId) {\n        return _this.monitor.canDropOnTarget(targetId);\n      });\n\n      if (canDrop) {\n        // Show user-specified drop effect.\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n        }\n      } else if (_this.isDraggingNativeItem()) {\n        // Don't show a nice cursor but still prevent default\n        // \"drop and blow away the whole document\" action.\n        e.preventDefault();\n      } else {\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = 'none';\n        }\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragLeaveCapture\", function (e) {\n      if (_this.isDraggingNativeItem()) {\n        e.preventDefault();\n      }\n\n      var isLastLeave = _this.enterLeaveCounter.leave(e.target);\n\n      if (!isLastLeave) {\n        return;\n      }\n\n      if (_this.isDraggingNativeItem()) {\n        setTimeout(function () {\n          return _this.endDragNativeItem();\n        }, 0);\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDropCapture\", function (e) {\n      _this.dropTargetIds = [];\n\n      if (_this.isDraggingNativeItem()) {\n        var _this$currentNativeSo;\n\n        e.preventDefault();\n        (_this$currentNativeSo = _this.currentNativeSource) === null || _this$currentNativeSo === void 0 ? void 0 : _this$currentNativeSo.loadDataTransfer(e.dataTransfer);\n      } else if (matchNativeItemType(e.dataTransfer)) {\n        // Dragging some elements, like <a> and <img> may still behave like a native drag event,\n        // even if the current drag event matches a user-defined type.\n        // Stop the default behavior when we're not expecting a native item to be dropped.\n        e.preventDefault();\n      }\n\n      _this.enterLeaveCounter.reset();\n    });\n\n    _defineProperty$2(this, \"handleTopDrop\", function (e) {\n      var dropTargetIds = _this.dropTargetIds;\n      _this.dropTargetIds = [];\n\n      _this.actions.hover(dropTargetIds, {\n        clientOffset: getEventClientOffset$1(e)\n      });\n\n      _this.actions.drop({\n        dropEffect: _this.getCurrentDropEffect()\n      });\n\n      if (_this.isDraggingNativeItem()) {\n        _this.endDragNativeItem();\n      } else if (_this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      }\n    });\n\n    _defineProperty$2(this, \"handleSelectStart\", function (e) {\n      var target = e.target; // Only IE requires us to explicitly say\n      // we want drag drop operation to start\n\n      if (typeof target.dragDrop !== 'function') {\n        return;\n      } // Inputs and textareas should be selectable\n\n\n      if (target.tagName === 'INPUT' || target.tagName === 'SELECT' || target.tagName === 'TEXTAREA' || target.isContentEditable) {\n        return;\n      } // For other targets, ask IE\n      // to enable drag and drop\n\n\n      e.preventDefault();\n      target.dragDrop();\n    });\n\n    this.options = new OptionsReader$1(globalContext, options);\n    this.actions = manager.getActions();\n    this.monitor = manager.getMonitor();\n    this.registry = manager.getRegistry();\n    this.enterLeaveCounter = new EnterLeaveCounter(this.isNodeInDocument);\n  }\n  /**\n   * Generate profiling statistics for the HTML5Backend.\n   */\n\n\n  _createClass$2(HTML5BackendImpl, [{\n    key: \"profile\",\n    value: function profile() {\n      var _this$dragStartSource, _this$dragOverTargetI;\n\n      return {\n        sourcePreviewNodes: this.sourcePreviewNodes.size,\n        sourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,\n        sourceNodeOptions: this.sourceNodeOptions.size,\n        sourceNodes: this.sourceNodes.size,\n        dragStartSourceIds: ((_this$dragStartSource = this.dragStartSourceIds) === null || _this$dragStartSource === void 0 ? void 0 : _this$dragStartSource.length) || 0,\n        dropTargetIds: this.dropTargetIds.length,\n        dragEnterTargetIds: this.dragEnterTargetIds.length,\n        dragOverTargetIds: ((_this$dragOverTargetI = this.dragOverTargetIds) === null || _this$dragOverTargetI === void 0 ? void 0 : _this$dragOverTargetI.length) || 0\n      };\n    } // public for test\n\n  }, {\n    key: \"window\",\n    get: function get() {\n      return this.options.window;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      return this.options.document;\n    }\n    /**\n     * Get the root element to use for event subscriptions\n     */\n\n  }, {\n    key: \"rootElement\",\n    get: function get() {\n      return this.options.rootElement;\n    }\n  }, {\n    key: \"setup\",\n    value: function setup() {\n      var root = this.rootElement;\n\n      if (root === undefined) {\n        return;\n      }\n\n      if (root.__isReactDndBackendSetUp) {\n        throw new Error('Cannot have two HTML5 backends at the same time.');\n      }\n\n      root.__isReactDndBackendSetUp = true;\n      this.addEventListeners(root);\n    }\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      var root = this.rootElement;\n\n      if (root === undefined) {\n        return;\n      }\n\n      root.__isReactDndBackendSetUp = false;\n      this.removeEventListeners(this.rootElement);\n      this.clearCurrentDragSourceNode();\n\n      if (this.asyncEndDragFrameId) {\n        var _this$window;\n\n        (_this$window = this.window) === null || _this$window === void 0 ? void 0 : _this$window.cancelAnimationFrame(this.asyncEndDragFrameId);\n      }\n    }\n  }, {\n    key: \"connectDragPreview\",\n    value: function connectDragPreview(sourceId, node, options) {\n      var _this2 = this;\n\n      this.sourcePreviewNodeOptions.set(sourceId, options);\n      this.sourcePreviewNodes.set(sourceId, node);\n      return function () {\n        _this2.sourcePreviewNodes.delete(sourceId);\n\n        _this2.sourcePreviewNodeOptions.delete(sourceId);\n      };\n    }\n  }, {\n    key: \"connectDragSource\",\n    value: function connectDragSource(sourceId, node, options) {\n      var _this3 = this;\n\n      this.sourceNodes.set(sourceId, node);\n      this.sourceNodeOptions.set(sourceId, options);\n\n      var handleDragStart = function handleDragStart(e) {\n        return _this3.handleDragStart(e, sourceId);\n      };\n\n      var handleSelectStart = function handleSelectStart(e) {\n        return _this3.handleSelectStart(e);\n      };\n\n      node.setAttribute('draggable', 'true');\n      node.addEventListener('dragstart', handleDragStart);\n      node.addEventListener('selectstart', handleSelectStart);\n      return function () {\n        _this3.sourceNodes.delete(sourceId);\n\n        _this3.sourceNodeOptions.delete(sourceId);\n\n        node.removeEventListener('dragstart', handleDragStart);\n        node.removeEventListener('selectstart', handleSelectStart);\n        node.setAttribute('draggable', 'false');\n      };\n    }\n  }, {\n    key: \"connectDropTarget\",\n    value: function connectDropTarget(targetId, node) {\n      var _this4 = this;\n\n      var handleDragEnter = function handleDragEnter(e) {\n        return _this4.handleDragEnter(e, targetId);\n      };\n\n      var handleDragOver = function handleDragOver(e) {\n        return _this4.handleDragOver(e, targetId);\n      };\n\n      var handleDrop = function handleDrop(e) {\n        return _this4.handleDrop(e, targetId);\n      };\n\n      node.addEventListener('dragenter', handleDragEnter);\n      node.addEventListener('dragover', handleDragOver);\n      node.addEventListener('drop', handleDrop);\n      return function () {\n        node.removeEventListener('dragenter', handleDragEnter);\n        node.removeEventListener('dragover', handleDragOver);\n        node.removeEventListener('drop', handleDrop);\n      };\n    }\n  }, {\n    key: \"addEventListeners\",\n    value: function addEventListeners(target) {\n      // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n      if (!target.addEventListener) {\n        return;\n      }\n\n      target.addEventListener('dragstart', this.handleTopDragStart);\n      target.addEventListener('dragstart', this.handleTopDragStartCapture, true);\n      target.addEventListener('dragend', this.handleTopDragEndCapture, true);\n      target.addEventListener('dragenter', this.handleTopDragEnter);\n      target.addEventListener('dragenter', this.handleTopDragEnterCapture, true);\n      target.addEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n      target.addEventListener('dragover', this.handleTopDragOver);\n      target.addEventListener('dragover', this.handleTopDragOverCapture, true);\n      target.addEventListener('drop', this.handleTopDrop);\n      target.addEventListener('drop', this.handleTopDropCapture, true);\n    }\n  }, {\n    key: \"removeEventListeners\",\n    value: function removeEventListeners(target) {\n      // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n      if (!target.removeEventListener) {\n        return;\n      }\n\n      target.removeEventListener('dragstart', this.handleTopDragStart);\n      target.removeEventListener('dragstart', this.handleTopDragStartCapture, true);\n      target.removeEventListener('dragend', this.handleTopDragEndCapture, true);\n      target.removeEventListener('dragenter', this.handleTopDragEnter);\n      target.removeEventListener('dragenter', this.handleTopDragEnterCapture, true);\n      target.removeEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n      target.removeEventListener('dragover', this.handleTopDragOver);\n      target.removeEventListener('dragover', this.handleTopDragOverCapture, true);\n      target.removeEventListener('drop', this.handleTopDrop);\n      target.removeEventListener('drop', this.handleTopDropCapture, true);\n    }\n  }, {\n    key: \"getCurrentSourceNodeOptions\",\n    value: function getCurrentSourceNodeOptions() {\n      var sourceId = this.monitor.getSourceId();\n      var sourceNodeOptions = this.sourceNodeOptions.get(sourceId);\n      return _objectSpread({\n        dropEffect: this.altKeyPressed ? 'copy' : 'move'\n      }, sourceNodeOptions || {});\n    }\n  }, {\n    key: \"getCurrentDropEffect\",\n    value: function getCurrentDropEffect() {\n      if (this.isDraggingNativeItem()) {\n        // It makes more sense to default to 'copy' for native resources\n        return 'copy';\n      }\n\n      return this.getCurrentSourceNodeOptions().dropEffect;\n    }\n  }, {\n    key: \"getCurrentSourcePreviewNodeOptions\",\n    value: function getCurrentSourcePreviewNodeOptions() {\n      var sourceId = this.monitor.getSourceId();\n      var sourcePreviewNodeOptions = this.sourcePreviewNodeOptions.get(sourceId);\n      return _objectSpread({\n        anchorX: 0.5,\n        anchorY: 0.5,\n        captureDraggingState: false\n      }, sourcePreviewNodeOptions || {});\n    }\n  }, {\n    key: \"isDraggingNativeItem\",\n    value: function isDraggingNativeItem() {\n      var itemType = this.monitor.getItemType();\n      return Object.keys(NativeTypes).some(function (key) {\n        return NativeTypes[key] === itemType;\n      });\n    }\n  }, {\n    key: \"beginDragNativeItem\",\n    value: function beginDragNativeItem(type, dataTransfer) {\n      this.clearCurrentDragSourceNode();\n      this.currentNativeSource = createNativeDragSource(type, dataTransfer);\n      this.currentNativeHandle = this.registry.addSource(type, this.currentNativeSource);\n      this.actions.beginDrag([this.currentNativeHandle]);\n    }\n  }, {\n    key: \"setCurrentDragSourceNode\",\n    value: function setCurrentDragSourceNode(node) {\n      var _this5 = this;\n\n      this.clearCurrentDragSourceNode();\n      this.currentDragSourceNode = node; // A timeout of > 0 is necessary to resolve Firefox issue referenced\n      // See:\n      //   * https://github.com/react-dnd/react-dnd/pull/928\n      //   * https://github.com/react-dnd/react-dnd/issues/869\n\n      var MOUSE_MOVE_TIMEOUT = 1000; // Receiving a mouse event in the middle of a dragging operation\n      // means it has ended and the drag source node disappeared from DOM,\n      // so the browser didn't dispatch the dragend event.\n      //\n      // We need to wait before we start listening for mousemove events.\n      // This is needed because the drag preview needs to be drawn or else it fires an 'mousemove' event\n      // immediately in some browsers.\n      //\n      // See:\n      //   * https://github.com/react-dnd/react-dnd/pull/928\n      //   * https://github.com/react-dnd/react-dnd/issues/869\n      //\n\n      this.mouseMoveTimeoutTimer = setTimeout(function () {\n        var _this5$rootElement;\n\n        return (_this5$rootElement = _this5.rootElement) === null || _this5$rootElement === void 0 ? void 0 : _this5$rootElement.addEventListener('mousemove', _this5.endDragIfSourceWasRemovedFromDOM, true);\n      }, MOUSE_MOVE_TIMEOUT);\n    }\n  }, {\n    key: \"clearCurrentDragSourceNode\",\n    value: function clearCurrentDragSourceNode() {\n      if (this.currentDragSourceNode) {\n        this.currentDragSourceNode = null;\n\n        if (this.rootElement) {\n          var _this$window2;\n\n          (_this$window2 = this.window) === null || _this$window2 === void 0 ? void 0 : _this$window2.clearTimeout(this.mouseMoveTimeoutTimer || undefined);\n          this.rootElement.removeEventListener('mousemove', this.endDragIfSourceWasRemovedFromDOM, true);\n        }\n\n        this.mouseMoveTimeoutTimer = null;\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"handleDragStart\",\n    value: function handleDragStart(e, sourceId) {\n      if (e.defaultPrevented) {\n        return;\n      }\n\n      if (!this.dragStartSourceIds) {\n        this.dragStartSourceIds = [];\n      }\n\n      this.dragStartSourceIds.unshift(sourceId);\n    }\n  }, {\n    key: \"handleDragEnter\",\n    value: function handleDragEnter(e, targetId) {\n      this.dragEnterTargetIds.unshift(targetId);\n    }\n  }, {\n    key: \"handleDragOver\",\n    value: function handleDragOver(e, targetId) {\n      if (this.dragOverTargetIds === null) {\n        this.dragOverTargetIds = [];\n      }\n\n      this.dragOverTargetIds.unshift(targetId);\n    }\n  }, {\n    key: \"handleDrop\",\n    value: function handleDrop(e, targetId) {\n      this.dropTargetIds.unshift(targetId);\n    }\n  }]);\n\n  return HTML5BackendImpl;\n}();\n\nvar emptyImage;\n\nfunction getEmptyImage() {\n  if (!emptyImage) {\n    emptyImage = new Image();\n    emptyImage.src = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n  }\n\n  return emptyImage;\n}\n\nvar HTML5Backend = function createBackend(manager, context, options) {\n  return new HTML5BackendImpl(manager, context, options);\n};\n\nvar ListenerType;\n\n(function (ListenerType) {\n  ListenerType[\"mouse\"] = \"mouse\";\n  ListenerType[\"touch\"] = \"touch\";\n  ListenerType[\"keyboard\"] = \"keyboard\";\n})(ListenerType || (ListenerType = {})); // Used for MouseEvent.buttons (note the s on the end).\n\n\nvar MouseButtons = {\n  Left: 1,\n  Right: 2,\n  Center: 4\n}; // Used for e.button (note the lack of an s on the end).\n\nvar MouseButton = {\n  Left: 0,\n  Center: 1,\n  Right: 2\n};\n/**\n * Only touch events and mouse events where the left button is pressed should initiate a drag.\n * @param {MouseEvent | TouchEvent} e The event\n */\n\nfunction eventShouldStartDrag(e) {\n  // For touch events, button will be undefined. If e.button is defined,\n  // then it should be MouseButton.Left.\n  return e.button === undefined || e.button === MouseButton.Left;\n}\n/**\n * Only touch events and mouse events where the left mouse button is no longer held should end a drag.\n * It's possible the user mouse downs with the left mouse button, then mouse down and ups with the right mouse button.\n * We don't want releasing the right mouse button to end the drag.\n * @param {MouseEvent | TouchEvent} e The event\n */\n\n\nfunction eventShouldEndDrag(e) {\n  // Touch events will have buttons be undefined, while mouse events will have e.buttons's left button\n  // bit field unset if the left mouse button has been released\n  return e.buttons === undefined || (e.buttons & MouseButtons.Left) === 0;\n}\n\nfunction isTouchEvent(e) {\n  return !!e.targetTouches;\n}\n\nvar ELEMENT_NODE = 1;\n\nfunction getNodeClientOffset(node) {\n  var el = node.nodeType === ELEMENT_NODE ? node : node.parentElement;\n\n  if (!el) {\n    return undefined;\n  }\n\n  var _el$getBoundingClient = el.getBoundingClientRect(),\n      top = _el$getBoundingClient.top,\n      left = _el$getBoundingClient.left;\n\n  return {\n    x: left,\n    y: top\n  };\n}\n\nfunction getEventClientTouchOffset(e, lastTargetTouchFallback) {\n  if (e.targetTouches.length === 1) {\n    return getEventClientOffset(e.targetTouches[0]);\n  } else if (lastTargetTouchFallback && e.touches.length === 1) {\n    if (e.touches[0].target === lastTargetTouchFallback.target) {\n      return getEventClientOffset(e.touches[0]);\n    }\n  }\n}\n\nfunction getEventClientOffset(e, lastTargetTouchFallback) {\n  if (isTouchEvent(e)) {\n    return getEventClientTouchOffset(e, lastTargetTouchFallback);\n  } else {\n    return {\n      x: e.clientX,\n      y: e.clientY\n    };\n  }\n}\n\nfunction distance(x1, y1, x2, y2) {\n  return Math.sqrt(Math.pow(Math.abs(x2 - x1), 2) + Math.pow(Math.abs(y2 - y1), 2));\n}\n\nfunction inAngleRanges(x1, y1, x2, y2, angleRanges) {\n  if (!angleRanges) {\n    return false;\n  }\n\n  var angle = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI + 180;\n\n  for (var i = 0; i < angleRanges.length; ++i) {\n    if ((angleRanges[i].start == null || angle >= angleRanges[i].start) && (angleRanges[i].end == null || angle <= angleRanges[i].end)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nvar supportsPassive = function () {\n  // simular to jQuery's test\n  var supported = false;\n\n  try {\n    addEventListener('test', function () {// do nothing\n    }, Object.defineProperty({}, 'passive', {\n      get: function get() {\n        supported = true;\n        return true;\n      }\n    }));\n  } catch (e) {// do nothing\n  }\n\n  return supported;\n}();\n\nfunction _classCallCheck$1(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$1(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$1(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$1(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$1(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$1(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar OptionsReader = /*#__PURE__*/function () {\n  function OptionsReader(args, context) {\n    _classCallCheck$1(this, OptionsReader);\n\n    _defineProperty$1(this, \"args\", void 0);\n\n    _defineProperty$1(this, \"context\", void 0);\n\n    this.args = args;\n    this.context = context;\n  }\n\n  _createClass$1(OptionsReader, [{\n    key: \"delay\",\n    get: function get() {\n      var _this$args$delay;\n\n      return (_this$args$delay = this.args.delay) !== null && _this$args$delay !== void 0 ? _this$args$delay : 0;\n    }\n  }, {\n    key: \"scrollAngleRanges\",\n    get: function get() {\n      return this.args.scrollAngleRanges;\n    }\n  }, {\n    key: \"getDropTargetElementsAtPoint\",\n    get: function get() {\n      return this.args.getDropTargetElementsAtPoint;\n    }\n  }, {\n    key: \"ignoreContextMenu\",\n    get: function get() {\n      var _this$args$ignoreCont;\n\n      return (_this$args$ignoreCont = this.args.ignoreContextMenu) !== null && _this$args$ignoreCont !== void 0 ? _this$args$ignoreCont : false;\n    }\n  }, {\n    key: \"enableHoverOutsideTarget\",\n    get: function get() {\n      var _this$args$enableHove;\n\n      return (_this$args$enableHove = this.args.enableHoverOutsideTarget) !== null && _this$args$enableHove !== void 0 ? _this$args$enableHove : false;\n    }\n  }, {\n    key: \"enableKeyboardEvents\",\n    get: function get() {\n      var _this$args$enableKeyb;\n\n      return (_this$args$enableKeyb = this.args.enableKeyboardEvents) !== null && _this$args$enableKeyb !== void 0 ? _this$args$enableKeyb : false;\n    }\n  }, {\n    key: \"enableMouseEvents\",\n    get: function get() {\n      var _this$args$enableMous;\n\n      return (_this$args$enableMous = this.args.enableMouseEvents) !== null && _this$args$enableMous !== void 0 ? _this$args$enableMous : false;\n    }\n  }, {\n    key: \"enableTouchEvents\",\n    get: function get() {\n      var _this$args$enableTouc;\n\n      return (_this$args$enableTouc = this.args.enableTouchEvents) !== null && _this$args$enableTouc !== void 0 ? _this$args$enableTouc : true;\n    }\n  }, {\n    key: \"touchSlop\",\n    get: function get() {\n      return this.args.touchSlop || 0;\n    }\n  }, {\n    key: \"delayTouchStart\",\n    get: function get() {\n      var _ref, _this$args$delayTouch, _this$args, _this$args2;\n\n      return (_ref = (_this$args$delayTouch = (_this$args = this.args) === null || _this$args === void 0 ? void 0 : _this$args.delayTouchStart) !== null && _this$args$delayTouch !== void 0 ? _this$args$delayTouch : (_this$args2 = this.args) === null || _this$args2 === void 0 ? void 0 : _this$args2.delay) !== null && _ref !== void 0 ? _ref : 0;\n    }\n  }, {\n    key: \"delayMouseStart\",\n    get: function get() {\n      var _ref2, _this$args$delayMouse, _this$args3, _this$args4;\n\n      return (_ref2 = (_this$args$delayMouse = (_this$args3 = this.args) === null || _this$args3 === void 0 ? void 0 : _this$args3.delayMouseStart) !== null && _this$args$delayMouse !== void 0 ? _this$args$delayMouse : (_this$args4 = this.args) === null || _this$args4 === void 0 ? void 0 : _this$args4.delay) !== null && _ref2 !== void 0 ? _ref2 : 0;\n    }\n  }, {\n    key: \"window\",\n    get: function get() {\n      if (this.context && this.context.window) {\n        return this.context.window;\n      } else if (typeof window !== 'undefined') {\n        return window;\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      var _this$context;\n\n      if ((_this$context = this.context) !== null && _this$context !== void 0 && _this$context.document) {\n        return this.context.document;\n      }\n\n      if (this.window) {\n        return this.window.document;\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"rootElement\",\n    get: function get() {\n      var _this$args5;\n\n      return ((_this$args5 = this.args) === null || _this$args5 === void 0 ? void 0 : _this$args5.rootElement) || this.document;\n    }\n  }]);\n\n  return OptionsReader;\n}();\n\nvar _eventNames;\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar eventNames = (_eventNames = {}, _defineProperty(_eventNames, ListenerType.mouse, {\n  start: 'mousedown',\n  move: 'mousemove',\n  end: 'mouseup',\n  contextmenu: 'contextmenu'\n}), _defineProperty(_eventNames, ListenerType.touch, {\n  start: 'touchstart',\n  move: 'touchmove',\n  end: 'touchend'\n}), _defineProperty(_eventNames, ListenerType.keyboard, {\n  keydown: 'keydown'\n}), _eventNames);\n\nvar TouchBackendImpl = /*#__PURE__*/function () {\n  // React-DnD Dependencies\n  // Internal State\n  // Patch for iOS 13, discussion over #1585\n  function TouchBackendImpl(manager, context, options) {\n    var _this = this;\n\n    _classCallCheck(this, TouchBackendImpl);\n\n    _defineProperty(this, \"options\", void 0);\n\n    _defineProperty(this, \"actions\", void 0);\n\n    _defineProperty(this, \"monitor\", void 0);\n\n    _defineProperty(this, \"sourceNodes\", void 0);\n\n    _defineProperty(this, \"sourcePreviewNodes\", void 0);\n\n    _defineProperty(this, \"sourcePreviewNodeOptions\", void 0);\n\n    _defineProperty(this, \"targetNodes\", void 0);\n\n    _defineProperty(this, \"_mouseClientOffset\", void 0);\n\n    _defineProperty(this, \"_isScrolling\", void 0);\n\n    _defineProperty(this, \"listenerTypes\", void 0);\n\n    _defineProperty(this, \"moveStartSourceIds\", void 0);\n\n    _defineProperty(this, \"waitingForDelay\", void 0);\n\n    _defineProperty(this, \"timeout\", void 0);\n\n    _defineProperty(this, \"dragOverTargetIds\", void 0);\n\n    _defineProperty(this, \"draggedSourceNode\", void 0);\n\n    _defineProperty(this, \"draggedSourceNodeRemovalObserver\", void 0);\n\n    _defineProperty(this, \"lastTargetTouchFallback\", void 0);\n\n    _defineProperty(this, \"getSourceClientOffset\", function (sourceId) {\n      var element = _this.sourceNodes.get(sourceId);\n\n      return element && getNodeClientOffset(element);\n    });\n\n    _defineProperty(this, \"handleTopMoveStartCapture\", function (e) {\n      if (!eventShouldStartDrag(e)) {\n        return;\n      }\n\n      _this.moveStartSourceIds = [];\n    });\n\n    _defineProperty(this, \"handleMoveStart\", function (sourceId) {\n      // Just because we received an event doesn't necessarily mean we need to collect drag sources.\n      // We only collect start collecting drag sources on touch and left mouse events.\n      if (Array.isArray(_this.moveStartSourceIds)) {\n        _this.moveStartSourceIds.unshift(sourceId);\n      }\n    });\n\n    _defineProperty(this, \"handleTopMoveStart\", function (e) {\n      if (!eventShouldStartDrag(e)) {\n        return;\n      } // Don't prematurely preventDefault() here since it might:\n      // 1. Mess up scrolling\n      // 2. Mess up long tap (which brings up context menu)\n      // 3. If there's an anchor link as a child, tap won't be triggered on link\n\n\n      var clientOffset = getEventClientOffset(e);\n\n      if (clientOffset) {\n        if (isTouchEvent(e)) {\n          _this.lastTargetTouchFallback = e.targetTouches[0];\n        }\n\n        _this._mouseClientOffset = clientOffset;\n      }\n\n      _this.waitingForDelay = false;\n    });\n\n    _defineProperty(this, \"handleTopMoveStartDelay\", function (e) {\n      if (!eventShouldStartDrag(e)) {\n        return;\n      }\n\n      var delay = e.type === eventNames.touch.start ? _this.options.delayTouchStart : _this.options.delayMouseStart;\n      _this.timeout = setTimeout(_this.handleTopMoveStart.bind(_this, e), delay);\n      _this.waitingForDelay = true;\n    });\n\n    _defineProperty(this, \"handleTopMoveCapture\", function () {\n      _this.dragOverTargetIds = [];\n    });\n\n    _defineProperty(this, \"handleMove\", function (_evt, targetId) {\n      if (_this.dragOverTargetIds) {\n        _this.dragOverTargetIds.unshift(targetId);\n      }\n    });\n\n    _defineProperty(this, \"handleTopMove\", function (e) {\n      if (_this.timeout) {\n        clearTimeout(_this.timeout);\n      }\n\n      if (!_this.document || _this.waitingForDelay) {\n        return;\n      }\n\n      var moveStartSourceIds = _this.moveStartSourceIds,\n          dragOverTargetIds = _this.dragOverTargetIds;\n      var enableHoverOutsideTarget = _this.options.enableHoverOutsideTarget;\n      var clientOffset = getEventClientOffset(e, _this.lastTargetTouchFallback);\n\n      if (!clientOffset) {\n        return;\n      } // If the touch move started as a scroll, or is is between the scroll angles\n\n\n      if (_this._isScrolling || !_this.monitor.isDragging() && inAngleRanges(_this._mouseClientOffset.x || 0, _this._mouseClientOffset.y || 0, clientOffset.x, clientOffset.y, _this.options.scrollAngleRanges)) {\n        _this._isScrolling = true;\n        return;\n      } // If we're not dragging and we've moved a little, that counts as a drag start\n\n\n      if (!_this.monitor.isDragging() && // eslint-disable-next-line no-prototype-builtins\n      _this._mouseClientOffset.hasOwnProperty('x') && moveStartSourceIds && distance(_this._mouseClientOffset.x || 0, _this._mouseClientOffset.y || 0, clientOffset.x, clientOffset.y) > (_this.options.touchSlop ? _this.options.touchSlop : 0)) {\n        _this.moveStartSourceIds = undefined;\n\n        _this.actions.beginDrag(moveStartSourceIds, {\n          clientOffset: _this._mouseClientOffset,\n          getSourceClientOffset: _this.getSourceClientOffset,\n          publishSource: false\n        });\n      }\n\n      if (!_this.monitor.isDragging()) {\n        return;\n      }\n\n      var sourceNode = _this.sourceNodes.get(_this.monitor.getSourceId());\n\n      _this.installSourceNodeRemovalObserver(sourceNode);\n\n      _this.actions.publishDragSource();\n\n      if (e.cancelable) e.preventDefault(); // Get the node elements of the hovered DropTargets\n\n      var dragOverTargetNodes = (dragOverTargetIds || []).map(function (key) {\n        return _this.targetNodes.get(key);\n      }).filter(function (e) {\n        return !!e;\n      }); // Get the a ordered list of nodes that are touched by\n\n      var elementsAtPoint = _this.options.getDropTargetElementsAtPoint ? _this.options.getDropTargetElementsAtPoint(clientOffset.x, clientOffset.y, dragOverTargetNodes) : _this.document.elementsFromPoint(clientOffset.x, clientOffset.y); // Extend list with parents that are not receiving elementsFromPoint events (size 0 elements and svg groups)\n\n      var elementsAtPointExtended = [];\n\n      for (var nodeId in elementsAtPoint) {\n        // eslint-disable-next-line no-prototype-builtins\n        if (!elementsAtPoint.hasOwnProperty(nodeId)) {\n          continue;\n        }\n\n        var currentNode = elementsAtPoint[nodeId];\n        elementsAtPointExtended.push(currentNode);\n\n        while (currentNode) {\n          currentNode = currentNode.parentElement;\n\n          if (currentNode && elementsAtPointExtended.indexOf(currentNode) === -1) {\n            elementsAtPointExtended.push(currentNode);\n          }\n        }\n      }\n\n      var orderedDragOverTargetIds = elementsAtPointExtended // Filter off nodes that arent a hovered DropTargets nodes\n      .filter(function (node) {\n        return dragOverTargetNodes.indexOf(node) > -1;\n      }) // Map back the nodes elements to targetIds\n      .map(function (node) {\n        return _this._getDropTargetId(node);\n      }) // Filter off possible null rows\n      .filter(function (node) {\n        return !!node;\n      }).filter(function (id, index, ids) {\n        return ids.indexOf(id) === index;\n      }); // Invoke hover for drop targets when source node is still over and pointer is outside\n\n      if (enableHoverOutsideTarget) {\n        for (var targetId in _this.targetNodes) {\n          var targetNode = _this.targetNodes.get(targetId);\n\n          if (sourceNode && targetNode && targetNode.contains(sourceNode) && orderedDragOverTargetIds.indexOf(targetId) === -1) {\n            orderedDragOverTargetIds.unshift(targetId);\n            break;\n          }\n        }\n      } // Reverse order because dnd-core reverse it before calling the DropTarget drop methods\n\n\n      orderedDragOverTargetIds.reverse();\n\n      _this.actions.hover(orderedDragOverTargetIds, {\n        clientOffset: clientOffset\n      });\n    });\n\n    _defineProperty(this, \"_getDropTargetId\", function (node) {\n      var keys = _this.targetNodes.keys();\n\n      var next = keys.next();\n\n      while (next.done === false) {\n        var targetId = next.value;\n\n        if (node === _this.targetNodes.get(targetId)) {\n          return targetId;\n        } else {\n          next = keys.next();\n        }\n      }\n\n      return undefined;\n    });\n\n    _defineProperty(this, \"handleTopMoveEndCapture\", function (e) {\n      _this._isScrolling = false;\n      _this.lastTargetTouchFallback = undefined;\n\n      if (!eventShouldEndDrag(e)) {\n        return;\n      }\n\n      if (!_this.monitor.isDragging() || _this.monitor.didDrop()) {\n        _this.moveStartSourceIds = undefined;\n        return;\n      }\n\n      if (e.cancelable) e.preventDefault();\n      _this._mouseClientOffset = {};\n\n      _this.uninstallSourceNodeRemovalObserver();\n\n      _this.actions.drop();\n\n      _this.actions.endDrag();\n    });\n\n    _defineProperty(this, \"handleCancelOnEscape\", function (e) {\n      if (e.key === 'Escape' && _this.monitor.isDragging()) {\n        _this._mouseClientOffset = {};\n\n        _this.uninstallSourceNodeRemovalObserver();\n\n        _this.actions.endDrag();\n      }\n    });\n\n    this.options = new OptionsReader(options, context);\n    this.actions = manager.getActions();\n    this.monitor = manager.getMonitor();\n    this.sourceNodes = new Map();\n    this.sourcePreviewNodes = new Map();\n    this.sourcePreviewNodeOptions = new Map();\n    this.targetNodes = new Map();\n    this.listenerTypes = [];\n    this._mouseClientOffset = {};\n    this._isScrolling = false;\n\n    if (this.options.enableMouseEvents) {\n      this.listenerTypes.push(ListenerType.mouse);\n    }\n\n    if (this.options.enableTouchEvents) {\n      this.listenerTypes.push(ListenerType.touch);\n    }\n\n    if (this.options.enableKeyboardEvents) {\n      this.listenerTypes.push(ListenerType.keyboard);\n    }\n  }\n  /**\n   * Generate profiling statistics for the HTML5Backend.\n   */\n\n\n  _createClass(TouchBackendImpl, [{\n    key: \"profile\",\n    value: function profile() {\n      var _this$dragOverTargetI;\n\n      return {\n        sourceNodes: this.sourceNodes.size,\n        sourcePreviewNodes: this.sourcePreviewNodes.size,\n        sourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,\n        targetNodes: this.targetNodes.size,\n        dragOverTargetIds: ((_this$dragOverTargetI = this.dragOverTargetIds) === null || _this$dragOverTargetI === void 0 ? void 0 : _this$dragOverTargetI.length) || 0\n      };\n    } // public for test\n\n  }, {\n    key: \"document\",\n    get: function get() {\n      return this.options.document;\n    }\n  }, {\n    key: \"setup\",\n    value: function setup() {\n      var root = this.options.rootElement;\n\n      if (!root) {\n        return;\n      }\n\n      invariant(!TouchBackendImpl.isSetUp, 'Cannot have two Touch backends at the same time.');\n      TouchBackendImpl.isSetUp = true;\n      this.addEventListener(root, 'start', this.getTopMoveStartHandler());\n      this.addEventListener(root, 'start', this.handleTopMoveStartCapture, true);\n      this.addEventListener(root, 'move', this.handleTopMove);\n      this.addEventListener(root, 'move', this.handleTopMoveCapture, true);\n      this.addEventListener(root, 'end', this.handleTopMoveEndCapture, true);\n\n      if (this.options.enableMouseEvents && !this.options.ignoreContextMenu) {\n        this.addEventListener(root, 'contextmenu', this.handleTopMoveEndCapture);\n      }\n\n      if (this.options.enableKeyboardEvents) {\n        this.addEventListener(root, 'keydown', this.handleCancelOnEscape, true);\n      }\n    }\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      var root = this.options.rootElement;\n\n      if (!root) {\n        return;\n      }\n\n      TouchBackendImpl.isSetUp = false;\n      this._mouseClientOffset = {};\n      this.removeEventListener(root, 'start', this.handleTopMoveStartCapture, true);\n      this.removeEventListener(root, 'start', this.handleTopMoveStart);\n      this.removeEventListener(root, 'move', this.handleTopMoveCapture, true);\n      this.removeEventListener(root, 'move', this.handleTopMove);\n      this.removeEventListener(root, 'end', this.handleTopMoveEndCapture, true);\n\n      if (this.options.enableMouseEvents && !this.options.ignoreContextMenu) {\n        this.removeEventListener(root, 'contextmenu', this.handleTopMoveEndCapture);\n      }\n\n      if (this.options.enableKeyboardEvents) {\n        this.removeEventListener(root, 'keydown', this.handleCancelOnEscape, true);\n      }\n\n      this.uninstallSourceNodeRemovalObserver();\n    }\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener(subject, event, handler, capture) {\n      var options = supportsPassive ? {\n        capture: capture,\n        passive: false\n      } : capture;\n      this.listenerTypes.forEach(function (listenerType) {\n        var evt = eventNames[listenerType][event];\n\n        if (evt) {\n          subject.addEventListener(evt, handler, options);\n        }\n      });\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener(subject, event, handler, capture) {\n      var options = supportsPassive ? {\n        capture: capture,\n        passive: false\n      } : capture;\n      this.listenerTypes.forEach(function (listenerType) {\n        var evt = eventNames[listenerType][event];\n\n        if (evt) {\n          subject.removeEventListener(evt, handler, options);\n        }\n      });\n    }\n  }, {\n    key: \"connectDragSource\",\n    value: function connectDragSource(sourceId, node) {\n      var _this2 = this;\n\n      var handleMoveStart = this.handleMoveStart.bind(this, sourceId);\n      this.sourceNodes.set(sourceId, node);\n      this.addEventListener(node, 'start', handleMoveStart);\n      return function () {\n        _this2.sourceNodes.delete(sourceId);\n\n        _this2.removeEventListener(node, 'start', handleMoveStart);\n      };\n    }\n  }, {\n    key: \"connectDragPreview\",\n    value: function connectDragPreview(sourceId, node, options) {\n      var _this3 = this;\n\n      this.sourcePreviewNodeOptions.set(sourceId, options);\n      this.sourcePreviewNodes.set(sourceId, node);\n      return function () {\n        _this3.sourcePreviewNodes.delete(sourceId);\n\n        _this3.sourcePreviewNodeOptions.delete(sourceId);\n      };\n    }\n  }, {\n    key: \"connectDropTarget\",\n    value: function connectDropTarget(targetId, node) {\n      var _this4 = this;\n\n      var root = this.options.rootElement;\n\n      if (!this.document || !root) {\n        return function () {\n          /* noop */\n        };\n      }\n\n      var handleMove = function handleMove(e) {\n        if (!_this4.document || !root || !_this4.monitor.isDragging()) {\n          return;\n        }\n\n        var coords;\n        /**\n         * Grab the coordinates for the current mouse/touch position\n         */\n\n        switch (e.type) {\n          case eventNames.mouse.move:\n            coords = {\n              x: e.clientX,\n              y: e.clientY\n            };\n            break;\n\n          case eventNames.touch.move:\n            coords = {\n              x: e.touches[0].clientX,\n              y: e.touches[0].clientY\n            };\n            break;\n        }\n        /**\n         * Use the coordinates to grab the element the drag ended on.\n         * If the element is the same as the target node (or any of it's children) then we have hit a drop target and can handle the move.\n         */\n\n\n        var droppedOn = coords != null ? _this4.document.elementFromPoint(coords.x, coords.y) : undefined;\n        var childMatch = droppedOn && node.contains(droppedOn);\n\n        if (droppedOn === node || childMatch) {\n          return _this4.handleMove(e, targetId);\n        }\n      };\n      /**\n       * Attaching the event listener to the body so that touchmove will work while dragging over multiple target elements.\n       */\n\n\n      this.addEventListener(this.document.body, 'move', handleMove);\n      this.targetNodes.set(targetId, node);\n      return function () {\n        if (_this4.document) {\n          _this4.targetNodes.delete(targetId);\n\n          _this4.removeEventListener(_this4.document.body, 'move', handleMove);\n        }\n      };\n    }\n  }, {\n    key: \"getTopMoveStartHandler\",\n    value: function getTopMoveStartHandler() {\n      if (!this.options.delayTouchStart && !this.options.delayMouseStart) {\n        return this.handleTopMoveStart;\n      }\n\n      return this.handleTopMoveStartDelay;\n    }\n  }, {\n    key: \"installSourceNodeRemovalObserver\",\n    value: function installSourceNodeRemovalObserver(node) {\n      var _this5 = this;\n\n      this.uninstallSourceNodeRemovalObserver();\n      this.draggedSourceNode = node;\n      this.draggedSourceNodeRemovalObserver = new MutationObserver(function () {\n        if (node && !node.parentElement) {\n          _this5.resurrectSourceNode();\n\n          _this5.uninstallSourceNodeRemovalObserver();\n        }\n      });\n\n      if (!node || !node.parentElement) {\n        return;\n      }\n\n      this.draggedSourceNodeRemovalObserver.observe(node.parentElement, {\n        childList: true\n      });\n    }\n  }, {\n    key: \"resurrectSourceNode\",\n    value: function resurrectSourceNode() {\n      if (this.document && this.draggedSourceNode) {\n        this.draggedSourceNode.style.display = 'none';\n        this.draggedSourceNode.removeAttribute('data-reactid');\n        this.document.body.appendChild(this.draggedSourceNode);\n      }\n    }\n  }, {\n    key: \"uninstallSourceNodeRemovalObserver\",\n    value: function uninstallSourceNodeRemovalObserver() {\n      if (this.draggedSourceNodeRemovalObserver) {\n        this.draggedSourceNodeRemovalObserver.disconnect();\n      }\n\n      this.draggedSourceNodeRemovalObserver = undefined;\n      this.draggedSourceNode = undefined;\n    }\n  }]);\n\n  return TouchBackendImpl;\n}();\n\n_defineProperty(TouchBackendImpl, \"isSetUp\", void 0);\n\nvar TouchBackend = function createBackend(manager) {\n  var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return new TouchBackendImpl(manager, context, options);\n};\n\nvar HTML5toTouch = {\n  backends: [{\n    backend: HTML5Backend,\n    transition: MouseTransition\n  }, {\n    backend: TouchBackend,\n    options: {\n      enableMouseEvents: true\n    },\n    preview: true,\n    transition: TouchTransition\n  }]\n};\nconst COLUMNS = 'abcdefgh'.split('');\nconst chessboardDefaultProps = {\n  animationDuration: 300,\n  areArrowsAllowed: true,\n  arePiecesDraggable: true,\n  arePremovesAllowed: false,\n  boardOrientation: 'white',\n  boardWidth: 560,\n  clearPremovesOnRightClick: true,\n  customArrows: [],\n  customArrowColor: 'rgb(255,170,0)',\n  customBoardStyle: {},\n  customDarkSquareStyle: {\n    backgroundColor: '#B58863'\n  },\n  customDndBackend: undefined,\n  customDndBackendOptions: undefined,\n  customDropSquareStyle: {\n    boxShadow: 'inset 0 0 1px 6px rgba(255,255,255,0.75)'\n  },\n  customLightSquareStyle: {\n    backgroundColor: '#F0D9B5'\n  },\n  customPieces: {},\n  customPremoveDarkSquareStyle: {\n    backgroundColor: '#A42323'\n  },\n  customPremoveLightSquareStyle: {\n    backgroundColor: '#BD2828'\n  },\n  customSquareStyles: {},\n  dropOffBoardAction: 'snapback',\n  id: 0,\n  isDraggablePiece: () => true,\n  getPositionObject: () => {},\n  onDragOverSquare: () => {},\n  onMouseOutSquare: () => {},\n  onMouseOverSquare: () => {},\n  onPieceClick: () => {},\n  onPieceDragBegin: () => {},\n  onPieceDragEnd: () => {},\n  onPieceDrop: () => true,\n  onSquareClick: () => {},\n  onSquareRightClick: () => {},\n  position: 'start',\n  showBoardNotation: true,\n  // showSparePieces: false,\n  snapToCursor: true\n};\nconst startPositionObject = {\n  a8: 'bR',\n  b8: 'bN',\n  c8: 'bB',\n  d8: 'bQ',\n  e8: 'bK',\n  f8: 'bB',\n  g8: 'bN',\n  h8: 'bR',\n  a7: 'bP',\n  b7: 'bP',\n  c7: 'bP',\n  d7: 'bP',\n  e7: 'bP',\n  f7: 'bP',\n  g7: 'bP',\n  h7: 'bP',\n  a2: 'wP',\n  b2: 'wP',\n  c2: 'wP',\n  d2: 'wP',\n  e2: 'wP',\n  f2: 'wP',\n  g2: 'wP',\n  h2: 'wP',\n  a1: 'wR',\n  b1: 'wN',\n  c1: 'wB',\n  d1: 'wQ',\n  e1: 'wK',\n  f1: 'wB',\n  g1: 'wN',\n  h1: 'wR'\n};\nconst whiteColumnValues = {\n  a: 0,\n  b: 1,\n  c: 2,\n  d: 3,\n  e: 4,\n  f: 5,\n  g: 6,\n  h: 7\n};\nconst blackColumnValues = {\n  a: 7,\n  b: 6,\n  c: 5,\n  d: 4,\n  e: 3,\n  f: 2,\n  g: 1,\n  h: 0\n};\nconst whiteRows = [7, 6, 5, 4, 3, 2, 1, 0];\nconst blackRows = [0, 1, 2, 3, 4, 5, 6, 7];\n\nconst getRelativeCoords = (boardOrientation, boardWidth, square) => {\n  const squareWidth = boardWidth / 8;\n  const columns = boardOrientation === 'white' ? whiteColumnValues : blackColumnValues;\n  const rows = boardOrientation === 'white' ? whiteRows : blackRows;\n  const x = columns[square[0]] * squareWidth + squareWidth / 2;\n  const y = rows[square[1] - 1] * squareWidth + squareWidth / 2;\n  return {\n    x,\n    y\n  };\n};\n\nconst isDifferentFromStart = newPosition => {\n  let isDifferent = false;\n  Object.keys(startPositionObject).forEach(square => {\n    if (newPosition[square] !== startPositionObject[square]) isDifferent = true;\n  });\n  Object.keys(newPosition).forEach(square => {\n    if (startPositionObject[square] !== newPosition[square]) isDifferent = true;\n  });\n  return isDifferent;\n};\n\nconst getPositionDifferences = (currentPosition, newPosition) => {\n  const difference = {\n    removed: {},\n    added: {}\n  }; // removed from current\n\n  Object.keys(currentPosition).forEach(square => {\n    if (newPosition[square] !== currentPosition[square]) difference.removed[square] = currentPosition[square];\n  }); // added from new\n\n  Object.keys(newPosition).forEach(square => {\n    if (currentPosition[square] !== newPosition[square]) difference.added[square] = newPosition[square];\n  });\n  return difference;\n};\n\nfunction isString(s) {\n  return typeof s === 'string';\n}\n\nfunction convertPositionToObject(position) {\n  if (position === 'start') return fenToObj('rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR');\n  if (validFen(position)) return fenToObj(position);\n  if (validPositionObject(position)) return position;\n  return {};\n}\n\nfunction fenToObj(fen) {\n  if (!validFen(fen)) return false; // cut off any move, castling, etc info from the end. we're only interested in position information\n\n  fen = fen.replace(/ .+$/, '');\n  const rows = fen.split('/');\n  const position = {};\n  let currentRow = 8;\n\n  for (let i = 0; i < 8; i++) {\n    const row = rows[i].split('');\n    let colIdx = 0; // loop through each character in the FEN section\n\n    for (let j = 0; j < row.length; j++) {\n      // number / empty squares\n      if (row[j].search(/[1-8]/) !== -1) {\n        const numEmptySquares = parseInt(row[j], 10);\n        colIdx = colIdx + numEmptySquares;\n      } else {\n        // piece\n        const square = COLUMNS[colIdx] + currentRow;\n        position[square] = fenToPieceCode(row[j]);\n        colIdx = colIdx + 1;\n      }\n    }\n\n    currentRow = currentRow - 1;\n  }\n\n  return position;\n}\n\nfunction expandFenEmptySquares(fen) {\n  return fen.replace(/8/g, '11111111').replace(/7/g, '1111111').replace(/6/g, '111111').replace(/5/g, '11111').replace(/4/g, '1111').replace(/3/g, '111').replace(/2/g, '11');\n}\n\nfunction validFen(fen) {\n  if (!isString(fen)) return false; // cut off any move, castling, etc info from the end. we're only interested in position information\n\n  fen = fen.replace(/ .+$/, ''); // expand the empty square numbers to just 1s\n\n  fen = expandFenEmptySquares(fen); // FEN should be 8 sections separated by slashes\n\n  const chunks = fen.split('/');\n  if (chunks.length !== 8) return false; // check each section\n\n  for (let i = 0; i < 8; i++) {\n    if (chunks[i].length !== 8 || chunks[i].search(/[^kqrnbpKQRNBP1]/) !== -1) {\n      return false;\n    }\n  }\n\n  return true;\n} // convert FEN piece code to bP, wK, etc\n\n\nfunction fenToPieceCode(piece) {\n  // black piece\n  if (piece.toLowerCase() === piece) {\n    return 'b' + piece.toUpperCase();\n  } // white piece\n\n\n  return 'w' + piece.toUpperCase();\n}\n\nfunction validSquare(square) {\n  return isString(square) && square.search(/^[a-h][1-8]$/) !== -1;\n}\n\nfunction validPieceCode(code) {\n  return isString(code) && code.search(/^[bw][KQRNBP]$/) !== -1;\n}\n\nfunction validPositionObject(pos) {\n  if (pos === null || typeof pos !== 'object') return false;\n\n  for (const i in pos) {\n    if (!pos[i]) continue;\n\n    if (!validSquare(i) || !validPieceCode(pos[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nconst defaultPieces = {\n  wP: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsx(\"path\", {\n      d: \"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z\",\n      style: {\n        opacity: '1',\n        fill: '#ffffff',\n        fillOpacity: '1',\n        fillRule: 'nonzero',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'miter',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      }\n    })\n  }),\n  wR: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: '#ffffff',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14\",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 34,14 L 31,17 L 14,17 L 11,14\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 31,17 L 31,29.5 L 14,29.5 L 14,17\",\n        style: {\n          strokeLinecap: 'butt',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11,14 L 34,14\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        }\n      })]\n    })\n  }),\n  wN: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: 'none',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z\",\n        style: {\n          fill: '#000000',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z\",\n        transform: \"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)\",\n        style: {\n          fill: '#000000',\n          stroke: '#000000'\n        }\n      })]\n    })\n  }),\n  wB: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: 'none',\n        fillRule: 'evenodd',\n        fillOpacity: '1',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsxs(\"g\", {\n        style: {\n          fill: '#ffffff',\n          stroke: '#000000',\n          strokeLinecap: 'butt'\n        },\n        children: [/*#__PURE__*/jsx(\"path\", {\n          d: \"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z\"\n        })]\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        }\n      })]\n    })\n  }),\n  wQ: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        fill: '#ffffff',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinejoin: 'round'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11.5,30 C 15,29 30,29 33.5,30\",\n        style: {\n          fill: 'none'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12,33.5 C 18,32.5 27,32.5 33,33.5\",\n        style: {\n          fill: 'none'\n        }\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"6\",\n        cy: \"12\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"14\",\n        cy: \"9\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"22.5\",\n        cy: \"8\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"31\",\n        cy: \"9\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"39\",\n        cy: \"12\",\n        r: \"2\"\n      })]\n    })\n  }),\n  wK: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        fill: 'none',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 22.5,11.63 L 22.5,6\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 20,8 L 25,8\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#000000',\n          strokeLinecap: 'butt',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,30 C 18,27 27,27 32.5,30\",\n        style: {\n          fill: 'none',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5\",\n        style: {\n          fill: 'none',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,37 C 18,34 27,34 32.5,37\",\n        style: {\n          fill: 'none',\n          stroke: '#000000'\n        }\n      })]\n    })\n  }),\n  bP: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsx(\"path\", {\n      d: \"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z\",\n      style: {\n        opacity: '1',\n        fill: '#000000',\n        fillOpacity: '1',\n        fillRule: 'nonzero',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'miter',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      }\n    })\n  }),\n  bR: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: '#000000',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z \",\n        style: {\n          strokeLinecap: 'butt',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12,35.5 L 33,35.5 L 33,35.5\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeWidth: '1',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 13,31.5 L 32,31.5\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeWidth: '1',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 14,29.5 L 31,29.5\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeWidth: '1',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 14,16.5 L 31,16.5\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeWidth: '1',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11,14 L 34,14\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeWidth: '1',\n          strokeLinejoin: 'miter'\n        }\n      })]\n    })\n  }),\n  bN: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: 'none',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18\",\n        style: {\n          fill: '#000000',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10\",\n        style: {\n          fill: '#000000',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#ffffff'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z\",\n        transform: \"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#ffffff'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z \",\n        style: {\n          fill: '#ffffff',\n          stroke: 'none'\n        }\n      })]\n    })\n  }),\n  bB: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: 'none',\n        fillRule: 'evenodd',\n        fillOpacity: '1',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsxs(\"g\", {\n        style: {\n          fill: '#000000',\n          stroke: '#000000',\n          strokeLinecap: 'butt'\n        },\n        children: [/*#__PURE__*/jsx(\"path\", {\n          d: \"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z\"\n        })]\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeLinejoin: 'miter'\n        }\n      })]\n    })\n  }),\n  bQ: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        fill: '#000000',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z\",\n        style: {\n          strokeLinecap: 'butt',\n          fill: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11.5,30 C 15,29 30,29 33.5,30\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"m 12,33.5 c 6,-1 15,-1 21,0\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"6\",\n        cy: \"12\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"14\",\n        cy: \"9\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"22.5\",\n        cy: \"8\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"31\",\n        cy: \"9\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"39\",\n        cy: \"12\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11,38.5 A 35,35 1 0 0 34,38.5\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsxs(\"g\", {\n        style: {\n          fill: 'none',\n          stroke: '#ffffff'\n        },\n        children: [/*#__PURE__*/jsx(\"path\", {\n          d: \"M 11,29 A 35,35 1 0 1 34,29\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 12.5,31.5 L 32.5,31.5\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5\"\n        })]\n      })]\n    })\n  }),\n  bK: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        fill: 'none',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 22.5,11.63 L 22.5,6\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        },\n        id: \"path6570\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25\",\n        style: {\n          fill: '#000000',\n          fillOpacity: '1',\n          strokeLinecap: 'butt',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37\",\n        style: {\n          fill: '#000000',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 20,8 L 25,8\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff'\n        }\n      })]\n    })\n  })\n};\nconst ChessboardContext = /*#__PURE__*/React.createContext();\n\nconst useChessboard = () => useContext(ChessboardContext);\n\nconst ChessboardProvider = /*#__PURE__*/forwardRef((_ref3, ref) => {\n  let {\n    animationDuration,\n    areArrowsAllowed,\n    arePiecesDraggable,\n    arePremovesAllowed,\n    boardOrientation,\n    boardWidth,\n    clearPremovesOnRightClick,\n    customArrows,\n    customArrowColor,\n    customBoardStyle,\n    customDarkSquareStyle,\n    customDropSquareStyle,\n    customLightSquareStyle,\n    customPieces,\n    customPremoveDarkSquareStyle,\n    customPremoveLightSquareStyle,\n    customSquareStyles,\n    dropOffBoardAction,\n    id,\n    isDraggablePiece,\n    getPositionObject,\n    onDragOverSquare,\n    onMouseOutSquare,\n    onMouseOverSquare,\n    onPieceClick,\n    onPieceDragBegin,\n    onPieceDragEnd,\n    onPieceDrop,\n    onSquareClick,\n    onSquareRightClick,\n    position,\n    showBoardNotation,\n    showSparePieces,\n    snapToCursor,\n    children\n  } = _ref3;\n  // position stored and displayed on board\n  const [currentPosition, setCurrentPosition] = useState(convertPositionToObject(position)); // calculated differences between current and incoming positions\n\n  const [positionDifferences, setPositionDifferences] = useState({}); // colour of last piece moved to determine if premoving\n\n  const [lastPieceColour, setLastPieceColour] = useState(undefined); // current premoves\n\n  const [premoves, setPremoves] = useState([]); // ref used to access current value during timeouts (closures)\n\n  const premovesRef = useRef(premoves); // current right mouse down square\n\n  const [currentRightClickDown, setCurrentRightClickDown] = useState(); // current arrows\n\n  const [arrows, setArrows] = useState([]); // chess pieces/styling\n\n  const [chessPieces, setChessPieces] = useState({ ...defaultPieces,\n    ...customPieces\n  }); // whether the last move was a manual drop or not\n\n  const [manualDrop, setManualDrop] = useState(false); // the most recent timeout whilst waiting for animation to complete\n\n  const [previousTimeout, setPreviousTimeout] = useState(undefined); // if currently waiting for an animation to finish\n\n  const [waitingForAnimation, setWaitingForAnimation] = useState(false); // open clearPremoves() to allow user to call on undo/reset/whenever\n\n  useImperativeHandle(ref, () => ({\n    clearPremoves() {\n      clearPremoves();\n    }\n\n  })); // handle custom pieces change\n\n  useEffect(() => {\n    setChessPieces({ ...defaultPieces,\n      ...customPieces\n    });\n  }, [customPieces]); // handle external position change\n\n  useEffect(() => {\n    var _Object$keys, _Object$entries, _Object$entries$;\n\n    const newPosition = convertPositionToObject(position);\n    const differences = getPositionDifferences(currentPosition, newPosition);\n    const newPieceColour = ((_Object$keys = Object.keys(differences.added)) === null || _Object$keys === void 0 ? void 0 : _Object$keys.length) <= 2 ? (_Object$entries = Object.entries(differences.added)) === null || _Object$entries === void 0 ? void 0 : (_Object$entries$ = _Object$entries[0]) === null || _Object$entries$ === void 0 ? void 0 : _Object$entries$[1][0] : undefined; // external move has come in before animation is over\n    // cancel animation and immediately update position\n\n    if (waitingForAnimation) {\n      setCurrentPosition(newPosition);\n      setWaitingForAnimation(false);\n      arePremovesAllowed && attemptPremove(newPieceColour);\n\n      if (previousTimeout) {\n        clearTimeout(previousTimeout);\n      }\n    } else {\n      // move was made using drag and drop\n      if (manualDrop) {\n        setCurrentPosition(newPosition);\n        setWaitingForAnimation(false);\n        arePremovesAllowed && attemptPremove(newPieceColour);\n      } else {\n        // move was made by external position change\n        // if position === start then don't override newPieceColour\n        // needs isDifferentFromStart in scenario where premoves have been cleared upon board reset but first move is made by computer, the last move colour would need to be updated\n        if (isDifferentFromStart(newPosition) && lastPieceColour !== undefined) {\n          setLastPieceColour(newPieceColour);\n        } else {\n          // position === start, likely a board reset\n          setLastPieceColour(undefined);\n        }\n\n        setPositionDifferences(differences); // animate external move\n\n        setWaitingForAnimation(true);\n        const newTimeout = setTimeout(() => {\n          setCurrentPosition(newPosition);\n          setWaitingForAnimation(false);\n          arePremovesAllowed && attemptPremove(newPieceColour);\n        }, animationDuration);\n        setPreviousTimeout(newTimeout);\n      }\n    } // reset manual drop, ready for next move to be made by user or external\n\n\n    setManualDrop(false); // inform latest position information\n\n    getPositionObject(newPosition); // clear arrows\n\n    clearArrows(); // clear timeout on unmount\n\n    return () => {\n      clearTimeout(previousTimeout);\n    };\n  }, [position]); // handle external arrows change\n\n  useEffect(() => {\n    setArrows(customArrows);\n  }, [customArrows]); // handle drop position change\n\n  function handleSetPosition(sourceSq, targetSq, piece) {\n    // if dropped back down, don't do anything\n    if (sourceSq === targetSq) {\n      return;\n    }\n\n    clearArrows(); // if second move is made for same colour, or there are still premoves queued, then this move needs to be added to premove queue instead of played\n    // premoves length check for colour is added in because white could make 3 premoves, and then black responds to the first move (changing the last piece colour) and then white pre-moves again\n\n    if (arePremovesAllowed && waitingForAnimation || arePremovesAllowed && (lastPieceColour === piece[0] || premovesRef.current.filter(p => p.piece[0] === piece[0]).length > 0)) {\n      const oldPremoves = [...premovesRef.current];\n      oldPremoves.push({\n        sourceSq,\n        targetSq,\n        piece\n      });\n      premovesRef.current = oldPremoves;\n      setPremoves([...oldPremoves]);\n      return;\n    } // if transitioning, don't allow new drop\n\n\n    if (!arePremovesAllowed && waitingForAnimation) return;\n    const newOnDropPosition = { ...currentPosition\n    };\n    setManualDrop(true);\n    setLastPieceColour(piece[0]); // if onPieceDrop function provided, execute it, position must be updated externally and captured by useEffect above for this move to show on board\n\n    if (onPieceDrop.length) {\n      const isValidMove = onPieceDrop(sourceSq, targetSq, piece);\n      if (!isValidMove) clearPremoves();\n    } else {\n      // delete if dropping off board\n      if (dropOffBoardAction === 'trash' && !targetSq) {\n        delete newOnDropPosition[sourceSq];\n      } // delete source piece if not dropping from spare piece\n\n\n      if (sourceSq !== 'spare') {\n        delete newOnDropPosition[sourceSq];\n      } // add piece in new position\n\n\n      newOnDropPosition[targetSq] = piece;\n      setCurrentPosition(newOnDropPosition);\n    } // inform latest position information\n\n\n    getPositionObject(newOnDropPosition);\n  }\n\n  function attemptPremove(newPieceColour) {\n    if (premovesRef.current.length === 0) return; // get current value of premove as this is called in a timeout so value may have changed since timeout was set\n\n    const premove = premovesRef.current[0]; // if premove is a differing colour to last move made, then this move can be made\n\n    if (premove.piece[0] !== undefined && premove.piece[0] !== newPieceColour && onPieceDrop.length) {\n      setLastPieceColour(premove.piece[0]);\n      setManualDrop(true); // pre-move doesn't need animation\n\n      const isValidMove = onPieceDrop(premove.sourceSq, premove.targetSq, premove.piece); // premove was successful and can be removed from queue\n\n      if (isValidMove) {\n        const oldPremoves = [...premovesRef.current];\n        oldPremoves.shift();\n        premovesRef.current = oldPremoves;\n        setPremoves([...oldPremoves]);\n      } else {\n        // premove wasn't successful, clear premove queue\n        clearPremoves();\n      }\n    }\n  }\n\n  function clearPremoves() {\n    let clearLastPieceColour = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    // don't clear when right clicking to clear, otherwise you won't be able to premove again before next go\n    if (clearLastPieceColour) setLastPieceColour(undefined);\n    premovesRef.current = [];\n    setPremoves([]);\n  }\n\n  function onRightClickDown(square) {\n    setCurrentRightClickDown(square);\n  }\n\n  function onRightClickUp(square) {\n    if (!areArrowsAllowed) return;\n\n    if (currentRightClickDown) {\n      // same square, don't draw an arrow, but do clear premoves and run onSquareRightClick\n      if (currentRightClickDown === square) {\n        setCurrentRightClickDown(null);\n        clearPremovesOnRightClick && clearPremoves(false);\n        onSquareRightClick(square);\n        return;\n      } // if arrow already exists then it needs to be removed\n\n\n      for (const i in arrows) {\n        if (arrows[i][0] === currentRightClickDown && arrows[i][1] === square) {\n          setArrows(oldArrows => {\n            const newArrows = [...oldArrows];\n            newArrows.splice(i, 1);\n            return newArrows;\n          });\n          return;\n        }\n      } // different square, draw an arrow\n\n\n      setArrows(oldArrows => [...oldArrows, [currentRightClickDown, square]]);\n    } else setCurrentRightClickDown(null);\n  }\n\n  function clearCurrentRightClickDown() {\n    setCurrentRightClickDown(null);\n  }\n\n  function clearArrows() {\n    setArrows([]);\n  }\n\n  return /*#__PURE__*/jsx(ChessboardContext.Provider, {\n    value: {\n      animationDuration,\n      arePiecesDraggable,\n      arePremovesAllowed,\n      boardOrientation,\n      boardWidth,\n      customArrowColor,\n      customBoardStyle,\n      customDarkSquareStyle,\n      customDropSquareStyle,\n      customLightSquareStyle,\n      customPremoveDarkSquareStyle,\n      customPremoveLightSquareStyle,\n      customSquareStyles,\n      dropOffBoardAction,\n      id,\n      isDraggablePiece,\n      getPositionObject,\n      onDragOverSquare,\n      onMouseOutSquare,\n      onMouseOverSquare,\n      onPieceClick,\n      onPieceDragBegin,\n      onPieceDragEnd,\n      onPieceDrop,\n      onSquareClick,\n      onSquareRightClick,\n      showBoardNotation,\n      showSparePieces,\n      snapToCursor,\n      arrows,\n      chessPieces,\n      clearArrows,\n      clearCurrentRightClickDown,\n      clearPremoves,\n      currentPosition,\n      handleSetPosition,\n      lastPieceColour,\n      manualDrop,\n      onRightClickDown,\n      onRightClickUp,\n      positionDifferences,\n      premoves,\n      setChessPieces,\n      setCurrentPosition,\n      setManualDrop,\n      waitingForAnimation\n    },\n    children: children\n  });\n});\n\nfunction Notation(_ref4) {\n  let {\n    row,\n    col\n  } = _ref4;\n  const {\n    boardOrientation,\n    boardWidth,\n    customDarkSquareStyle,\n    customLightSquareStyle\n  } = useChessboard();\n  const whiteColor = customLightSquareStyle.backgroundColor;\n  const blackColor = customDarkSquareStyle.backgroundColor;\n  const isRow = col === 0;\n  const isColumn = row === 7;\n  const isBottomLeftSquare = isRow && isColumn;\n\n  function getRow() {\n    return boardOrientation === 'white' ? 8 - row : row + 1;\n  }\n\n  function getColumn() {\n    return boardOrientation === 'black' ? COLUMNS[7 - col] : COLUMNS[col];\n  }\n\n  function renderBottomLeft() {\n    return /*#__PURE__*/jsxs(Fragment, {\n      children: [/*#__PURE__*/jsx(\"div\", {\n        style: { ...notationStyle,\n          ...{\n            color: whiteColor\n          },\n          ...numericStyle(boardWidth)\n        },\n        children: getRow()\n      }), /*#__PURE__*/jsx(\"div\", {\n        style: { ...notationStyle,\n          ...{\n            color: whiteColor\n          },\n          ...alphaStyle(boardWidth)\n        },\n        children: getColumn()\n      })]\n    });\n  }\n\n  function renderLetters() {\n    return /*#__PURE__*/jsx(\"div\", {\n      style: { ...notationStyle,\n        ...{\n          color: col % 2 !== 0 ? blackColor : whiteColor\n        },\n        ...alphaStyle(boardWidth)\n      },\n      children: getColumn()\n    });\n  }\n\n  function renderNumbers() {\n    return /*#__PURE__*/jsx(\"div\", {\n      style: { ...notationStyle,\n        ...(boardOrientation === 'black' ? {\n          color: row % 2 === 0 ? blackColor : whiteColor\n        } : {\n          color: row % 2 === 0 ? blackColor : whiteColor\n        }),\n        ...numericStyle(boardWidth)\n      },\n      children: getRow()\n    });\n  }\n\n  if (isBottomLeftSquare) {\n    return renderBottomLeft();\n  }\n\n  if (isColumn) {\n    return renderLetters();\n  }\n\n  if (isRow) {\n    return renderNumbers();\n  }\n\n  return null;\n}\n\nconst alphaStyle = width => ({\n  alignSelf: 'flex-end',\n  paddingLeft: width / 8 - width / 48,\n  fontSize: width / 48\n});\n\nconst numericStyle = width => ({\n  alignSelf: 'flex-start',\n  paddingRight: width / 8 - width / 48,\n  fontSize: width / 48\n});\n\nconst notationStyle = {\n  zIndex: 3,\n  position: 'absolute'\n};\n\nfunction Piece(_ref5) {\n  let {\n    piece,\n    square,\n    squares,\n    isPremovedPiece = false\n  } = _ref5;\n  const {\n    animationDuration,\n    arePiecesDraggable,\n    arePremovesAllowed,\n    boardWidth,\n    id,\n    isDraggablePiece,\n    onPieceClick,\n    onPieceDragBegin,\n    onPieceDragEnd,\n    premoves,\n    chessPieces,\n    dropTarget,\n    positionDifferences,\n    waitingForAnimation,\n    currentPosition\n  } = useChessboard();\n  const [pieceStyle, setPieceStyle] = useState({\n    opacity: 1,\n    zIndex: 5,\n    touchAction: 'none',\n    cursor: arePiecesDraggable && isDraggablePiece({\n      piece,\n      sourceSquare: square\n    }) ? '-webkit-grab' : 'default'\n  });\n  const [{\n    canDrag,\n    isDragging\n  }, drag, dragPreview] = useDrag(() => ({\n    type: 'piece',\n    item: () => {\n      onPieceDragBegin(piece, square);\n      return {\n        piece,\n        square,\n        id\n      };\n    },\n    end: () => onPieceDragEnd(piece, square),\n    collect: monitor => ({\n      canDrag: isDraggablePiece({\n        piece,\n        sourceSquare: square\n      }),\n      isDragging: !!monitor.isDragging()\n    })\n  }), [piece, square, currentPosition, id]); // hide the default preview\n\n  useEffect(() => {\n    dragPreview(getEmptyImage(), {\n      captureDraggingState: true\n    });\n  }, []); // hide piece on drag\n\n  useEffect(() => {\n    setPieceStyle(oldPieceStyle => ({ ...oldPieceStyle,\n      opacity: isDragging ? 0 : 1\n    }));\n  }, [isDragging]); // hide piece on matching premoves\n\n  useEffect(() => {\n    // if premoves aren't allowed, don't waste time on calculations\n    if (!arePremovesAllowed) return;\n    let hidePiece = false; // side effect: if piece moves into pre-moved square, its hidden\n    // if there are any premove targets on this square, hide the piece underneath\n\n    if (!isPremovedPiece && premoves.find(p => p.targetSq === square)) hidePiece = true; // if sourceSq === sq and piece matches then this piece has been pre-moved elsewhere?\n\n    if (premoves.find(p => p.sourceSq === square && p.piece === piece)) hidePiece = true; // TODO: If a premoved piece returns to a premoved square, it will hide (e1, e2, e1)\n\n    setPieceStyle(oldPieceStyle => ({ ...oldPieceStyle,\n      display: hidePiece ? 'none' : 'unset'\n    }));\n  }, [currentPosition, premoves]); // new move has come in\n  // if waiting for animation, then animation has started and we can perform animation\n  // we need to head towards where we need to go, we are the source, we are heading towards the target\n\n  useEffect(() => {\n    var _positionDifferences$;\n\n    const removedPiece = (_positionDifferences$ = positionDifferences.removed) === null || _positionDifferences$ === void 0 ? void 0 : _positionDifferences$[square]; // return as null and not loaded yet\n\n    if (!positionDifferences.added) return; // check if piece matches or if removed piece was a pawn and new square is on 1st or 8th rank (promotion)\n\n    const newSquare = Object.entries(positionDifferences.added).find(_ref6 => {\n      let [s, p] = _ref6;\n      return p === removedPiece || (removedPiece === null || removedPiece === void 0 ? void 0 : removedPiece[1]) === 'P' && (s[1] === '1' || s[1] === '8');\n    }); // we can perform animation if our square was in removed, AND the matching piece is in added AND this isn't a premoved piece\n\n    if (waitingForAnimation && removedPiece && newSquare && !isPremovedPiece) {\n      const {\n        sourceSq,\n        targetSq\n      } = getSquareCoordinates(square, newSquare[0]);\n\n      if (sourceSq && targetSq) {\n        setPieceStyle(oldPieceStyle => ({ ...oldPieceStyle,\n          transform: `translate(${targetSq.x - sourceSq.x}px, ${targetSq.y - sourceSq.y}px)`,\n          transition: `transform ${animationDuration}ms`,\n          zIndex: 6\n        }));\n      }\n    }\n  }, [positionDifferences]); // translate to their own positions (repaint on undo)\n\n  useEffect(() => {\n    const {\n      sourceSq\n    } = getSingleSquareCoordinates(square);\n\n    if (sourceSq) {\n      setPieceStyle(oldPieceStyle => ({ ...oldPieceStyle,\n        transform: `translate(${0}px, ${0}px)`,\n        transition: `transform ${0}ms`\n      }));\n    }\n  }, [currentPosition]); // update is piece draggable\n\n  useEffect(() => {\n    setPieceStyle(oldPieceStyle => ({ ...oldPieceStyle,\n      cursor: arePiecesDraggable && isDraggablePiece({\n        piece,\n        sourceSquare: square\n      }) ? '-webkit-grab' : 'default'\n    }));\n  }, [square, currentPosition, arePiecesDraggable]);\n\n  function getSingleSquareCoordinates(square) {\n    return {\n      sourceSq: squares[square]\n    };\n  }\n\n  function getSquareCoordinates(sourceSquare, targetSquare) {\n    return {\n      sourceSq: squares[sourceSquare],\n      targetSq: squares[targetSquare]\n    };\n  }\n\n  return /*#__PURE__*/jsx(\"div\", {\n    ref: arePiecesDraggable ? canDrag ? drag : null : null,\n    onClick: () => onPieceClick(piece),\n    style: pieceStyle,\n    children: typeof chessPieces[piece] === 'function' ? chessPieces[piece]({\n      squareWidth: boardWidth / 8,\n      isDragging,\n      droppedPiece: dropTarget === null || dropTarget === void 0 ? void 0 : dropTarget.piece,\n      targetSquare: dropTarget === null || dropTarget === void 0 ? void 0 : dropTarget.target,\n      sourceSquare: dropTarget === null || dropTarget === void 0 ? void 0 : dropTarget.source\n    }) : /*#__PURE__*/jsx(\"svg\", {\n      viewBox: '1 1 43 43',\n      width: boardWidth / 8,\n      height: boardWidth / 8,\n      children: /*#__PURE__*/jsx(\"g\", {\n        children: chessPieces[piece]\n      })\n    })\n  });\n}\n\nfunction Square(_ref7) {\n  let {\n    square,\n    squareColor,\n    setSquares,\n    squareHasPremove,\n    children\n  } = _ref7;\n  const squareRef = useRef();\n  const {\n    boardWidth,\n    boardOrientation,\n    clearArrows,\n    currentPosition,\n    customBoardStyle,\n    customDarkSquareStyle,\n    customDropSquareStyle,\n    customLightSquareStyle,\n    customPremoveDarkSquareStyle,\n    customPremoveLightSquareStyle,\n    customSquareStyles,\n    handleSetPosition,\n    lastPieceColour,\n    onDragOverSquare,\n    onMouseOutSquare,\n    onMouseOverSquare,\n    onPieceDrop,\n    onRightClickDown,\n    onRightClickUp,\n    onSquareClick,\n    waitingForAnimation\n  } = useChessboard();\n  const [{\n    isOver\n  }, drop] = useDrop(() => ({\n    accept: 'piece',\n    drop: item => handleSetPosition(item.square, square, item.piece),\n    collect: monitor => ({\n      isOver: !!monitor.isOver()\n    })\n  }), [square, currentPosition, onPieceDrop, waitingForAnimation, lastPieceColour]);\n  useEffect(() => {\n    const {\n      x,\n      y\n    } = squareRef.current.getBoundingClientRect();\n    setSquares(oldSquares => ({ ...oldSquares,\n      [square]: {\n        x,\n        y\n      }\n    }));\n  }, [boardWidth, boardOrientation]);\n  const defaultSquareStyle = { ...borderRadius(customBoardStyle, square, boardOrientation),\n    ...(squareColor === 'black' ? customDarkSquareStyle : customLightSquareStyle),\n    ...(squareHasPremove && (squareColor === 'black' ? customPremoveDarkSquareStyle : customPremoveLightSquareStyle)),\n    ...(isOver && customDropSquareStyle)\n  };\n  return /*#__PURE__*/jsx(\"div\", {\n    ref: drop,\n    style: defaultSquareStyle,\n    \"data-square-color\": squareColor,\n    \"data-square\": square,\n    onMouseOver: () => onMouseOverSquare(square),\n    onMouseOut: () => onMouseOutSquare(square),\n    onMouseDown: e => {\n      if (e.button === 2) onRightClickDown(square);\n    },\n    onMouseUp: e => {\n      if (e.button === 2) onRightClickUp(square);\n    },\n    onDragEnter: () => onDragOverSquare(square),\n    onClick: () => {\n      onSquareClick(square);\n      clearArrows();\n    },\n    onContextMenu: e => {\n      e.preventDefault();\n    },\n    children: /*#__PURE__*/jsx(\"div\", {\n      ref: squareRef,\n      style: { ...size(boardWidth),\n        ...center,\n        ...(!squareHasPremove && (customSquareStyles === null || customSquareStyles === void 0 ? void 0 : customSquareStyles[square]))\n      },\n      children: children\n    })\n  });\n}\n\nconst center = {\n  display: 'flex',\n  justifyContent: 'center'\n};\n\nconst size = width => ({\n  width: width / 8,\n  height: width / 8\n});\n\nconst borderRadius = (customBoardStyle, square, boardOrientation) => {\n  if (!customBoardStyle.borderRadius) return {};\n\n  if (square === 'a1') {\n    return boardOrientation === 'white' ? {\n      borderBottomLeftRadius: customBoardStyle.borderRadius\n    } : {\n      borderTopRightRadius: customBoardStyle.borderRadius\n    };\n  }\n\n  if (square === 'a8') {\n    return boardOrientation === 'white' ? {\n      borderTopLeftRadius: customBoardStyle.borderRadius\n    } : {\n      borderBottomRightRadius: customBoardStyle.borderRadius\n    };\n  }\n\n  if (square === 'h1') {\n    return boardOrientation === 'white' ? {\n      borderBottomRightRadius: customBoardStyle.borderRadius\n    } : {\n      borderTopLeftRadius: customBoardStyle.borderRadius\n    };\n  }\n\n  if (square === 'h8') {\n    return boardOrientation === 'white' ? {\n      borderTopRightRadius: customBoardStyle.borderRadius\n    } : {\n      borderBottomLeftRadius: customBoardStyle.borderRadius\n    };\n  }\n\n  return {};\n};\n\nfunction Squares(_ref8) {\n  let {\n    children\n  } = _ref8;\n  const {\n    boardOrientation,\n    boardWidth,\n    customBoardStyle,\n    id\n  } = useChessboard();\n  return /*#__PURE__*/jsx(\"div\", {\n    \"data-boardid\": id,\n    style: { ...boardStyles(boardWidth),\n      ...customBoardStyle\n    },\n    children: [...Array(8)].map((_, r) => {\n      return /*#__PURE__*/jsx(\"div\", {\n        style: rowStyles(boardWidth),\n        children: [...Array(8)].map((_, c) => {\n          // a1, a2 ...\n          const square = boardOrientation === 'black' ? COLUMNS[7 - c] + (r + 1) : COLUMNS[c] + (8 - r);\n          const squareColor = c % 2 === r % 2 ? 'white' : 'black';\n          return children({\n            square,\n            squareColor,\n            col: c,\n            row: r\n          });\n        })\n      }, r.toString());\n    })\n  });\n}\n\nconst boardStyles = width => ({\n  cursor: 'default',\n  height: width,\n  width\n});\n\nconst rowStyles = width => ({\n  display: 'flex',\n  flexWrap: 'nowrap',\n  width\n});\n\nconst errorImage = {\n  whiteKing: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    style: {\n      shapeRendering: 'geometricPrecision',\n      textRendering: 'geometricPrecision',\n      imageRendering: 'optimizeQuality'\n    },\n    viewBox: \"0 0 4210 12970\",\n    x: \"0px\",\n    y: \"0px\",\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    width: \"250\",\n    height: \"250\",\n    children: /*#__PURE__*/jsx(\"g\", {\n      children: /*#__PURE__*/jsx(\"path\", {\n        style: {\n          fill: 'black',\n          fillRule: 'nonzero'\n        },\n        d: \"M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z\"\n      })\n    })\n  })\n};\n\nfunction ErrorBoundary(_ref9) {\n  let {\n    children\n  } = _ref9;\n\n  try {\n    return children;\n  } catch (error) {\n    return /*#__PURE__*/jsx(WhiteKing, {\n      showError: true\n    });\n  }\n}\n\nfunction WhiteKing(_ref10) {\n  let {\n    showError = false\n  } = _ref10;\n  return /*#__PURE__*/jsxs(\"div\", {\n    style: container,\n    children: [/*#__PURE__*/jsx(\"div\", {\n      style: whiteKingStyle,\n      children: errorImage.whiteKing\n    }), showError && /*#__PURE__*/jsx(\"h1\", {\n      children: \"Something went wrong\"\n    })]\n  });\n}\n\nconst container = {\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  flexDirection: 'column'\n};\nconst whiteKingStyle = {\n  width: 250,\n  height: 250,\n  transform: 'rotate(90deg)'\n};\n\nfunction Board() {\n  const boardRef = useRef();\n  const [squares, setSquares] = useState({});\n  const {\n    arrows,\n    boardOrientation,\n    boardWidth,\n    clearCurrentRightClickDown,\n    customArrowColor,\n    showBoardNotation,\n    currentPosition,\n    premoves\n  } = useChessboard();\n  useEffect(() => {\n    function handleClickOutside(event) {\n      if (boardRef.current && !boardRef.current.contains(event.target)) {\n        clearCurrentRightClickDown();\n      }\n    }\n\n    document.addEventListener('mouseup', handleClickOutside);\n    return () => {\n      document.removeEventListener('mouseup', handleClickOutside);\n    };\n  }, []);\n  return boardWidth ? /*#__PURE__*/jsxs(\"div\", {\n    ref: boardRef,\n    style: {\n      position: 'relative'\n    },\n    children: [/*#__PURE__*/jsx(Squares, {\n      children: _ref11 => {\n        let {\n          square,\n          squareColor,\n          col,\n          row\n        } = _ref11;\n        const squareHasPremove = premoves.find(p => p.sourceSq === square || p.targetSq === square);\n        const squareHasPremoveTarget = premoves.find(p => p.targetSq === square);\n        return /*#__PURE__*/jsxs(Square, {\n          square: square,\n          squareColor: squareColor,\n          setSquares: setSquares,\n          squareHasPremove: squareHasPremove,\n          children: [currentPosition[square] && /*#__PURE__*/jsx(Piece, {\n            piece: currentPosition[square],\n            square: square,\n            squares: squares\n          }), squareHasPremoveTarget && /*#__PURE__*/jsx(Piece, {\n            isPremovedPiece: true,\n            piece: squareHasPremoveTarget.piece,\n            square: square,\n            squares: squares\n          }), showBoardNotation && /*#__PURE__*/jsx(Notation, {\n            row: row,\n            col: col\n          })]\n        }, `${col}${row}`);\n      }\n    }), /*#__PURE__*/jsx(\"svg\", {\n      width: boardWidth,\n      height: boardWidth,\n      style: {\n        position: 'absolute',\n        top: '0',\n        left: '0',\n        pointerEvents: 'none',\n        zIndex: '10'\n      },\n      children: arrows.map(arrow => {\n        const from = getRelativeCoords(boardOrientation, boardWidth, arrow[0]);\n        const to = getRelativeCoords(boardOrientation, boardWidth, arrow[1]);\n        return /*#__PURE__*/jsxs(Fragment$1, {\n          children: [/*#__PURE__*/jsx(\"defs\", {\n            children: /*#__PURE__*/jsx(\"marker\", {\n              id: \"arrowhead\",\n              markerWidth: \"2\",\n              markerHeight: \"2.5\",\n              refX: \"1.25\",\n              refY: \"1.25\",\n              orient: \"auto\",\n              children: /*#__PURE__*/jsx(\"polygon\", {\n                points: \"0 0, 2 1.25, 0 2.5\",\n                style: {\n                  fill: customArrowColor\n                }\n              })\n            })\n          }), /*#__PURE__*/jsx(\"line\", {\n            x1: from.x,\n            y1: from.y,\n            x2: to.x,\n            y2: to.y,\n            style: {\n              stroke: customArrowColor,\n              strokeWidth: boardWidth / 36\n            },\n            markerEnd: \"url(#arrowhead)\"\n          })]\n        }, `${arrow[0]}-${arrow[1]}`);\n      })\n    })]\n  }) : /*#__PURE__*/jsx(WhiteKing, {});\n}\n\nfunction CDragLayer(props) {\n  const {\n    boardWidth,\n    chessPieces,\n    id,\n    snapToCursor\n  } = useChessboard();\n  const {\n    isDragging,\n    item,\n    clientOffset,\n    sourceClientOffset\n  } = props;\n  const layerStyles = {\n    position: 'fixed',\n    pointerEvents: 'none',\n    zIndex: 10,\n    left: 0,\n    top: 0\n  };\n  const getItemStyle = useCallback((clientOffset, sourceClientOffset) => {\n    if (!clientOffset || !sourceClientOffset) return {\n      display: 'none'\n    };\n    let {\n      x,\n      y\n    } = snapToCursor ? clientOffset : sourceClientOffset;\n\n    if (snapToCursor) {\n      const halfSquareWidth = boardWidth / 8 / 2;\n      x -= halfSquareWidth;\n      y -= halfSquareWidth;\n    }\n\n    const transform = `translate(${x}px, ${y}px)`;\n    return {\n      transform,\n      WebkitTransform: transform,\n      touchAction: 'none'\n    };\n  }, [boardWidth, snapToCursor]);\n  return isDragging && item.id === id ? /*#__PURE__*/jsx(\"div\", {\n    style: layerStyles,\n    children: /*#__PURE__*/jsx(\"div\", {\n      style: getItemStyle(clientOffset, sourceClientOffset),\n      children: typeof chessPieces[item.piece] === 'function' ? chessPieces[item.piece]({\n        squareWidth: boardWidth / 8,\n        isDragging: true\n      }) : /*#__PURE__*/jsx(\"svg\", {\n        viewBox: '1 1 43 43',\n        width: boardWidth / 8,\n        height: boardWidth / 8,\n        children: /*#__PURE__*/jsx(\"g\", {\n          children: chessPieces[item.piece]\n        })\n      })\n    })\n  }) : null;\n}\n\nfunction collect(monitor) {\n  return {\n    item: monitor.getItem(),\n    clientOffset: monitor.getClientOffset(),\n    sourceClientOffset: monitor.getSourceClientOffset(),\n    isDragging: monitor.isDragging()\n  };\n}\n\nconst CustomDragLayer = DragLayer(collect)(CDragLayer);\nconst Chessboard = /*#__PURE__*/forwardRef((props, ref) => {\n  const {\n    customDndBackend,\n    customDndBackendOptions,\n    ...otherProps\n  } = props;\n  return /*#__PURE__*/jsx(ErrorBoundary, {\n    children: /*#__PURE__*/jsx(DndProvider, {\n      backend: customDndBackend || MultiBackend,\n      options: customDndBackend ? customDndBackendOptions : HTML5toTouch,\n      children: /*#__PURE__*/jsxs(ChessboardProvider, {\n        ref: ref,\n        ...otherProps,\n        children: [/*#__PURE__*/jsx(CustomDragLayer, {}), /*#__PURE__*/jsx(\"div\", {\n          children: /*#__PURE__*/jsx(Board, {})\n        })]\n      })\n    })\n  });\n});\nChessboard.defaultProps = chessboardDefaultProps;\nexport { Chessboard };","map":{"version":3,"names":["React","createContext","memo","useEffect","isValidElement","cloneElement","createRef","Component","useLayoutEffect","useMemo","useContext","useState","useCallback","forwardRef","useRef","useImperativeHandle","Fragment","Fragment$1","jsx","jsxs","DndContext","dragDropManager","undefined","HandlerRole","invariant","condition","format","_len","arguments","length","args","Array","_key","process","env","NODE_ENV","Error","error","argIndex","replace","name","framesToPop","INIT_COORDS","BEGIN_DRAG","PUBLISH_DRAG_SOURCE","HOVER","DROP","END_DRAG","setClientOffset","clientOffset","sourceClientOffset","type","payload","_typeof$5","obj","Symbol","iterator","_typeof","constructor","prototype","get","path","defaultValue","split","reduce","a","c","without$1","items","item","filter","i","isObject","input","xor","itemsA","itemsB","map","Map","insertItem","set","has","forEach","result","count","key","push","intersection","t","indexOf","ResetCoordinatesAction","createBeginDrag","manager","beginDrag","sourceIds","options","publishSource","_options$publishSourc","getSourceClientOffset","monitor","getMonitor","registry","getRegistry","dispatch","verifyInvariants$1","sourceId","getDraggableSource","verifyGetSourceClientOffsetIsFunction","source","getSource","verifyItemIsObject","pinSource","itemType","getSourceType","isSourcePublic","isDragging","canDragSource","createPublishDragSource","publishDragSource","matchesType","targetType","draggedItemType","isArray","some","createHover","hover","targetIdsArg","_ref","verifyTargetIdsIsArray","targetIds","slice","checkInvariants","getItemType","removeNonMatchingTargetIds","hoverAllTargets","didDrop","targetId","lastIndexOf","target","getTarget","getTargetType","splice","ownKeys$4","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread$4","_defineProperty$l","getOwnPropertyDescriptors","defineProperties","defineProperty","value","configurable","writable","createDrop","drop","verifyInvariants","getDroppableTargets","index","dropResult","determineDropResult","action","verifyDropResultType","getDropResult","getTargetIds","canDropOnTarget","reverse","createEndDrag","endDrag","verifyIsDragging","getSourceId","unpinSource","createDragDropActions","_classCallCheck$i","instance","Constructor","TypeError","_defineProperties$g","props","descriptor","_createClass$g","protoProps","staticProps","_defineProperty$k","DragDropManagerImpl","store","_this","shouldSetUp","getState","refCount","backend","isSetUp","setup","teardown","subscribe","handleRefCountChange","receiveBackend","getBackend","getActions","bindActionCreator","actionCreator","actions","boundActions","formatProdErrorMessage","code","$$observable","observable","randomString","Math","random","toString","substring","join","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","isPlainObject$1","proto","getPrototypeOf","miniKindOf","val","isDate","isError","constructorName","ctorName","toLowerCase","message","stackTraceLimit","Date","toDateString","getDate","setDate","kindOf","typeOfVal","createStore","reducer","preloadedState","enhancer","_ref2","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","listener","isSubscribed","unsubscribe","listeners","replaceReducer","nextReducer","outerSubscribe","observer","observeState","next","warning","console","e","isCrushed","strictEquality","b","areCoordsEqual","offsetA","offsetB","x","y","areArraysEqual","isEqual","ownKeys$3","_objectSpread$3","_defineProperty$j","initialState$1","initialSourceClientOffset","initialClientOffset","reduce$5","state","ADD_SOURCE","ADD_TARGET","REMOVE_SOURCE","REMOVE_TARGET","addSource","addTarget","removeSource","removeTarget","ownKeys$2","_objectSpread$2","_defineProperty$i","initialState","reduce$4","reduce$3","NONE","ALL","__IS_NONE__","__IS_ALL__","areDirty","dirtyIds","handlerIds","commonIds","reduce$2","_action$payload","_action$payload$targe","_action$payload$prevT","prevTargetIds","didChange","prevInnermostTargetId","innermostTargetId","reduce$1","ownKeys$1","_objectSpread$1","_defineProperty$h","dirtyHandlerIds","dragOffset","dragOperation","stateId","add","subtract","getDifferenceFromInitialOffset","_classCallCheck$h","_defineProperties$f","_createClass$f","_defineProperty$g","DragDropMonitorImpl","subscribeToStateChange","prevStateId","handleChange","currentStateId","canSkipListener","subscribeToOffsetChange","_this2","previousState","nextState","concat","canDrag","canDrop","Boolean","isDraggingSource","sourceType","isOverTarget","shallow","getItem","getInitialClientOffset","getInitialSourceClientOffset","getClientOffset","getSourceClientOffset$1","getDifferenceFromInitialOffset$1","nextUniqueId","getNextUniqueId","_typeof$4","validateSourceContract","validateTargetContract","validateType","allowArray","rawAsap","task","queue","requestFlush","capacity","flush","currentIndex","call","scan","newLength","scope","global","self","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","makeRequestCallFromMutationObserver","makeRequestCallFromTimer","callback","toggle","node","document","createTextNode","observe","characterData","requestCall","data","timeoutHandle","setTimeout","handleTimer","intervalHandle","setInterval","clearTimeout","clearInterval","freeTasks","pendingErrors","requestErrorThrow","throwFirstError","shift","asap","rawTask","pop","RawTask","onerror","_classCallCheck$g","_defineProperties$e","_createClass$e","_defineProperty$f","_slicedToArray$5","arr","_arrayWithHoles$5","_iterableToArrayLimit$5","_unsupportedIterableToArray$8","_nonIterableRest$5","o","minLen","_arrayLikeToArray$8","n","from","test","len","arr2","_i","_arr","_n","_d","_s","_e","done","err","getNextHandlerId","role","id","SOURCE","TARGET","parseRoleFromHandlerId","handlerId","mapContainsValue","searchValue","entries","isDone","_entries$next","_entries$next$value","HandlerRegistryImpl","addSource$1","addHandler","addTarget$1","containsHandler","handler","dragSources","dropTargets","includePinned","isSourceId","isPinned","pinnedSourceId","pinnedSource","isTargetId","types","removeSource$1","delete","removeTarget$1","createDragDropManager","backendFactory","globalContext","backendOptions","debugMode","makeStoreInstance","reduxDevTools","window","__REDUX_DEVTOOLS_EXTENSION__","instanceId","_excluded","_slicedToArray$4","_arrayWithHoles$4","_iterableToArrayLimit$4","_unsupportedIterableToArray$7","_nonIterableRest$4","_arrayLikeToArray$7","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","sourceKeys","INSTANCE_SYM","for","DndProvider","children","_getDndContextValue","getDndContextValue","_getDndContextValue2","isGlobalInstance","context","getGlobalContext","Provider","assign","_manager","createSingletonDndContext","ctx","_classCallCheck$f","_defineProperties$d","_createClass$d","_defineProperty$e","isCallingCanDrag","isCallingIsDragging","DragSourceMonitorImpl","internalMonitor","receiveHandlerId","getHandlerId","_classCallCheck$e","_defineProperties$c","_createClass$c","_defineProperty$d","isCallingCanDrop","DropTargetMonitorImpl","isOver","throwIfCompositeComponentElement","element","displayName","wrapHookToRecognizeElement","hook","elementOrNode","ref","cloneWithRef","wrapConnectorHooks","hooks","wrappedHooks","endsWith","wrappedHook","setRef","current","newRef","previousRef","_typeof$3","isRef","hasOwnProperty","shallowEqual","objA","objB","compare","compareContext","compareResult","keysA","keysB","bHasOwnProperty","bind","idx","valueA","valueB","_classCallCheck$d","_defineProperties$b","_createClass$b","_defineProperty$c","SourceConnector","dragSource","clearDragSource","dragSourceOptions","dragSourceRef","dragSourceNode","reconnectDragSource","dragPreview","clearDragPreview","dragPreviewOptions","dragPreviewRef","dragPreviewNode","reconnectDragPreview","newHandlerId","reconnect","dragSourceOptionsInternal","dragPreviewOptionsInternal","didHandlerIdChange","didConnectedDragSourceChange","didDragSourceOptionsChange","disconnectDragSource","lastConnectedDragSource","lastConnectedHandlerId","lastConnectedDragSourceOptions","dragSourceUnsubscribe","connectDragSource","didConnectedDragPreviewChange","didDragPreviewOptionsChange","disconnectDragPreview","lastConnectedDragPreview","lastConnectedDragPreviewOptions","dragPreviewUnsubscribe","connectDragPreview","_classCallCheck$c","_defineProperties$a","_createClass$a","_defineProperty$b","TargetConnector","dropTarget","clearDropTarget","dropTargetOptions","dropTargetRef","dropTargetNode","didDropTargetChange","didOptionsChange","disconnectDropTarget","lastConnectedDropTarget","lastConnectedDropTargetOptions","unsubscribeDropTarget","connectDropTarget","dropTargetOptionsInternal","registerTarget","registerSource","_typeof$2","isClassComponent","render","isRefForwardingComponent","C","_item$$$typeof","$$typeof","isRefable","checkDecoratorArguments","functionName","signature","arg","isObjectLike","isPlainObject","reactIs$1","exports","reactIs_production_min","d","f","g","h","k","l","m","p","q","r","v","w","z","u","A","AsyncMode","ConcurrentMode","ContextConsumer","ContextProvider","Element","ForwardRef","Lazy","Memo","Portal","Profiler","StrictMode","Suspense","isAsyncMode","isConcurrentMode","isContextConsumer","isContextProvider","isElement","isForwardRef","isFragment","isLazy","isMemo","isPortal","isProfiler","isStrictMode","isSuspense","isValidElementType","typeOf","reactIs_development","hasSymbol","REACT_ELEMENT_TYPE","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_PROVIDER_TYPE","REACT_CONTEXT_TYPE","REACT_ASYNC_MODE_TYPE","REACT_CONCURRENT_MODE_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","REACT_BLOCK_TYPE","REACT_FUNDAMENTAL_TYPE","REACT_RESPONDER_TYPE","REACT_SCOPE_TYPE","$$typeofType","hasWarnedAboutDeprecatedIsAsyncMode","reactIs","REACT_STATICS","childContextTypes","contextType","contextTypes","defaultProps","getDefaultProps","getDerivedStateFromError","getDerivedStateFromProps","mixins","propTypes","KNOWN_STATICS","caller","callee","arity","FORWARD_REF_STATICS","MEMO_STATICS","TYPE_STATICS","getStatics","component","getOwnPropertyNames","getOwnPropertySymbols$1","objectPrototype","hoistNonReactStatics","targetComponent","sourceComponent","blacklist","inheritedComponent","targetStatics","sourceStatics","hoistNonReactStatics_cjs","hoistStatics","_typeof$1","_classCallCheck$b","_defineProperties$9","_createClass$9","_inherits","subClass","superClass","create","_setPrototypeOf","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","NewTarget","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","valueOf","_defineProperty$a","DragLayer","collect","decorateLayer","DecoratedComponent","Decorated","_options$arePropsEqua","arePropsEqual","DragLayerContainer","_Component","_super","isCurrentlyMounted","getCurrentState","setState","getDecoratedComponentInstance","shouldComponentUpdate","nextProps","componentDidMount","componentWillUnmount","unsubscribeFromOffsetChange","unsubscribeFromStateChange","Consumer","receiveDragDropManager","useIsomorphicLayoutEffect","_classCallCheck$a","_defineProperties$8","_createClass$8","_defineProperty$9","DragSourceImpl","spec","connector","_result","globalMonitor","end","useDragSource","useDragDropManager","_useContext","useDragType","_slicedToArray$3","_arrayWithHoles$3","_iterableToArrayLimit$3","_unsupportedIterableToArray$6","_nonIterableRest$3","_arrayLikeToArray$6","useRegisteredDragSource","registerDragSource","_registerSource","_registerSource2","unregister","_toConsumableArray$1","_arrayWithoutHoles$1","_iterableToArray$1","_unsupportedIterableToArray$5","_nonIterableSpread$1","_arrayLikeToArray$5","iter","useOptionalFactory","deps","memoDeps","useDragSourceMonitor","useDragSourceConnector","fastDeepEqual","equal","RegExp","flags","_slicedToArray$2","_arrayWithHoles$2","_iterableToArrayLimit$2","_unsupportedIterableToArray$4","_nonIterableRest$2","_arrayLikeToArray$4","useCollector","onUpdate","_useState","_useState2","collected","setCollected","updateCollected","nextValue","_slicedToArray$1","_arrayWithHoles$1","_iterableToArrayLimit$1","_unsupportedIterableToArray$3","_nonIterableRest$1","_arrayLikeToArray$3","useMonitorOutput","onCollect","_useCollector","_useCollector2","subscribeToMonitorStateChange","useCollectedProps","collector","useConnectDragSource","useConnectDragPreview","useDrag","specArg","begin","previewOptions","useAccept","accept","_classCallCheck$9","_defineProperties$7","_createClass$7","_defineProperty$8","DropTargetImpl","useDropTarget","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray$2","_nonIterableRest","_arrayLikeToArray$2","useRegisteredDropTarget","registerDropTarget","_registerTarget","_registerTarget2","useDropTargetMonitor","useDropTargetConnector","useConnectDropTarget","useDrop","createTransition","event","check","_isMBTransition","TouchTransition","touches","MouseTransition","_createForOfIteratorHelper","_unsupportedIterableToArray$1","F","s","it","normalCompletion","didErr","step","_e2","return","_arrayLikeToArray$1","_classCallCheck$8","PreviewList","register","preview","previews","backendChanged","_iterator","_step","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","_arrayLikeToArray","_classCallCheck$7","_default","sourceOptions","addEventListeners","backends","removeEventListeners","connectBackend","_len2","_key2","_len3","_key3","previewEnabled","transition","addEventListener","backendSwitcher","removeEventListener","oldBackend","nodes","callBackend","func","newBackend","skipDispatchOnTransition","newEvent","createEvent","initEvent","bubbles","cancelable","dispatchEvent","_this$backends$_this$","nodeId","_this$nodes$nodeId","MultiBackend","propIsEnumerable","toObject","shouldUseNative","test1","String","test2","fromCharCode","order2","test3","letter","objectAssign","to","ReactPropTypesSecret$3","ReactPropTypesSecret_1","has$2","Function","printWarning$1","ReactPropTypesSecret$2","loggedTypeFailures","has$1","text","checkPropTypes$1","typeSpecs","values","location","componentName","getStack","typeSpecName","ex","stack","resetWarningCache","checkPropTypes_1","ReactIs$1","ReactPropTypesSecret$1","checkPropTypes","printWarning","emptyFunctionThatReturnsNull","factoryWithTypeCheckers","throwOnDirectAccess","ITERATOR_SYMBOL","FAUX_ITERATOR_SYMBOL","getIteratorFn","maybeIterable","iteratorFn","ANONYMOUS","ReactPropTypes","array","createPrimitiveTypeChecker","bigint","bool","number","string","symbol","any","createAnyTypeChecker","arrayOf","createArrayOfTypeChecker","createElementTypeChecker","elementType","createElementTypeTypeChecker","instanceOf","createInstanceTypeChecker","createNodeChecker","objectOf","createObjectOfTypeChecker","oneOf","createEnumTypeChecker","oneOfType","createUnionTypeChecker","shape","createShapeTypeChecker","exact","createStrictShapeTypeChecker","is","PropTypeError","createChainableTypeChecker","validate","manualPropTypeCallCache","manualPropTypeWarningCount","checkType","isRequired","propName","propFullName","secret","cacheKey","chainedCheckType","expectedType","propValue","propType","getPropType","preciseType","getPreciseType","typeChecker","expectedClass","expectedClassName","actualClassName","getClassName","expectedValues","valuesString","JSON","stringify","replacer","arrayOfTypeCheckers","checker","getPostfixForTypeWarning","expectedTypes","checkerResult","expectedTypesMessage","isNode","invalidValidatorError","shapeTypes","allKeys","every","entry","isSymbol","PropTypes","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","factoryWithThrowingShims","shim","getShim","ReactIs","generator","memoize","fn","memoized","without","union","Set","_classCallCheck$6","_defineProperties$6","_createClass$6","_defineProperty$7","EnterLeaveCounter","isNodeInDocument","enter","enteringNode","previousLength","entered","isNodeEntered","contains","leave","leavingNode","reset","isFirefox","navigator","userAgent","isSafari","safari","_classCallCheck$5","_defineProperties$5","_createClass$5","_defineProperty$6","MonotonicInterpolant","xs","ys","indexes","sort","dxs","ms","dx","dy","c1s","_i2","m2","mNext","dxNext","common","c2s","c3s","_i3","c1","invDx","_common","interpolate","low","high","mid","floor","xHere","max","diff","diffSq","ELEMENT_NODE$1","getNodeClientOffset$1","el","nodeType","parentElement","_el$getBoundingClient","getBoundingClientRect","top","left","getEventClientOffset$1","clientX","clientY","isImageNode","_document$documentEle","nodeName","documentElement","getDragPreviewSize","isImage","sourceWidth","sourceHeight","dragPreviewWidth","width","dragPreviewHeight","height","devicePixelRatio","getDragPreviewOffset","sourceNode","anchorPoint","offsetPoint","dragPreviewNodeOffsetFromClient","offsetFromDragPreview","offsetWidth","offsetHeight","anchorX","anchorY","_getDragPreviewSize","calculateYOffset","interpolantY","calculateXOffset","interpolantX","offsetX","offsetY","isManualOffsetX","isManualOffsetY","FILE","URL","TEXT","HTML","NativeTypes","freeze","getDataFromDataTransfer","dataTransfer","typesToTry","resultSoFar","typeToTry","getData","_nativeTypesConfig","_defineProperty$5","nativeTypesConfig","exposeProperties","files","_dataTransfer","matchesTypes","html","_dataTransfer2","urls","_dataTransfer3","_dataTransfer4","_classCallCheck$4","_defineProperties$4","_createClass$4","_defineProperty$4","NativeDragSource","config","initializeExposedProperties","property","warn","loadDataTransfer","newProperties","handle","createNativeDragSource","matchNativeItemType","dataTransferTypes","nativeItemType","_classCallCheck$3","_defineProperties$3","_createClass$3","_defineProperty$3","OptionsReader$1","OptionsReader","optionsArgs","_this$globalContext","_this$optionsArgs","rootElement","ownKeys","_objectSpread","_defineProperty$2","_classCallCheck$2","_defineProperties$2","_createClass$2","HTML5BackendImpl","sourceNodes","isDraggingNativeItem","currentNativeHandle","currentNativeSource","body","currentDragSourceNode","clearCurrentDragSourceNode","dragStartSourceIds","defaultPrevented","nativeType","setDragImage","sourcePreviewNodes","_this$getCurrentSourc","getCurrentSourcePreviewNodeOptions","dragPreviewOffset","setData","setCurrentDragSourceNode","_this$getCurrentSourc2","captureDraggingState","beginDragNativeItem","hasAttribute","preventDefault","dragEnterTargetIds","isFirstEnter","enterLeaveCounter","altKeyPressed","altKey","dropEffect","getCurrentDropEffect","dragOverTargetIds","lastClientOffset","hoverRafId","requestAnimationFrame","isLastLeave","endDragNativeItem","dropTargetIds","_this$currentNativeSo","dragDrop","tagName","isContentEditable","profile","_this$dragStartSource","_this$dragOverTargetI","size","sourcePreviewNodeOptions","sourceNodeOptions","root","__isReactDndBackendSetUp","asyncEndDragFrameId","_this$window","cancelAnimationFrame","_this3","handleDragStart","handleSelectStart","setAttribute","_this4","handleDragEnter","handleDragOver","handleDrop","handleTopDragStart","handleTopDragStartCapture","handleTopDragEndCapture","handleTopDragEnter","handleTopDragEnterCapture","handleTopDragLeaveCapture","handleTopDragOver","handleTopDragOverCapture","handleTopDrop","handleTopDropCapture","getCurrentSourceNodeOptions","_this5","MOUSE_MOVE_TIMEOUT","mouseMoveTimeoutTimer","_this5$rootElement","endDragIfSourceWasRemovedFromDOM","_this$window2","unshift","emptyImage","getEmptyImage","Image","src","HTML5Backend","createBackend","ListenerType","MouseButtons","Left","Right","Center","MouseButton","eventShouldStartDrag","button","eventShouldEndDrag","buttons","isTouchEvent","targetTouches","ELEMENT_NODE","getNodeClientOffset","getEventClientTouchOffset","lastTargetTouchFallback","getEventClientOffset","distance","x1","y1","x2","y2","sqrt","pow","abs","inAngleRanges","angleRanges","angle","atan2","PI","start","supportsPassive","supported","_classCallCheck$1","_defineProperties$1","_createClass$1","_defineProperty$1","_this$args$delay","delay","scrollAngleRanges","getDropTargetElementsAtPoint","_this$args$ignoreCont","ignoreContextMenu","_this$args$enableHove","enableHoverOutsideTarget","_this$args$enableKeyb","enableKeyboardEvents","_this$args$enableMous","enableMouseEvents","_this$args$enableTouc","enableTouchEvents","touchSlop","_this$args$delayTouch","_this$args","_this$args2","delayTouchStart","_this$args$delayMouse","_this$args3","_this$args4","delayMouseStart","_this$context","_this$args5","_eventNames","_classCallCheck","_defineProperties","_createClass","_defineProperty","eventNames","mouse","move","contextmenu","touch","keyboard","keydown","TouchBackendImpl","moveStartSourceIds","_mouseClientOffset","waitingForDelay","timeout","handleTopMoveStart","_evt","_isScrolling","installSourceNodeRemovalObserver","dragOverTargetNodes","targetNodes","elementsAtPoint","elementsFromPoint","elementsAtPointExtended","currentNode","orderedDragOverTargetIds","_getDropTargetId","ids","targetNode","uninstallSourceNodeRemovalObserver","listenerTypes","getTopMoveStartHandler","handleTopMoveStartCapture","handleTopMove","handleTopMoveCapture","handleTopMoveEndCapture","handleCancelOnEscape","subject","capture","passive","listenerType","evt","handleMoveStart","handleMove","coords","droppedOn","elementFromPoint","childMatch","handleTopMoveStartDelay","draggedSourceNode","draggedSourceNodeRemovalObserver","resurrectSourceNode","childList","style","display","removeAttribute","appendChild","disconnect","TouchBackend","HTML5toTouch","COLUMNS","chessboardDefaultProps","animationDuration","areArrowsAllowed","arePiecesDraggable","arePremovesAllowed","boardOrientation","boardWidth","clearPremovesOnRightClick","customArrows","customArrowColor","customBoardStyle","customDarkSquareStyle","backgroundColor","customDndBackend","customDndBackendOptions","customDropSquareStyle","boxShadow","customLightSquareStyle","customPieces","customPremoveDarkSquareStyle","customPremoveLightSquareStyle","customSquareStyles","dropOffBoardAction","isDraggablePiece","getPositionObject","onDragOverSquare","onMouseOutSquare","onMouseOverSquare","onPieceClick","onPieceDragBegin","onPieceDragEnd","onPieceDrop","onSquareClick","onSquareRightClick","position","showBoardNotation","snapToCursor","startPositionObject","a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","d1","e1","f1","g1","h1","whiteColumnValues","blackColumnValues","whiteRows","blackRows","getRelativeCoords","square","squareWidth","columns","rows","isDifferentFromStart","newPosition","isDifferent","getPositionDifferences","currentPosition","difference","removed","added","isString","convertPositionToObject","fenToObj","validFen","validPositionObject","fen","currentRow","row","colIdx","j","search","numEmptySquares","parseInt","fenToPieceCode","expandFenEmptySquares","chunks","piece","toUpperCase","validSquare","validPieceCode","pos","defaultPieces","wP","xmlns","version","opacity","fill","fillOpacity","fillRule","stroke","strokeWidth","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeDasharray","strokeOpacity","wR","wN","transform","wB","wQ","cx","cy","wK","bP","bR","bN","bB","bQ","bK","ChessboardContext","useChessboard","ChessboardProvider","showSparePieces","setCurrentPosition","positionDifferences","setPositionDifferences","lastPieceColour","setLastPieceColour","premoves","setPremoves","premovesRef","currentRightClickDown","setCurrentRightClickDown","arrows","setArrows","chessPieces","setChessPieces","manualDrop","setManualDrop","previousTimeout","setPreviousTimeout","waitingForAnimation","setWaitingForAnimation","clearPremoves","_Object$keys","_Object$entries","_Object$entries$","differences","newPieceColour","attemptPremove","newTimeout","clearArrows","handleSetPosition","sourceSq","targetSq","oldPremoves","newOnDropPosition","isValidMove","premove","clearLastPieceColour","onRightClickDown","onRightClickUp","oldArrows","newArrows","clearCurrentRightClickDown","Notation","col","whiteColor","blackColor","isRow","isColumn","isBottomLeftSquare","getRow","getColumn","renderBottomLeft","notationStyle","color","numericStyle","alphaStyle","renderLetters","renderNumbers","alignSelf","paddingLeft","fontSize","paddingRight","zIndex","Piece","squares","isPremovedPiece","pieceStyle","setPieceStyle","touchAction","cursor","sourceSquare","drag","oldPieceStyle","hidePiece","find","_positionDifferences$","removedPiece","newSquare","getSquareCoordinates","getSingleSquareCoordinates","targetSquare","onClick","droppedPiece","viewBox","Square","squareColor","setSquares","squareHasPremove","squareRef","oldSquares","defaultSquareStyle","borderRadius","onMouseOver","onMouseOut","onMouseDown","onMouseUp","onDragEnter","onContextMenu","center","justifyContent","borderBottomLeftRadius","borderTopRightRadius","borderTopLeftRadius","borderBottomRightRadius","Squares","boardStyles","_","rowStyles","flexWrap","errorImage","whiteKing","shapeRendering","textRendering","imageRendering","clipRule","ErrorBoundary","WhiteKing","showError","container","whiteKingStyle","alignItems","flexDirection","Board","boardRef","handleClickOutside","squareHasPremoveTarget","pointerEvents","arrow","markerWidth","markerHeight","refX","refY","orient","points","markerEnd","CDragLayer","layerStyles","getItemStyle","halfSquareWidth","WebkitTransform","CustomDragLayer","Chessboard","otherProps"],"sources":["/Users/kianeghbalnia/Desktop/garry-chess/GarryChess/node_modules/react-chessboard/dist/index.esm.js"],"sourcesContent":["import React, { createContext, memo, useEffect, isValidElement, cloneElement, createRef, Component, useLayoutEffect, useMemo, useContext, useState, useCallback, forwardRef, useRef, useImperativeHandle, Fragment as Fragment$1 } from 'react';\nimport 'react-dom';\nimport { jsx, jsxs, Fragment } from 'react/jsx-runtime';\n\n/**\n * Create the React Context\n */\n\nvar DndContext = /*#__PURE__*/createContext({\n  dragDropManager: undefined\n});\n\nvar HandlerRole;\n\n(function (HandlerRole) {\n  HandlerRole[\"SOURCE\"] = \"SOURCE\";\n  HandlerRole[\"TARGET\"] = \"TARGET\";\n})(HandlerRole || (HandlerRole = {}));\n\n/**\r\n * Use invariant() to assert state which your program assumes to be true.\r\n *\r\n * Provide sprintf-style format (only %s is supported) and arguments\r\n * to provide information about what broke and what you were\r\n * expecting.\r\n *\r\n * The invariant message will be stripped in production, but the invariant\r\n * will remain to ensure logic does not differ in production.\r\n */\nfunction invariant(condition, format) {\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var argIndex = 0;\n      error = new Error(format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n\n    throw error;\n  }\n}\n\nvar INIT_COORDS = 'dnd-core/INIT_COORDS';\nvar BEGIN_DRAG = 'dnd-core/BEGIN_DRAG';\nvar PUBLISH_DRAG_SOURCE = 'dnd-core/PUBLISH_DRAG_SOURCE';\nvar HOVER = 'dnd-core/HOVER';\nvar DROP = 'dnd-core/DROP';\nvar END_DRAG = 'dnd-core/END_DRAG';\n\nfunction setClientOffset(clientOffset, sourceClientOffset) {\n  return {\n    type: INIT_COORDS,\n    payload: {\n      sourceClientOffset: sourceClientOffset || null,\n      clientOffset: clientOffset || null\n    }\n  };\n}\n\nfunction _typeof$5(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof$5 = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof$5 = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof$5(obj);\n} // cheap lodash replacements\n\n/**\n * drop-in replacement for _.get\n * @param obj\n * @param path\n * @param defaultValue\n */\n\n\nfunction get(obj, path, defaultValue) {\n  return path.split('.').reduce(function (a, c) {\n    return a && a[c] ? a[c] : defaultValue || null;\n  }, obj);\n}\n/**\n * drop-in replacement for _.without\n */\n\nfunction without$1(items, item) {\n  return items.filter(function (i) {\n    return i !== item;\n  });\n}\n/**\n * drop-in replacement for _.isString\n * @param input\n */\n\nfunction isObject(input) {\n  return _typeof$5(input) === 'object';\n}\n/**\n * repalcement for _.xor\n * @param itemsA\n * @param itemsB\n */\n\nfunction xor(itemsA, itemsB) {\n  var map = new Map();\n\n  var insertItem = function insertItem(item) {\n    map.set(item, map.has(item) ? map.get(item) + 1 : 1);\n  };\n\n  itemsA.forEach(insertItem);\n  itemsB.forEach(insertItem);\n  var result = [];\n  map.forEach(function (count, key) {\n    if (count === 1) {\n      result.push(key);\n    }\n  });\n  return result;\n}\n/**\n * replacement for _.intersection\n * @param itemsA\n * @param itemsB\n */\n\nfunction intersection(itemsA, itemsB) {\n  return itemsA.filter(function (t) {\n    return itemsB.indexOf(t) > -1;\n  });\n}\n\nvar ResetCoordinatesAction = {\n  type: INIT_COORDS,\n  payload: {\n    clientOffset: null,\n    sourceClientOffset: null\n  }\n};\nfunction createBeginDrag(manager) {\n  return function beginDrag() {\n    var sourceIds = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      publishSource: true\n    };\n    var _options$publishSourc = options.publishSource,\n        publishSource = _options$publishSourc === void 0 ? true : _options$publishSourc,\n        clientOffset = options.clientOffset,\n        getSourceClientOffset = options.getSourceClientOffset;\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry(); // Initialize the coordinates using the client offset\n\n    manager.dispatch(setClientOffset(clientOffset));\n    verifyInvariants$1(sourceIds, monitor, registry); // Get the draggable source\n\n    var sourceId = getDraggableSource(sourceIds, monitor);\n\n    if (sourceId === null) {\n      manager.dispatch(ResetCoordinatesAction);\n      return;\n    } // Get the source client offset\n\n\n    var sourceClientOffset = null;\n\n    if (clientOffset) {\n      if (!getSourceClientOffset) {\n        throw new Error('getSourceClientOffset must be defined');\n      }\n\n      verifyGetSourceClientOffsetIsFunction(getSourceClientOffset);\n      sourceClientOffset = getSourceClientOffset(sourceId);\n    } // Initialize the full coordinates\n\n\n    manager.dispatch(setClientOffset(clientOffset, sourceClientOffset));\n    var source = registry.getSource(sourceId);\n    var item = source.beginDrag(monitor, sourceId); // If source.beginDrag returns null, this is an indicator to cancel the drag\n\n    if (item == null) {\n      return undefined;\n    }\n\n    verifyItemIsObject(item);\n    registry.pinSource(sourceId);\n    var itemType = registry.getSourceType(sourceId);\n    return {\n      type: BEGIN_DRAG,\n      payload: {\n        itemType: itemType,\n        item: item,\n        sourceId: sourceId,\n        clientOffset: clientOffset || null,\n        sourceClientOffset: sourceClientOffset || null,\n        isSourcePublic: !!publishSource\n      }\n    };\n  };\n}\n\nfunction verifyInvariants$1(sourceIds, monitor, registry) {\n  invariant(!monitor.isDragging(), 'Cannot call beginDrag while dragging.');\n  sourceIds.forEach(function (sourceId) {\n    invariant(registry.getSource(sourceId), 'Expected sourceIds to be registered.');\n  });\n}\n\nfunction verifyGetSourceClientOffsetIsFunction(getSourceClientOffset) {\n  invariant(typeof getSourceClientOffset === 'function', 'When clientOffset is provided, getSourceClientOffset must be a function.');\n}\n\nfunction verifyItemIsObject(item) {\n  invariant(isObject(item), 'Item must be an object.');\n}\n\nfunction getDraggableSource(sourceIds, monitor) {\n  var sourceId = null;\n\n  for (var i = sourceIds.length - 1; i >= 0; i--) {\n    if (monitor.canDragSource(sourceIds[i])) {\n      sourceId = sourceIds[i];\n      break;\n    }\n  }\n\n  return sourceId;\n}\n\nfunction createPublishDragSource(manager) {\n  return function publishDragSource() {\n    var monitor = manager.getMonitor();\n\n    if (monitor.isDragging()) {\n      return {\n        type: PUBLISH_DRAG_SOURCE\n      };\n    }\n  };\n}\n\nfunction matchesType(targetType, draggedItemType) {\n  if (draggedItemType === null) {\n    return targetType === null;\n  }\n\n  return Array.isArray(targetType) ? targetType.some(function (t) {\n    return t === draggedItemType;\n  }) : targetType === draggedItemType;\n}\n\nfunction createHover(manager) {\n  return function hover(targetIdsArg) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        clientOffset = _ref.clientOffset;\n\n    verifyTargetIdsIsArray(targetIdsArg);\n    var targetIds = targetIdsArg.slice(0);\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    checkInvariants(targetIds, monitor, registry);\n    var draggedItemType = monitor.getItemType();\n    removeNonMatchingTargetIds(targetIds, registry, draggedItemType);\n    hoverAllTargets(targetIds, monitor, registry);\n    return {\n      type: HOVER,\n      payload: {\n        targetIds: targetIds,\n        clientOffset: clientOffset || null\n      }\n    };\n  };\n}\n\nfunction verifyTargetIdsIsArray(targetIdsArg) {\n  invariant(Array.isArray(targetIdsArg), 'Expected targetIds to be an array.');\n}\n\nfunction checkInvariants(targetIds, monitor, registry) {\n  invariant(monitor.isDragging(), 'Cannot call hover while not dragging.');\n  invariant(!monitor.didDrop(), 'Cannot call hover after drop.');\n\n  for (var i = 0; i < targetIds.length; i++) {\n    var targetId = targetIds[i];\n    invariant(targetIds.lastIndexOf(targetId) === i, 'Expected targetIds to be unique in the passed array.');\n    var target = registry.getTarget(targetId);\n    invariant(target, 'Expected targetIds to be registered.');\n  }\n}\n\nfunction removeNonMatchingTargetIds(targetIds, registry, draggedItemType) {\n  // Remove those targetIds that don't match the targetType.  This\n  // fixes shallow isOver which would only be non-shallow because of\n  // non-matching targets.\n  for (var i = targetIds.length - 1; i >= 0; i--) {\n    var targetId = targetIds[i];\n    var targetType = registry.getTargetType(targetId);\n\n    if (!matchesType(targetType, draggedItemType)) {\n      targetIds.splice(i, 1);\n    }\n  }\n}\n\nfunction hoverAllTargets(targetIds, monitor, registry) {\n  // Finally call hover on all matching targets.\n  targetIds.forEach(function (targetId) {\n    var target = registry.getTarget(targetId);\n    target.hover(monitor, targetId);\n  });\n}\n\nfunction ownKeys$4(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$4(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$4(Object(source), true).forEach(function (key) {\n        _defineProperty$l(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$4(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty$l(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nfunction createDrop(manager) {\n  return function drop() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    verifyInvariants(monitor);\n    var targetIds = getDroppableTargets(monitor); // Multiple actions are dispatched here, which is why this doesn't return an action\n\n    targetIds.forEach(function (targetId, index) {\n      var dropResult = determineDropResult(targetId, index, registry, monitor);\n      var action = {\n        type: DROP,\n        payload: {\n          dropResult: _objectSpread$4(_objectSpread$4({}, options), dropResult)\n        }\n      };\n      manager.dispatch(action);\n    });\n  };\n}\n\nfunction verifyInvariants(monitor) {\n  invariant(monitor.isDragging(), 'Cannot call drop while not dragging.');\n  invariant(!monitor.didDrop(), 'Cannot call drop twice during one drag operation.');\n}\n\nfunction determineDropResult(targetId, index, registry, monitor) {\n  var target = registry.getTarget(targetId);\n  var dropResult = target ? target.drop(monitor, targetId) : undefined;\n  verifyDropResultType(dropResult);\n\n  if (typeof dropResult === 'undefined') {\n    dropResult = index === 0 ? {} : monitor.getDropResult();\n  }\n\n  return dropResult;\n}\n\nfunction verifyDropResultType(dropResult) {\n  invariant(typeof dropResult === 'undefined' || isObject(dropResult), 'Drop result must either be an object or undefined.');\n}\n\nfunction getDroppableTargets(monitor) {\n  var targetIds = monitor.getTargetIds().filter(monitor.canDropOnTarget, monitor);\n  targetIds.reverse();\n  return targetIds;\n}\n\nfunction createEndDrag(manager) {\n  return function endDrag() {\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    verifyIsDragging(monitor);\n    var sourceId = monitor.getSourceId();\n\n    if (sourceId != null) {\n      var source = registry.getSource(sourceId, true);\n      source.endDrag(monitor, sourceId);\n      registry.unpinSource();\n    }\n\n    return {\n      type: END_DRAG\n    };\n  };\n}\n\nfunction verifyIsDragging(monitor) {\n  invariant(monitor.isDragging(), 'Cannot call endDrag while not dragging.');\n}\n\nfunction createDragDropActions(manager) {\n  return {\n    beginDrag: createBeginDrag(manager),\n    publishDragSource: createPublishDragSource(manager),\n    hover: createHover(manager),\n    drop: createDrop(manager),\n    endDrag: createEndDrag(manager)\n  };\n}\n\nfunction _classCallCheck$i(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$g(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$g(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$g(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$g(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$k(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar DragDropManagerImpl = /*#__PURE__*/function () {\n  function DragDropManagerImpl(store, monitor) {\n    var _this = this;\n\n    _classCallCheck$i(this, DragDropManagerImpl);\n\n    _defineProperty$k(this, \"store\", void 0);\n\n    _defineProperty$k(this, \"monitor\", void 0);\n\n    _defineProperty$k(this, \"backend\", void 0);\n\n    _defineProperty$k(this, \"isSetUp\", false);\n\n    _defineProperty$k(this, \"handleRefCountChange\", function () {\n      var shouldSetUp = _this.store.getState().refCount > 0;\n\n      if (_this.backend) {\n        if (shouldSetUp && !_this.isSetUp) {\n          _this.backend.setup();\n\n          _this.isSetUp = true;\n        } else if (!shouldSetUp && _this.isSetUp) {\n          _this.backend.teardown();\n\n          _this.isSetUp = false;\n        }\n      }\n    });\n\n    this.store = store;\n    this.monitor = monitor;\n    store.subscribe(this.handleRefCountChange);\n  }\n\n  _createClass$g(DragDropManagerImpl, [{\n    key: \"receiveBackend\",\n    value: function receiveBackend(backend) {\n      this.backend = backend;\n    }\n  }, {\n    key: \"getMonitor\",\n    value: function getMonitor() {\n      return this.monitor;\n    }\n  }, {\n    key: \"getBackend\",\n    value: function getBackend() {\n      return this.backend;\n    }\n  }, {\n    key: \"getRegistry\",\n    value: function getRegistry() {\n      return this.monitor.registry;\n    }\n  }, {\n    key: \"getActions\",\n    value: function getActions() {\n      /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n      var manager = this;\n      var dispatch = this.store.dispatch;\n\n      function bindActionCreator(actionCreator) {\n        return function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          var action = actionCreator.apply(manager, args);\n\n          if (typeof action !== 'undefined') {\n            dispatch(action);\n          }\n        };\n      }\n\n      var actions = createDragDropActions(this);\n      return Object.keys(actions).reduce(function (boundActions, key) {\n        var action = actions[key];\n        boundActions[key] = bindActionCreator(action);\n        return boundActions;\n      }, {});\n    }\n  }, {\n    key: \"dispatch\",\n    value: function dispatch(action) {\n      this.store.dispatch(action);\n    }\n  }]);\n\n  return DragDropManagerImpl;\n}();\n\n/**\n * Adapted from React: https://github.com/facebook/react/blob/master/packages/shared/formatProdErrorMessage.js\n *\n * Do not require this module directly! Use normal throw error calls. These messages will be replaced with error codes\n * during build.\n * @param {number} code\n */\n\nfunction formatProdErrorMessage(code) {\n  return \"Minified Redux error #\" + code + \"; visit https://redux.js.org/Errors?code=\" + code + \" for the full message or \" + 'use the non-minified dev environment for full errors. ';\n} // Inlined version of the `symbol-observable` polyfill\n\n\nvar $$observable = function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n}();\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\n\n\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\n\nfunction isPlainObject$1(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n} // Inlined / shortened version of `kindOf` from https://github.com/jonschlinkert/kind-of\n\n\nfunction miniKindOf(val) {\n  if (val === void 0) return 'undefined';\n  if (val === null) return 'null';\n  var type = typeof val;\n\n  switch (type) {\n    case 'boolean':\n    case 'string':\n    case 'number':\n    case 'symbol':\n    case 'function':\n      {\n        return type;\n      }\n  }\n\n  if (Array.isArray(val)) return 'array';\n  if (isDate(val)) return 'date';\n  if (isError(val)) return 'error';\n  var constructorName = ctorName(val);\n\n  switch (constructorName) {\n    case 'Symbol':\n    case 'Promise':\n    case 'WeakMap':\n    case 'WeakSet':\n    case 'Map':\n    case 'Set':\n      return constructorName;\n  } // other\n\n\n  return type.slice(8, -1).toLowerCase().replace(/\\s/g, '');\n}\n\nfunction ctorName(val) {\n  return typeof val.constructor === 'function' ? val.constructor.name : null;\n}\n\nfunction isError(val) {\n  return val instanceof Error || typeof val.message === 'string' && val.constructor && typeof val.constructor.stackTraceLimit === 'number';\n}\n\nfunction isDate(val) {\n  if (val instanceof Date) return true;\n  return typeof val.toDateString === 'function' && typeof val.getDate === 'function' && typeof val.setDate === 'function';\n}\n\nfunction kindOf(val) {\n  var typeOfVal = typeof val;\n\n  if (process.env.NODE_ENV !== 'production') {\n    typeOfVal = miniKindOf(val);\n  }\n\n  return typeOfVal;\n}\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(0) : 'It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(1) : \"Expected the enhancer to be a function. Instead, received: '\" + kindOf(enhancer) + \"'\");\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(2) : \"Expected the root reducer to be a function. Instead, received: '\" + kindOf(reducer) + \"'\");\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(3) : 'You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(4) : \"Expected the listener to be a function. Instead, received: '\" + kindOf(listener) + \"'\");\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(5) : 'You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(6) : 'You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject$1(action)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(7) : \"Actions must be plain objects. Instead, the actual type was: '\" + kindOf(action) + \"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.\");\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(8) : 'Actions may not have an undefined \"type\" property. You may have misspelled an action type string constant.');\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(9) : 'Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(10) : \"Expected the nextReducer to be a function. Instead, received: '\" + kindOf(nextReducer));\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(11) : \"Expected the observer to be an object. Instead, received: '\" + kindOf(observer) + \"'\");\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\n\n\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nvar strictEquality = function strictEquality(a, b) {\n  return a === b;\n};\n/**\n * Determine if two cartesian coordinate offsets are equal\n * @param offsetA\n * @param offsetB\n */\n\nfunction areCoordsEqual(offsetA, offsetB) {\n  if (!offsetA && !offsetB) {\n    return true;\n  } else if (!offsetA || !offsetB) {\n    return false;\n  } else {\n    return offsetA.x === offsetB.x && offsetA.y === offsetB.y;\n  }\n}\n/**\n * Determines if two arrays of items are equal\n * @param a The first array of items\n * @param b The second array of items\n */\n\nfunction areArraysEqual(a, b) {\n  var isEqual = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : strictEquality;\n\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  for (var i = 0; i < a.length; ++i) {\n    if (!isEqual(a[i], b[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction ownKeys$3(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$3(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$3(Object(source), true).forEach(function (key) {\n        _defineProperty$j(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$3(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty$j(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar initialState$1 = {\n  initialSourceClientOffset: null,\n  initialClientOffset: null,\n  clientOffset: null\n};\nfunction reduce$5() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState$1;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var payload = action.payload;\n\n  switch (action.type) {\n    case INIT_COORDS:\n    case BEGIN_DRAG:\n      return {\n        initialSourceClientOffset: payload.sourceClientOffset,\n        initialClientOffset: payload.clientOffset,\n        clientOffset: payload.clientOffset\n      };\n\n    case HOVER:\n      if (areCoordsEqual(state.clientOffset, payload.clientOffset)) {\n        return state;\n      }\n\n      return _objectSpread$3(_objectSpread$3({}, state), {}, {\n        clientOffset: payload.clientOffset\n      });\n\n    case END_DRAG:\n    case DROP:\n      return initialState$1;\n\n    default:\n      return state;\n  }\n}\n\nvar ADD_SOURCE = 'dnd-core/ADD_SOURCE';\nvar ADD_TARGET = 'dnd-core/ADD_TARGET';\nvar REMOVE_SOURCE = 'dnd-core/REMOVE_SOURCE';\nvar REMOVE_TARGET = 'dnd-core/REMOVE_TARGET';\nfunction addSource(sourceId) {\n  return {\n    type: ADD_SOURCE,\n    payload: {\n      sourceId: sourceId\n    }\n  };\n}\nfunction addTarget(targetId) {\n  return {\n    type: ADD_TARGET,\n    payload: {\n      targetId: targetId\n    }\n  };\n}\nfunction removeSource(sourceId) {\n  return {\n    type: REMOVE_SOURCE,\n    payload: {\n      sourceId: sourceId\n    }\n  };\n}\nfunction removeTarget(targetId) {\n  return {\n    type: REMOVE_TARGET,\n    payload: {\n      targetId: targetId\n    }\n  };\n}\n\nfunction ownKeys$2(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$2(Object(source), true).forEach(function (key) {\n        _defineProperty$i(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$2(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty$i(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar initialState = {\n  itemType: null,\n  item: null,\n  sourceId: null,\n  targetIds: [],\n  dropResult: null,\n  didDrop: false,\n  isSourcePublic: null\n};\nfunction reduce$4() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var payload = action.payload;\n\n  switch (action.type) {\n    case BEGIN_DRAG:\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        itemType: payload.itemType,\n        item: payload.item,\n        sourceId: payload.sourceId,\n        isSourcePublic: payload.isSourcePublic,\n        dropResult: null,\n        didDrop: false\n      });\n\n    case PUBLISH_DRAG_SOURCE:\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        isSourcePublic: true\n      });\n\n    case HOVER:\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        targetIds: payload.targetIds\n      });\n\n    case REMOVE_TARGET:\n      if (state.targetIds.indexOf(payload.targetId) === -1) {\n        return state;\n      }\n\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        targetIds: without$1(state.targetIds, payload.targetId)\n      });\n\n    case DROP:\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        dropResult: payload.dropResult,\n        didDrop: true,\n        targetIds: []\n      });\n\n    case END_DRAG:\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        itemType: null,\n        item: null,\n        sourceId: null,\n        dropResult: null,\n        didDrop: false,\n        isSourcePublic: null,\n        targetIds: []\n      });\n\n    default:\n      return state;\n  }\n}\n\nfunction reduce$3() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ADD_SOURCE:\n    case ADD_TARGET:\n      return state + 1;\n\n    case REMOVE_SOURCE:\n    case REMOVE_TARGET:\n      return state - 1;\n\n    default:\n      return state;\n  }\n}\n\nvar NONE = [];\nvar ALL = [];\nNONE.__IS_NONE__ = true;\nALL.__IS_ALL__ = true;\n/**\n * Determines if the given handler IDs are dirty or not.\n *\n * @param dirtyIds The set of dirty handler ids\n * @param handlerIds The set of handler ids to check\n */\n\nfunction areDirty(dirtyIds, handlerIds) {\n  if (dirtyIds === NONE) {\n    return false;\n  }\n\n  if (dirtyIds === ALL || typeof handlerIds === 'undefined') {\n    return true;\n  }\n\n  var commonIds = intersection(handlerIds, dirtyIds);\n  return commonIds.length > 0;\n}\n\nfunction reduce$2() {\n\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case HOVER:\n      break;\n\n    case ADD_SOURCE:\n    case ADD_TARGET:\n    case REMOVE_TARGET:\n    case REMOVE_SOURCE:\n      return NONE;\n\n    case BEGIN_DRAG:\n    case PUBLISH_DRAG_SOURCE:\n    case END_DRAG:\n    case DROP:\n    default:\n      return ALL;\n  }\n\n  var _action$payload = action.payload,\n      _action$payload$targe = _action$payload.targetIds,\n      targetIds = _action$payload$targe === void 0 ? [] : _action$payload$targe,\n      _action$payload$prevT = _action$payload.prevTargetIds,\n      prevTargetIds = _action$payload$prevT === void 0 ? [] : _action$payload$prevT;\n  var result = xor(targetIds, prevTargetIds);\n  var didChange = result.length > 0 || !areArraysEqual(targetIds, prevTargetIds);\n\n  if (!didChange) {\n    return NONE;\n  } // Check the target ids at the innermost position. If they are valid, add them\n  // to the result\n\n\n  var prevInnermostTargetId = prevTargetIds[prevTargetIds.length - 1];\n  var innermostTargetId = targetIds[targetIds.length - 1];\n\n  if (prevInnermostTargetId !== innermostTargetId) {\n    if (prevInnermostTargetId) {\n      result.push(prevInnermostTargetId);\n    }\n\n    if (innermostTargetId) {\n      result.push(innermostTargetId);\n    }\n  }\n\n  return result;\n}\n\nfunction reduce$1() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  return state + 1;\n}\n\nfunction ownKeys$1(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$1(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$1(Object(source), true).forEach(function (key) {\n        _defineProperty$h(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$1(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty$h(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nfunction reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return {\n    dirtyHandlerIds: reduce$2(state.dirtyHandlerIds, {\n      type: action.type,\n      payload: _objectSpread$1(_objectSpread$1({}, action.payload), {}, {\n        prevTargetIds: get(state, 'dragOperation.targetIds', [])\n      })\n    }),\n    dragOffset: reduce$5(state.dragOffset, action),\n    refCount: reduce$3(state.refCount, action),\n    dragOperation: reduce$4(state.dragOperation, action),\n    stateId: reduce$1(state.stateId)\n  };\n}\n\n/**\n * Coordinate addition\n * @param a The first coordinate\n * @param b The second coordinate\n */\nfunction add(a, b) {\n  return {\n    x: a.x + b.x,\n    y: a.y + b.y\n  };\n}\n/**\n * Coordinate subtraction\n * @param a The first coordinate\n * @param b The second coordinate\n */\n\nfunction subtract(a, b) {\n  return {\n    x: a.x - b.x,\n    y: a.y - b.y\n  };\n}\n/**\n * Returns the cartesian distance of the drag source component's position, based on its position\n * at the time when the current drag operation has started, and the movement difference.\n *\n * Returns null if no item is being dragged.\n *\n * @param state The offset state to compute from\n */\n\nfunction getSourceClientOffset(state) {\n  var clientOffset = state.clientOffset,\n      initialClientOffset = state.initialClientOffset,\n      initialSourceClientOffset = state.initialSourceClientOffset;\n\n  if (!clientOffset || !initialClientOffset || !initialSourceClientOffset) {\n    return null;\n  }\n\n  return subtract(add(clientOffset, initialSourceClientOffset), initialClientOffset);\n}\n/**\n * Determines the x,y offset between the client offset and the initial client offset\n *\n * @param state The offset state to compute from\n */\n\nfunction getDifferenceFromInitialOffset(state) {\n  var clientOffset = state.clientOffset,\n      initialClientOffset = state.initialClientOffset;\n\n  if (!clientOffset || !initialClientOffset) {\n    return null;\n  }\n\n  return subtract(clientOffset, initialClientOffset);\n}\n\nfunction _classCallCheck$h(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$f(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$f(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$f(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$f(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$g(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar DragDropMonitorImpl = /*#__PURE__*/function () {\n  function DragDropMonitorImpl(store, registry) {\n    _classCallCheck$h(this, DragDropMonitorImpl);\n\n    _defineProperty$g(this, \"store\", void 0);\n\n    _defineProperty$g(this, \"registry\", void 0);\n\n    this.store = store;\n    this.registry = registry;\n  }\n\n  _createClass$f(DragDropMonitorImpl, [{\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        handlerIds: undefined\n      };\n      var handlerIds = options.handlerIds;\n      invariant(typeof listener === 'function', 'listener must be a function.');\n      invariant(typeof handlerIds === 'undefined' || Array.isArray(handlerIds), 'handlerIds, when specified, must be an array of strings.');\n      var prevStateId = this.store.getState().stateId;\n\n      var handleChange = function handleChange() {\n        var state = _this.store.getState();\n\n        var currentStateId = state.stateId;\n\n        try {\n          var canSkipListener = currentStateId === prevStateId || currentStateId === prevStateId + 1 && !areDirty(state.dirtyHandlerIds, handlerIds);\n\n          if (!canSkipListener) {\n            listener();\n          }\n        } finally {\n          prevStateId = currentStateId;\n        }\n      };\n\n      return this.store.subscribe(handleChange);\n    }\n  }, {\n    key: \"subscribeToOffsetChange\",\n    value: function subscribeToOffsetChange(listener) {\n      var _this2 = this;\n\n      invariant(typeof listener === 'function', 'listener must be a function.');\n      var previousState = this.store.getState().dragOffset;\n\n      var handleChange = function handleChange() {\n        var nextState = _this2.store.getState().dragOffset;\n\n        if (nextState === previousState) {\n          return;\n        }\n\n        previousState = nextState;\n        listener();\n      };\n\n      return this.store.subscribe(handleChange);\n    }\n  }, {\n    key: \"canDragSource\",\n    value: function canDragSource(sourceId) {\n      if (!sourceId) {\n        return false;\n      }\n\n      var source = this.registry.getSource(sourceId);\n      invariant(source, \"Expected to find a valid source. sourceId=\".concat(sourceId));\n\n      if (this.isDragging()) {\n        return false;\n      }\n\n      return source.canDrag(this, sourceId);\n    }\n  }, {\n    key: \"canDropOnTarget\",\n    value: function canDropOnTarget(targetId) {\n      // undefined on initial render\n      if (!targetId) {\n        return false;\n      }\n\n      var target = this.registry.getTarget(targetId);\n      invariant(target, \"Expected to find a valid target. targetId=\".concat(targetId));\n\n      if (!this.isDragging() || this.didDrop()) {\n        return false;\n      }\n\n      var targetType = this.registry.getTargetType(targetId);\n      var draggedItemType = this.getItemType();\n      return matchesType(targetType, draggedItemType) && target.canDrop(this, targetId);\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging() {\n      return Boolean(this.getItemType());\n    }\n  }, {\n    key: \"isDraggingSource\",\n    value: function isDraggingSource(sourceId) {\n      // undefined on initial render\n      if (!sourceId) {\n        return false;\n      }\n\n      var source = this.registry.getSource(sourceId, true);\n      invariant(source, \"Expected to find a valid source. sourceId=\".concat(sourceId));\n\n      if (!this.isDragging() || !this.isSourcePublic()) {\n        return false;\n      }\n\n      var sourceType = this.registry.getSourceType(sourceId);\n      var draggedItemType = this.getItemType();\n\n      if (sourceType !== draggedItemType) {\n        return false;\n      }\n\n      return source.isDragging(this, sourceId);\n    }\n  }, {\n    key: \"isOverTarget\",\n    value: function isOverTarget(targetId) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        shallow: false\n      }; // undefined on initial render\n\n      if (!targetId) {\n        return false;\n      }\n\n      var shallow = options.shallow;\n\n      if (!this.isDragging()) {\n        return false;\n      }\n\n      var targetType = this.registry.getTargetType(targetId);\n      var draggedItemType = this.getItemType();\n\n      if (draggedItemType && !matchesType(targetType, draggedItemType)) {\n        return false;\n      }\n\n      var targetIds = this.getTargetIds();\n\n      if (!targetIds.length) {\n        return false;\n      }\n\n      var index = targetIds.indexOf(targetId);\n\n      if (shallow) {\n        return index === targetIds.length - 1;\n      } else {\n        return index > -1;\n      }\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.store.getState().dragOperation.itemType;\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.store.getState().dragOperation.item;\n    }\n  }, {\n    key: \"getSourceId\",\n    value: function getSourceId() {\n      return this.store.getState().dragOperation.sourceId;\n    }\n  }, {\n    key: \"getTargetIds\",\n    value: function getTargetIds() {\n      return this.store.getState().dragOperation.targetIds;\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.store.getState().dragOperation.dropResult;\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.store.getState().dragOperation.didDrop;\n    }\n  }, {\n    key: \"isSourcePublic\",\n    value: function isSourcePublic() {\n      return Boolean(this.store.getState().dragOperation.isSourcePublic);\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.store.getState().dragOffset.initialClientOffset;\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.store.getState().dragOffset.initialSourceClientOffset;\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.store.getState().dragOffset.clientOffset;\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset$1() {\n      return getSourceClientOffset(this.store.getState().dragOffset);\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset$1() {\n      return getDifferenceFromInitialOffset(this.store.getState().dragOffset);\n    }\n  }]);\n\n  return DragDropMonitorImpl;\n}();\n\nvar nextUniqueId = 0;\nfunction getNextUniqueId() {\n  return nextUniqueId++;\n}\n\nfunction _typeof$4(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof$4 = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof$4 = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof$4(obj);\n}\nfunction validateSourceContract(source) {\n  invariant(typeof source.canDrag === 'function', 'Expected canDrag to be a function.');\n  invariant(typeof source.beginDrag === 'function', 'Expected beginDrag to be a function.');\n  invariant(typeof source.endDrag === 'function', 'Expected endDrag to be a function.');\n}\nfunction validateTargetContract(target) {\n  invariant(typeof target.canDrop === 'function', 'Expected canDrop to be a function.');\n  invariant(typeof target.hover === 'function', 'Expected hover to be a function.');\n  invariant(typeof target.drop === 'function', 'Expected beginDrag to be a function.');\n}\nfunction validateType(type, allowArray) {\n  if (allowArray && Array.isArray(type)) {\n    type.forEach(function (t) {\n      return validateType(t, false);\n    });\n    return;\n  }\n\n  invariant(typeof type === 'string' || _typeof$4(type) === 'symbol', allowArray ? 'Type can only be a string, a symbol, or an array of either.' : 'Type can only be a string or a symbol.');\n}\n\n// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nfunction rawAsap(task) {\n  if (!queue.length) {\n    requestFlush();\n  } // Equivalent to push, but avoids a function call.\n\n\n  queue[queue.length] = task;\n}\nvar queue = []; // Once a flush has been requested, no further calls to `requestFlush` are\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\n\nvar requestFlush; // The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\n\nvar index = 0; // If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\n\nvar capacity = 1024; // The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\n\nfunction flush() {\n  while (index < queue.length) {\n    var currentIndex = index; // Advance the index before calling the task. This ensures that we will\n    // begin flushing on the next task the task throws an error.\n\n    index = index + 1;\n    queue[currentIndex].call(); // Prevent leaking memory for long chains of recursive calls to `asap`.\n    // If we call `asap` within tasks scheduled by `asap`, the queue will\n    // grow, but to avoid an O(n) walk for every task we execute, we don't\n    // shift tasks off the queue after they have been executed.\n    // Instead, we periodically shift 1024 tasks off the queue.\n\n    if (index > capacity) {\n      // Manually shift all values starting at the index back to the\n      // beginning of the queue.\n      for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n        queue[scan] = queue[scan + index];\n      }\n\n      queue.length -= index;\n      index = 0;\n    }\n  }\n\n  queue.length = 0;\n  index = 0;\n} // `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\n\n\nvar scope = typeof global !== 'undefined' ? global : self;\nvar BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver; // MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\n\nif (typeof BrowserMutationObserver === 'function') {\n  requestFlush = makeRequestCallFromMutationObserver(flush); // MessageChannels are desirable because they give direct access to the HTML\n  // task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n  // 11-12, and in web workers in many engines.\n  // Although message channels yield to any queued rendering and IO tasks, they\n  // would be better than imposing the 4ms delay of timers.\n  // However, they do not work reliably in Internet Explorer or Safari.\n  // Internet Explorer 10 is the only browser that has setImmediate but does\n  // not have MutationObservers.\n  // Although setImmediate yields to the browser's renderer, it would be\n  // preferrable to falling back to setTimeout since it does not have\n  // the minimum 4ms penalty.\n  // Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n  // Desktop to a lesser extent) that renders both setImmediate and\n  // MessageChannel useless for the purposes of ASAP.\n  // https://github.com/kriskowal/q/issues/396\n  // Timers are implemented universally.\n  // We fall back to timers in workers in most engines, and in foreground\n  // contexts in the following browsers.\n  // However, note that even this simple case requires nuances to operate in a\n  // broad spectrum of browsers.\n  //\n  // - Firefox 3-13\n  // - Internet Explorer 6-9\n  // - iPad Safari 4.3\n  // - Lynx 2.8.7\n} else {\n  requestFlush = makeRequestCallFromTimer(flush);\n} // `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.js’s\n// `process.on(\"uncaughtException\")` or by a domain.\n\n\nrawAsap.requestFlush = requestFlush; // To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\n\nfunction makeRequestCallFromMutationObserver(callback) {\n  var toggle = 1;\n  var observer = new BrowserMutationObserver(callback);\n  var node = document.createTextNode('');\n  observer.observe(node, {\n    characterData: true\n  });\n  return function requestCall() {\n    toggle = -toggle;\n    node.data = toggle;\n  };\n} // The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\n\nfunction makeRequestCallFromTimer(callback) {\n  return function requestCall() {\n    // We dispatch a timeout with a specified delay of 0 for engines that\n    // can reliably accommodate that request. This will usually be snapped\n    // to a 4 milisecond delay, but once we're flushing, there's no delay\n    // between events.\n    var timeoutHandle = setTimeout(handleTimer, 0); // However, since this timer gets frequently dropped in Firefox\n    // workers, we enlist an interval handle that will try to fire\n    // an event 20 times per second until it succeeds.\n\n    var intervalHandle = setInterval(handleTimer, 50);\n\n    function handleTimer() {\n      // Whichever timer succeeds will cancel both timers and\n      // execute the callback.\n      clearTimeout(timeoutHandle);\n      clearInterval(intervalHandle);\n      callback();\n    }\n  };\n} // This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\n\n\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer; // ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n\n// RawTasks are recycled to reduce GC churn.\n\nvar freeTasks = []; // We queue errors to ensure they are thrown in right order (FIFO).\n// Array-as-queue is good enough here, since we are just dealing with exceptions.\n\nvar pendingErrors = [];\nvar requestErrorThrow = rawAsap.makeRequestCallFromTimer(throwFirstError);\n\nfunction throwFirstError() {\n  if (pendingErrors.length) {\n    throw pendingErrors.shift();\n  }\n}\n/**\n * Calls a task as soon as possible after returning, in its own event, with priority\n * over other events like animation, reflow, and repaint. An error thrown from an\n * event will not interrupt, nor even substantially slow down the processing of\n * other events, but will be rather postponed to a lower priority event.\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */\n\n\nfunction asap(task) {\n  var rawTask;\n\n  if (freeTasks.length) {\n    rawTask = freeTasks.pop();\n  } else {\n    rawTask = new RawTask();\n  }\n\n  rawTask.task = task;\n  rawAsap(rawTask);\n} // We wrap tasks with recyclable task objects.  A task object implements\n// `call`, just like a function.\n\nvar RawTask =\n/** @class */\nfunction () {\n  function RawTask() {}\n\n  RawTask.prototype.call = function () {\n    try {\n      this.task.call();\n    } catch (error) {\n      if (asap.onerror) {\n        // This hook exists purely for testing purposes.\n        // Its name will be periodically randomized to break any code that\n        // depends on its existence.\n        asap.onerror(error);\n      } else {\n        // In a web browser, exceptions are not fatal. However, to avoid\n        // slowing down the queue of pending tasks, we rethrow the error in a\n        // lower priority turn.\n        pendingErrors.push(error);\n        requestErrorThrow();\n      }\n    } finally {\n      this.task = null;\n      freeTasks[freeTasks.length] = this;\n    }\n  };\n\n  return RawTask;\n}();\n\nfunction _classCallCheck$g(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$e(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$e(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$e(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$e(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$f(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _slicedToArray$5(arr, i) {\n  return _arrayWithHoles$5(arr) || _iterableToArrayLimit$5(arr, i) || _unsupportedIterableToArray$8(arr, i) || _nonIterableRest$5();\n}\n\nfunction _nonIterableRest$5() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$8(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$8(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$8(o, minLen);\n}\n\nfunction _arrayLikeToArray$8(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit$5(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles$5(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction getNextHandlerId(role) {\n  var id = getNextUniqueId().toString();\n\n  switch (role) {\n    case HandlerRole.SOURCE:\n      return \"S\".concat(id);\n\n    case HandlerRole.TARGET:\n      return \"T\".concat(id);\n\n    default:\n      throw new Error(\"Unknown Handler Role: \".concat(role));\n  }\n}\n\nfunction parseRoleFromHandlerId(handlerId) {\n  switch (handlerId[0]) {\n    case 'S':\n      return HandlerRole.SOURCE;\n\n    case 'T':\n      return HandlerRole.TARGET;\n\n    default:\n      invariant(false, \"Cannot parse handler ID: \".concat(handlerId));\n  }\n}\n\nfunction mapContainsValue(map, searchValue) {\n  var entries = map.entries();\n  var isDone = false;\n\n  do {\n    var _entries$next = entries.next(),\n        done = _entries$next.done,\n        _entries$next$value = _slicedToArray$5(_entries$next.value, 2),\n        value = _entries$next$value[1];\n\n    if (value === searchValue) {\n      return true;\n    }\n\n    isDone = !!done;\n  } while (!isDone);\n\n  return false;\n}\n\nvar HandlerRegistryImpl = /*#__PURE__*/function () {\n  function HandlerRegistryImpl(store) {\n    _classCallCheck$g(this, HandlerRegistryImpl);\n\n    _defineProperty$f(this, \"types\", new Map());\n\n    _defineProperty$f(this, \"dragSources\", new Map());\n\n    _defineProperty$f(this, \"dropTargets\", new Map());\n\n    _defineProperty$f(this, \"pinnedSourceId\", null);\n\n    _defineProperty$f(this, \"pinnedSource\", null);\n\n    _defineProperty$f(this, \"store\", void 0);\n\n    this.store = store;\n  }\n\n  _createClass$e(HandlerRegistryImpl, [{\n    key: \"addSource\",\n    value: function addSource$1(type, source) {\n      validateType(type);\n      validateSourceContract(source);\n      var sourceId = this.addHandler(HandlerRole.SOURCE, type, source);\n      this.store.dispatch(addSource(sourceId));\n      return sourceId;\n    }\n  }, {\n    key: \"addTarget\",\n    value: function addTarget$1(type, target) {\n      validateType(type, true);\n      validateTargetContract(target);\n      var targetId = this.addHandler(HandlerRole.TARGET, type, target);\n      this.store.dispatch(addTarget(targetId));\n      return targetId;\n    }\n  }, {\n    key: \"containsHandler\",\n    value: function containsHandler(handler) {\n      return mapContainsValue(this.dragSources, handler) || mapContainsValue(this.dropTargets, handler);\n    }\n  }, {\n    key: \"getSource\",\n    value: function getSource(sourceId) {\n      var includePinned = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n      var isPinned = includePinned && sourceId === this.pinnedSourceId;\n      var source = isPinned ? this.pinnedSource : this.dragSources.get(sourceId);\n      return source;\n    }\n  }, {\n    key: \"getTarget\",\n    value: function getTarget(targetId) {\n      invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n      return this.dropTargets.get(targetId);\n    }\n  }, {\n    key: \"getSourceType\",\n    value: function getSourceType(sourceId) {\n      invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n      return this.types.get(sourceId);\n    }\n  }, {\n    key: \"getTargetType\",\n    value: function getTargetType(targetId) {\n      invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n      return this.types.get(targetId);\n    }\n  }, {\n    key: \"isSourceId\",\n    value: function isSourceId(handlerId) {\n      var role = parseRoleFromHandlerId(handlerId);\n      return role === HandlerRole.SOURCE;\n    }\n  }, {\n    key: \"isTargetId\",\n    value: function isTargetId(handlerId) {\n      var role = parseRoleFromHandlerId(handlerId);\n      return role === HandlerRole.TARGET;\n    }\n  }, {\n    key: \"removeSource\",\n    value: function removeSource$1(sourceId) {\n      var _this = this;\n\n      invariant(this.getSource(sourceId), 'Expected an existing source.');\n      this.store.dispatch(removeSource(sourceId));\n      asap(function () {\n        _this.dragSources.delete(sourceId);\n\n        _this.types.delete(sourceId);\n      });\n    }\n  }, {\n    key: \"removeTarget\",\n    value: function removeTarget$1(targetId) {\n      invariant(this.getTarget(targetId), 'Expected an existing target.');\n      this.store.dispatch(removeTarget(targetId));\n      this.dropTargets.delete(targetId);\n      this.types.delete(targetId);\n    }\n  }, {\n    key: \"pinSource\",\n    value: function pinSource(sourceId) {\n      var source = this.getSource(sourceId);\n      invariant(source, 'Expected an existing source.');\n      this.pinnedSourceId = sourceId;\n      this.pinnedSource = source;\n    }\n  }, {\n    key: \"unpinSource\",\n    value: function unpinSource() {\n      invariant(this.pinnedSource, 'No source is pinned at the time.');\n      this.pinnedSourceId = null;\n      this.pinnedSource = null;\n    }\n  }, {\n    key: \"addHandler\",\n    value: function addHandler(role, type, handler) {\n      var id = getNextHandlerId(role);\n      this.types.set(id, type);\n\n      if (role === HandlerRole.SOURCE) {\n        this.dragSources.set(id, handler);\n      } else if (role === HandlerRole.TARGET) {\n        this.dropTargets.set(id, handler);\n      }\n\n      return id;\n    }\n  }]);\n\n  return HandlerRegistryImpl;\n}();\n\nfunction createDragDropManager(backendFactory) {\n  var globalContext = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n  var backendOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var debugMode = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var store = makeStoreInstance(debugMode);\n  var monitor = new DragDropMonitorImpl(store, new HandlerRegistryImpl(store));\n  var manager = new DragDropManagerImpl(store, monitor);\n  var backend = backendFactory(manager, globalContext, backendOptions);\n  manager.receiveBackend(backend);\n  return manager;\n}\n\nfunction makeStoreInstance(debugMode) {\n  // TODO: if we ever make a react-native version of this,\n  // we'll need to consider how to pull off dev-tooling\n  var reduxDevTools = typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION__;\n  return createStore(reduce, debugMode && reduxDevTools && reduxDevTools({\n    name: 'dnd-core',\n    instanceId: 'dnd-core'\n  }));\n}\n\nvar _excluded = [\"children\"];\n\nfunction _slicedToArray$4(arr, i) {\n  return _arrayWithHoles$4(arr) || _iterableToArrayLimit$4(arr, i) || _unsupportedIterableToArray$7(arr, i) || _nonIterableRest$4();\n}\n\nfunction _nonIterableRest$4() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$7(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$7(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$7(o, minLen);\n}\n\nfunction _arrayLikeToArray$7(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit$4(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles$4(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\nvar refCount = 0;\nvar INSTANCE_SYM = Symbol.for('__REACT_DND_CONTEXT_INSTANCE__');\n/**\n * A React component that provides the React-DnD context\n */\n\nvar DndProvider = /*#__PURE__*/memo(function DndProvider(_ref) {\n  var children = _ref.children,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var _getDndContextValue = getDndContextValue(props),\n      _getDndContextValue2 = _slicedToArray$4(_getDndContextValue, 2),\n      manager = _getDndContextValue2[0],\n      isGlobalInstance = _getDndContextValue2[1]; // memoized from props\n\n  /**\n   * If the global context was used to store the DND context\n   * then where theres no more references to it we should\n   * clean it up to avoid memory leaks\n   */\n\n\n  useEffect(function () {\n    if (isGlobalInstance) {\n      var context = getGlobalContext();\n      ++refCount;\n      return function () {\n        if (--refCount === 0) {\n          context[INSTANCE_SYM] = null;\n        }\n      };\n    }\n  }, []);\n  return jsx(DndContext.Provider, Object.assign({\n    value: manager\n  }, {\n    children: children\n  }), void 0);\n});\n\nfunction getDndContextValue(props) {\n  if ('manager' in props) {\n    var _manager = {\n      dragDropManager: props.manager\n    };\n    return [_manager, false];\n  }\n\n  var manager = createSingletonDndContext(props.backend, props.context, props.options, props.debugMode);\n  var isGlobalInstance = !props.context;\n  return [manager, isGlobalInstance];\n}\n\nfunction createSingletonDndContext(backend) {\n  var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getGlobalContext();\n  var options = arguments.length > 2 ? arguments[2] : undefined;\n  var debugMode = arguments.length > 3 ? arguments[3] : undefined;\n  var ctx = context;\n\n  if (!ctx[INSTANCE_SYM]) {\n    ctx[INSTANCE_SYM] = {\n      dragDropManager: createDragDropManager(backend, context, options, debugMode)\n    };\n  }\n\n  return ctx[INSTANCE_SYM];\n}\n\nfunction getGlobalContext() {\n  return typeof global !== 'undefined' ? global : window;\n}\n\nfunction _classCallCheck$f(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$d(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$d(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$d(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$d(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$e(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar isCallingCanDrag = false;\nvar isCallingIsDragging = false;\nvar DragSourceMonitorImpl = /*#__PURE__*/function () {\n  function DragSourceMonitorImpl(manager) {\n    _classCallCheck$f(this, DragSourceMonitorImpl);\n\n    _defineProperty$e(this, \"internalMonitor\", void 0);\n\n    _defineProperty$e(this, \"sourceId\", null);\n\n    this.internalMonitor = manager.getMonitor();\n  }\n\n  _createClass$d(DragSourceMonitorImpl, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(sourceId) {\n      this.sourceId = sourceId;\n    }\n  }, {\n    key: \"getHandlerId\",\n    value: function getHandlerId() {\n      return this.sourceId;\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      invariant(!isCallingCanDrag, 'You may not call monitor.canDrag() inside your canDrag() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n\n      try {\n        isCallingCanDrag = true;\n        return this.internalMonitor.canDragSource(this.sourceId);\n      } finally {\n        isCallingCanDrag = false;\n      }\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging() {\n      if (!this.sourceId) {\n        return false;\n      }\n\n      invariant(!isCallingIsDragging, 'You may not call monitor.isDragging() inside your isDragging() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n\n      try {\n        isCallingIsDragging = true;\n        return this.internalMonitor.isDraggingSource(this.sourceId);\n      } finally {\n        isCallingIsDragging = false;\n      }\n    }\n  }, {\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener, options) {\n      return this.internalMonitor.subscribeToStateChange(listener, options);\n    }\n  }, {\n    key: \"isDraggingSource\",\n    value: function isDraggingSource(sourceId) {\n      return this.internalMonitor.isDraggingSource(sourceId);\n    }\n  }, {\n    key: \"isOverTarget\",\n    value: function isOverTarget(targetId, options) {\n      return this.internalMonitor.isOverTarget(targetId, options);\n    }\n  }, {\n    key: \"getTargetIds\",\n    value: function getTargetIds() {\n      return this.internalMonitor.getTargetIds();\n    }\n  }, {\n    key: \"isSourcePublic\",\n    value: function isSourcePublic() {\n      return this.internalMonitor.isSourcePublic();\n    }\n  }, {\n    key: \"getSourceId\",\n    value: function getSourceId() {\n      return this.internalMonitor.getSourceId();\n    }\n  }, {\n    key: \"subscribeToOffsetChange\",\n    value: function subscribeToOffsetChange(listener) {\n      return this.internalMonitor.subscribeToOffsetChange(listener);\n    }\n  }, {\n    key: \"canDragSource\",\n    value: function canDragSource(sourceId) {\n      return this.internalMonitor.canDragSource(sourceId);\n    }\n  }, {\n    key: \"canDropOnTarget\",\n    value: function canDropOnTarget(targetId) {\n      return this.internalMonitor.canDropOnTarget(targetId);\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.internalMonitor.getItemType();\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.internalMonitor.getItem();\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.internalMonitor.getDropResult();\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.internalMonitor.didDrop();\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.internalMonitor.getInitialClientOffset();\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.internalMonitor.getInitialSourceClientOffset();\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset() {\n      return this.internalMonitor.getSourceClientOffset();\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.internalMonitor.getClientOffset();\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset() {\n      return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n  }]);\n\n  return DragSourceMonitorImpl;\n}();\n\nfunction _classCallCheck$e(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$c(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$c(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$c(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$c(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$d(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar isCallingCanDrop = false;\nvar DropTargetMonitorImpl = /*#__PURE__*/function () {\n  function DropTargetMonitorImpl(manager) {\n    _classCallCheck$e(this, DropTargetMonitorImpl);\n\n    _defineProperty$d(this, \"internalMonitor\", void 0);\n\n    _defineProperty$d(this, \"targetId\", null);\n\n    this.internalMonitor = manager.getMonitor();\n  }\n\n  _createClass$c(DropTargetMonitorImpl, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(targetId) {\n      this.targetId = targetId;\n    }\n  }, {\n    key: \"getHandlerId\",\n    value: function getHandlerId() {\n      return this.targetId;\n    }\n  }, {\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener, options) {\n      return this.internalMonitor.subscribeToStateChange(listener, options);\n    }\n  }, {\n    key: \"canDrop\",\n    value: function canDrop() {\n      // Cut out early if the target id has not been set. This should prevent errors\n      // where the user has an older version of dnd-core like in\n      // https://github.com/react-dnd/react-dnd/issues/1310\n      if (!this.targetId) {\n        return false;\n      }\n\n      invariant(!isCallingCanDrop, 'You may not call monitor.canDrop() inside your canDrop() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor');\n\n      try {\n        isCallingCanDrop = true;\n        return this.internalMonitor.canDropOnTarget(this.targetId);\n      } finally {\n        isCallingCanDrop = false;\n      }\n    }\n  }, {\n    key: \"isOver\",\n    value: function isOver(options) {\n      if (!this.targetId) {\n        return false;\n      }\n\n      return this.internalMonitor.isOverTarget(this.targetId, options);\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.internalMonitor.getItemType();\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.internalMonitor.getItem();\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.internalMonitor.getDropResult();\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.internalMonitor.didDrop();\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.internalMonitor.getInitialClientOffset();\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.internalMonitor.getInitialSourceClientOffset();\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset() {\n      return this.internalMonitor.getSourceClientOffset();\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.internalMonitor.getClientOffset();\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset() {\n      return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n  }]);\n\n  return DropTargetMonitorImpl;\n}();\n\nfunction throwIfCompositeComponentElement(element) {\n  // Custom components can no longer be wrapped directly in React DnD 2.0\n  // so that we don't need to depend on findDOMNode() from react-dom.\n  if (typeof element.type === 'string') {\n    return;\n  }\n\n  var displayName = element.type.displayName || element.type.name || 'the component';\n  throw new Error('Only native element nodes can now be passed to React DnD connectors.' + \"You can either wrap \".concat(displayName, \" into a <div>, or turn it into a \") + 'drag source or a drop target itself.');\n}\n\nfunction wrapHookToRecognizeElement(hook) {\n  return function () {\n    var elementOrNode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null; // When passed a node, call the hook straight away.\n\n    if (! /*#__PURE__*/isValidElement(elementOrNode)) {\n      var node = elementOrNode;\n      hook(node, options); // return the node so it can be chained (e.g. when within callback refs\n      // <div ref={node => connectDragSource(connectDropTarget(node))}/>\n\n      return node;\n    } // If passed a ReactElement, clone it and attach this function as a ref.\n    // This helps us achieve a neat API where user doesn't even know that refs\n    // are being used under the hood.\n\n\n    var element = elementOrNode;\n    throwIfCompositeComponentElement(element); // When no options are passed, use the hook directly\n\n    var ref = options ? function (node) {\n      return hook(node, options);\n    } : hook;\n    return cloneWithRef(element, ref);\n  };\n}\n\nfunction wrapConnectorHooks(hooks) {\n  var wrappedHooks = {};\n  Object.keys(hooks).forEach(function (key) {\n    var hook = hooks[key]; // ref objects should be passed straight through without wrapping\n\n    if (key.endsWith('Ref')) {\n      wrappedHooks[key] = hooks[key];\n    } else {\n      var wrappedHook = wrapHookToRecognizeElement(hook);\n\n      wrappedHooks[key] = function () {\n        return wrappedHook;\n      };\n    }\n  });\n  return wrappedHooks;\n}\n\nfunction setRef(ref, node) {\n  if (typeof ref === 'function') {\n    ref(node);\n  } else {\n    ref.current = node;\n  }\n}\n\nfunction cloneWithRef(element, newRef) {\n  var previousRef = element.ref;\n  invariant(typeof previousRef !== 'string', 'Cannot connect React DnD to an element with an existing string ref. ' + 'Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. ' + 'Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs');\n\n  if (!previousRef) {\n    // When there is no ref on the element, use the new ref directly\n    return /*#__PURE__*/cloneElement(element, {\n      ref: newRef\n    });\n  } else {\n    return /*#__PURE__*/cloneElement(element, {\n      ref: function ref(node) {\n        setRef(previousRef, node);\n        setRef(newRef, node);\n      }\n    });\n  }\n}\n\nfunction _typeof$3(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof$3 = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof$3 = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof$3(obj);\n}\n\nfunction isRef(obj) {\n  return (// eslint-disable-next-line no-prototype-builtins\n    obj !== null && _typeof$3(obj) === 'object' && Object.prototype.hasOwnProperty.call(obj, 'current')\n  );\n}\n\nfunction shallowEqual(objA, objB, compare, compareContext) {\n  var compareResult = compare ? compare.call(compareContext, objA, objB) : void 0;\n\n  if (compareResult !== void 0) {\n    return !!compareResult;\n  }\n\n  if (objA === objB) {\n    return true;\n  }\n\n  if (typeof objA !== 'object' || !objA || typeof objB !== 'object' || !objB) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB); // Test for A's keys different from B.\n\n  for (var idx = 0; idx < keysA.length; idx++) {\n    var key = keysA[idx];\n\n    if (!bHasOwnProperty(key)) {\n      return false;\n    }\n\n    var valueA = objA[key];\n    var valueB = objB[key];\n    compareResult = compare ? compare.call(compareContext, valueA, valueB, key) : void 0;\n\n    if (compareResult === false || compareResult === void 0 && valueA !== valueB) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction _classCallCheck$d(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$b(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$b(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$b(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$b(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$c(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar SourceConnector = /*#__PURE__*/function () {\n  // The drop target may either be attached via ref or connect function\n  // The drag preview may either be attached via ref or connect function\n  function SourceConnector(backend) {\n    var _this = this;\n\n    _classCallCheck$d(this, SourceConnector);\n\n    _defineProperty$c(this, \"hooks\", wrapConnectorHooks({\n      dragSource: function dragSource(node, options) {\n        _this.clearDragSource();\n\n        _this.dragSourceOptions = options || null;\n\n        if (isRef(node)) {\n          _this.dragSourceRef = node;\n        } else {\n          _this.dragSourceNode = node;\n        }\n\n        _this.reconnectDragSource();\n      },\n      dragPreview: function dragPreview(node, options) {\n        _this.clearDragPreview();\n\n        _this.dragPreviewOptions = options || null;\n\n        if (isRef(node)) {\n          _this.dragPreviewRef = node;\n        } else {\n          _this.dragPreviewNode = node;\n        }\n\n        _this.reconnectDragPreview();\n      }\n    }));\n\n    _defineProperty$c(this, \"handlerId\", null);\n\n    _defineProperty$c(this, \"dragSourceRef\", null);\n\n    _defineProperty$c(this, \"dragSourceNode\", void 0);\n\n    _defineProperty$c(this, \"dragSourceOptionsInternal\", null);\n\n    _defineProperty$c(this, \"dragSourceUnsubscribe\", void 0);\n\n    _defineProperty$c(this, \"dragPreviewRef\", null);\n\n    _defineProperty$c(this, \"dragPreviewNode\", void 0);\n\n    _defineProperty$c(this, \"dragPreviewOptionsInternal\", null);\n\n    _defineProperty$c(this, \"dragPreviewUnsubscribe\", void 0);\n\n    _defineProperty$c(this, \"lastConnectedHandlerId\", null);\n\n    _defineProperty$c(this, \"lastConnectedDragSource\", null);\n\n    _defineProperty$c(this, \"lastConnectedDragSourceOptions\", null);\n\n    _defineProperty$c(this, \"lastConnectedDragPreview\", null);\n\n    _defineProperty$c(this, \"lastConnectedDragPreviewOptions\", null);\n\n    _defineProperty$c(this, \"backend\", void 0);\n\n    this.backend = backend;\n  }\n\n  _createClass$b(SourceConnector, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(newHandlerId) {\n      if (this.handlerId === newHandlerId) {\n        return;\n      }\n\n      this.handlerId = newHandlerId;\n      this.reconnect();\n    }\n  }, {\n    key: \"connectTarget\",\n    get: function get() {\n      return this.dragSource;\n    }\n  }, {\n    key: \"dragSourceOptions\",\n    get: function get() {\n      return this.dragSourceOptionsInternal;\n    },\n    set: function set(options) {\n      this.dragSourceOptionsInternal = options;\n    }\n  }, {\n    key: \"dragPreviewOptions\",\n    get: function get() {\n      return this.dragPreviewOptionsInternal;\n    },\n    set: function set(options) {\n      this.dragPreviewOptionsInternal = options;\n    }\n  }, {\n    key: \"reconnect\",\n    value: function reconnect() {\n      this.reconnectDragSource();\n      this.reconnectDragPreview();\n    }\n  }, {\n    key: \"reconnectDragSource\",\n    value: function reconnectDragSource() {\n      var dragSource = this.dragSource; // if nothing has changed then don't resubscribe\n\n      var didChange = this.didHandlerIdChange() || this.didConnectedDragSourceChange() || this.didDragSourceOptionsChange();\n\n      if (didChange) {\n        this.disconnectDragSource();\n      }\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dragSource) {\n        this.lastConnectedDragSource = dragSource;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDragSource = dragSource;\n        this.lastConnectedDragSourceOptions = this.dragSourceOptions;\n        this.dragSourceUnsubscribe = this.backend.connectDragSource(this.handlerId, dragSource, this.dragSourceOptions);\n      }\n    }\n  }, {\n    key: \"reconnectDragPreview\",\n    value: function reconnectDragPreview() {\n      var dragPreview = this.dragPreview; // if nothing has changed then don't resubscribe\n\n      var didChange = this.didHandlerIdChange() || this.didConnectedDragPreviewChange() || this.didDragPreviewOptionsChange();\n\n      if (didChange) {\n        this.disconnectDragPreview();\n      }\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dragPreview) {\n        this.lastConnectedDragPreview = dragPreview;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDragPreview = dragPreview;\n        this.lastConnectedDragPreviewOptions = this.dragPreviewOptions;\n        this.dragPreviewUnsubscribe = this.backend.connectDragPreview(this.handlerId, dragPreview, this.dragPreviewOptions);\n      }\n    }\n  }, {\n    key: \"didHandlerIdChange\",\n    value: function didHandlerIdChange() {\n      return this.lastConnectedHandlerId !== this.handlerId;\n    }\n  }, {\n    key: \"didConnectedDragSourceChange\",\n    value: function didConnectedDragSourceChange() {\n      return this.lastConnectedDragSource !== this.dragSource;\n    }\n  }, {\n    key: \"didConnectedDragPreviewChange\",\n    value: function didConnectedDragPreviewChange() {\n      return this.lastConnectedDragPreview !== this.dragPreview;\n    }\n  }, {\n    key: \"didDragSourceOptionsChange\",\n    value: function didDragSourceOptionsChange() {\n      return !shallowEqual(this.lastConnectedDragSourceOptions, this.dragSourceOptions);\n    }\n  }, {\n    key: \"didDragPreviewOptionsChange\",\n    value: function didDragPreviewOptionsChange() {\n      return !shallowEqual(this.lastConnectedDragPreviewOptions, this.dragPreviewOptions);\n    }\n  }, {\n    key: \"disconnectDragSource\",\n    value: function disconnectDragSource() {\n      if (this.dragSourceUnsubscribe) {\n        this.dragSourceUnsubscribe();\n        this.dragSourceUnsubscribe = undefined;\n      }\n    }\n  }, {\n    key: \"disconnectDragPreview\",\n    value: function disconnectDragPreview() {\n      if (this.dragPreviewUnsubscribe) {\n        this.dragPreviewUnsubscribe();\n        this.dragPreviewUnsubscribe = undefined;\n        this.dragPreviewNode = null;\n        this.dragPreviewRef = null;\n      }\n    }\n  }, {\n    key: \"dragSource\",\n    get: function get() {\n      return this.dragSourceNode || this.dragSourceRef && this.dragSourceRef.current;\n    }\n  }, {\n    key: \"dragPreview\",\n    get: function get() {\n      return this.dragPreviewNode || this.dragPreviewRef && this.dragPreviewRef.current;\n    }\n  }, {\n    key: \"clearDragSource\",\n    value: function clearDragSource() {\n      this.dragSourceNode = null;\n      this.dragSourceRef = null;\n    }\n  }, {\n    key: \"clearDragPreview\",\n    value: function clearDragPreview() {\n      this.dragPreviewNode = null;\n      this.dragPreviewRef = null;\n    }\n  }]);\n\n  return SourceConnector;\n}();\n\nfunction _classCallCheck$c(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$a(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$a(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$a(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$a(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$b(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar TargetConnector = /*#__PURE__*/function () {\n  // The drop target may either be attached via ref or connect function\n  function TargetConnector(backend) {\n    var _this = this;\n\n    _classCallCheck$c(this, TargetConnector);\n\n    _defineProperty$b(this, \"hooks\", wrapConnectorHooks({\n      dropTarget: function dropTarget(node, options) {\n        _this.clearDropTarget();\n\n        _this.dropTargetOptions = options;\n\n        if (isRef(node)) {\n          _this.dropTargetRef = node;\n        } else {\n          _this.dropTargetNode = node;\n        }\n\n        _this.reconnect();\n      }\n    }));\n\n    _defineProperty$b(this, \"handlerId\", null);\n\n    _defineProperty$b(this, \"dropTargetRef\", null);\n\n    _defineProperty$b(this, \"dropTargetNode\", void 0);\n\n    _defineProperty$b(this, \"dropTargetOptionsInternal\", null);\n\n    _defineProperty$b(this, \"unsubscribeDropTarget\", void 0);\n\n    _defineProperty$b(this, \"lastConnectedHandlerId\", null);\n\n    _defineProperty$b(this, \"lastConnectedDropTarget\", null);\n\n    _defineProperty$b(this, \"lastConnectedDropTargetOptions\", null);\n\n    _defineProperty$b(this, \"backend\", void 0);\n\n    this.backend = backend;\n  }\n\n  _createClass$a(TargetConnector, [{\n    key: \"connectTarget\",\n    get: function get() {\n      return this.dropTarget;\n    }\n  }, {\n    key: \"reconnect\",\n    value: function reconnect() {\n      // if nothing has changed then don't resubscribe\n      var didChange = this.didHandlerIdChange() || this.didDropTargetChange() || this.didOptionsChange();\n\n      if (didChange) {\n        this.disconnectDropTarget();\n      }\n\n      var dropTarget = this.dropTarget;\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dropTarget) {\n        this.lastConnectedDropTarget = dropTarget;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDropTarget = dropTarget;\n        this.lastConnectedDropTargetOptions = this.dropTargetOptions;\n        this.unsubscribeDropTarget = this.backend.connectDropTarget(this.handlerId, dropTarget, this.dropTargetOptions);\n      }\n    }\n  }, {\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(newHandlerId) {\n      if (newHandlerId === this.handlerId) {\n        return;\n      }\n\n      this.handlerId = newHandlerId;\n      this.reconnect();\n    }\n  }, {\n    key: \"dropTargetOptions\",\n    get: function get() {\n      return this.dropTargetOptionsInternal;\n    },\n    set: function set(options) {\n      this.dropTargetOptionsInternal = options;\n    }\n  }, {\n    key: \"didHandlerIdChange\",\n    value: function didHandlerIdChange() {\n      return this.lastConnectedHandlerId !== this.handlerId;\n    }\n  }, {\n    key: \"didDropTargetChange\",\n    value: function didDropTargetChange() {\n      return this.lastConnectedDropTarget !== this.dropTarget;\n    }\n  }, {\n    key: \"didOptionsChange\",\n    value: function didOptionsChange() {\n      return !shallowEqual(this.lastConnectedDropTargetOptions, this.dropTargetOptions);\n    }\n  }, {\n    key: \"disconnectDropTarget\",\n    value: function disconnectDropTarget() {\n      if (this.unsubscribeDropTarget) {\n        this.unsubscribeDropTarget();\n        this.unsubscribeDropTarget = undefined;\n      }\n    }\n  }, {\n    key: \"dropTarget\",\n    get: function get() {\n      return this.dropTargetNode || this.dropTargetRef && this.dropTargetRef.current;\n    }\n  }, {\n    key: \"clearDropTarget\",\n    value: function clearDropTarget() {\n      this.dropTargetRef = null;\n      this.dropTargetNode = null;\n    }\n  }]);\n\n  return TargetConnector;\n}();\n\nfunction registerTarget(type, target, manager) {\n  var registry = manager.getRegistry();\n  var targetId = registry.addTarget(type, target);\n  return [targetId, function () {\n    return registry.removeTarget(targetId);\n  }];\n}\nfunction registerSource(type, source, manager) {\n  var registry = manager.getRegistry();\n  var sourceId = registry.addSource(type, source);\n  return [sourceId, function () {\n    return registry.removeSource(sourceId);\n  }];\n}\n\nfunction _typeof$2(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof$2 = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof$2 = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof$2(obj);\n}\nfunction isClassComponent(Component) {\n  return Component && Component.prototype && typeof Component.prototype.render === 'function';\n}\nfunction isRefForwardingComponent(C) {\n  var _item$$$typeof;\n\n  var item = C;\n  return (item === null || item === void 0 ? void 0 : (_item$$$typeof = item.$$typeof) === null || _item$$$typeof === void 0 ? void 0 : _item$$$typeof.toString()) === 'Symbol(react.forward_ref)';\n}\nfunction isRefable(C) {\n  return isClassComponent(C) || isRefForwardingComponent(C);\n}\nfunction checkDecoratorArguments(functionName, signature) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var i = 0; i < (arguments.length <= 2 ? 0 : arguments.length - 2); i++) {\n      var arg = i + 2 < 2 || arguments.length <= i + 2 ? undefined : arguments[i + 2];\n\n      if (arg && arg.prototype && arg.prototype.render) {\n        // eslint-disable-next-line no-console\n        console.error('You seem to be applying the arguments in the wrong order. ' + \"It should be \".concat(functionName, \"(\").concat(signature, \")(Component), not the other way around. \") + 'Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#you-seem-to-be-applying-the-arguments-in-the-wrong-order');\n        return;\n      }\n    }\n  }\n}\n\nfunction isObjectLike(input) {\n  return _typeof$2(input) === 'object' && input !== null;\n}\n\nfunction isPlainObject(input) {\n  if (!isObjectLike(input)) {\n    return false;\n  }\n\n  if (Object.getPrototypeOf(input) === null) {\n    return true;\n  }\n\n  var proto = input;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(input) === proto;\n}\n\nvar reactIs$1 = {exports: {}};\n\nvar reactIs_production_min = {};\n\n/** @license React v16.13.1\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar b = \"function\" === typeof Symbol && Symbol.for,\n    c = b ? Symbol.for(\"react.element\") : 60103,\n    d = b ? Symbol.for(\"react.portal\") : 60106,\n    e = b ? Symbol.for(\"react.fragment\") : 60107,\n    f = b ? Symbol.for(\"react.strict_mode\") : 60108,\n    g = b ? Symbol.for(\"react.profiler\") : 60114,\n    h = b ? Symbol.for(\"react.provider\") : 60109,\n    k = b ? Symbol.for(\"react.context\") : 60110,\n    l = b ? Symbol.for(\"react.async_mode\") : 60111,\n    m = b ? Symbol.for(\"react.concurrent_mode\") : 60111,\n    n = b ? Symbol.for(\"react.forward_ref\") : 60112,\n    p = b ? Symbol.for(\"react.suspense\") : 60113,\n    q = b ? Symbol.for(\"react.suspense_list\") : 60120,\n    r = b ? Symbol.for(\"react.memo\") : 60115,\n    t = b ? Symbol.for(\"react.lazy\") : 60116,\n    v = b ? Symbol.for(\"react.block\") : 60121,\n    w = b ? Symbol.for(\"react.fundamental\") : 60117,\n    x = b ? Symbol.for(\"react.responder\") : 60118,\n    y = b ? Symbol.for(\"react.scope\") : 60119;\n\nfunction z(a) {\n  if (\"object\" === typeof a && null !== a) {\n    var u = a.$$typeof;\n\n    switch (u) {\n      case c:\n        switch (a = a.type, a) {\n          case l:\n          case m:\n          case e:\n          case g:\n          case f:\n          case p:\n            return a;\n\n          default:\n            switch (a = a && a.$$typeof, a) {\n              case k:\n              case n:\n              case t:\n              case r:\n              case h:\n                return a;\n\n              default:\n                return u;\n            }\n\n        }\n\n      case d:\n        return u;\n    }\n  }\n}\n\nfunction A(a) {\n  return z(a) === m;\n}\n\nreactIs_production_min.AsyncMode = l;\nreactIs_production_min.ConcurrentMode = m;\nreactIs_production_min.ContextConsumer = k;\nreactIs_production_min.ContextProvider = h;\nreactIs_production_min.Element = c;\nreactIs_production_min.ForwardRef = n;\nreactIs_production_min.Fragment = e;\nreactIs_production_min.Lazy = t;\nreactIs_production_min.Memo = r;\nreactIs_production_min.Portal = d;\nreactIs_production_min.Profiler = g;\nreactIs_production_min.StrictMode = f;\nreactIs_production_min.Suspense = p;\n\nreactIs_production_min.isAsyncMode = function (a) {\n  return A(a) || z(a) === l;\n};\n\nreactIs_production_min.isConcurrentMode = A;\n\nreactIs_production_min.isContextConsumer = function (a) {\n  return z(a) === k;\n};\n\nreactIs_production_min.isContextProvider = function (a) {\n  return z(a) === h;\n};\n\nreactIs_production_min.isElement = function (a) {\n  return \"object\" === typeof a && null !== a && a.$$typeof === c;\n};\n\nreactIs_production_min.isForwardRef = function (a) {\n  return z(a) === n;\n};\n\nreactIs_production_min.isFragment = function (a) {\n  return z(a) === e;\n};\n\nreactIs_production_min.isLazy = function (a) {\n  return z(a) === t;\n};\n\nreactIs_production_min.isMemo = function (a) {\n  return z(a) === r;\n};\n\nreactIs_production_min.isPortal = function (a) {\n  return z(a) === d;\n};\n\nreactIs_production_min.isProfiler = function (a) {\n  return z(a) === g;\n};\n\nreactIs_production_min.isStrictMode = function (a) {\n  return z(a) === f;\n};\n\nreactIs_production_min.isSuspense = function (a) {\n  return z(a) === p;\n};\n\nreactIs_production_min.isValidElementType = function (a) {\n  return \"string\" === typeof a || \"function\" === typeof a || a === e || a === m || a === g || a === f || a === p || a === q || \"object\" === typeof a && null !== a && (a.$$typeof === t || a.$$typeof === r || a.$$typeof === h || a.$$typeof === k || a.$$typeof === n || a.$$typeof === w || a.$$typeof === x || a.$$typeof === y || a.$$typeof === v);\n};\n\nreactIs_production_min.typeOf = z;\n\nvar reactIs_development = {};\n\n/** @license React v16.13.1\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function () {\n    // nor polyfill, then a plain number is used for performance.\n\n    var hasSymbol = typeof Symbol === 'function' && Symbol.for;\n    var REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\n    var REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\n    var REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\n    var REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\n    var REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\n    var REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\n    var REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary\n    // (unstable) APIs that have been removed. Can we remove the symbols?\n\n    var REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\n    var REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\n    var REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\n    var REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\n    var REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;\n    var REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\n    var REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\n    var REACT_BLOCK_TYPE = hasSymbol ? Symbol.for('react.block') : 0xead9;\n    var REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;\n    var REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;\n    var REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;\n\n    function isValidElementType(type) {\n      return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n      type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE || type.$$typeof === REACT_BLOCK_TYPE);\n    }\n\n    function typeOf(object) {\n      if (typeof object === 'object' && object !== null) {\n        var $$typeof = object.$$typeof;\n\n        switch ($$typeof) {\n          case REACT_ELEMENT_TYPE:\n            var type = object.type;\n\n            switch (type) {\n              case REACT_ASYNC_MODE_TYPE:\n              case REACT_CONCURRENT_MODE_TYPE:\n              case REACT_FRAGMENT_TYPE:\n              case REACT_PROFILER_TYPE:\n              case REACT_STRICT_MODE_TYPE:\n              case REACT_SUSPENSE_TYPE:\n                return type;\n\n              default:\n                var $$typeofType = type && type.$$typeof;\n\n                switch ($$typeofType) {\n                  case REACT_CONTEXT_TYPE:\n                  case REACT_FORWARD_REF_TYPE:\n                  case REACT_LAZY_TYPE:\n                  case REACT_MEMO_TYPE:\n                  case REACT_PROVIDER_TYPE:\n                    return $$typeofType;\n\n                  default:\n                    return $$typeof;\n                }\n\n            }\n\n          case REACT_PORTAL_TYPE:\n            return $$typeof;\n        }\n      }\n\n      return undefined;\n    } // AsyncMode is deprecated along with isAsyncMode\n\n\n    var AsyncMode = REACT_ASYNC_MODE_TYPE;\n    var ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\n    var ContextConsumer = REACT_CONTEXT_TYPE;\n    var ContextProvider = REACT_PROVIDER_TYPE;\n    var Element = REACT_ELEMENT_TYPE;\n    var ForwardRef = REACT_FORWARD_REF_TYPE;\n    var Fragment = REACT_FRAGMENT_TYPE;\n    var Lazy = REACT_LAZY_TYPE;\n    var Memo = REACT_MEMO_TYPE;\n    var Portal = REACT_PORTAL_TYPE;\n    var Profiler = REACT_PROFILER_TYPE;\n    var StrictMode = REACT_STRICT_MODE_TYPE;\n    var Suspense = REACT_SUSPENSE_TYPE;\n    var hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated\n\n    function isAsyncMode(object) {\n      {\n        if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n          hasWarnedAboutDeprecatedIsAsyncMode = true; // Using console['warn'] to evade Babel and ESLint\n\n          console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n        }\n      }\n      return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n    }\n\n    function isConcurrentMode(object) {\n      return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n    }\n\n    function isContextConsumer(object) {\n      return typeOf(object) === REACT_CONTEXT_TYPE;\n    }\n\n    function isContextProvider(object) {\n      return typeOf(object) === REACT_PROVIDER_TYPE;\n    }\n\n    function isElement(object) {\n      return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n    }\n\n    function isForwardRef(object) {\n      return typeOf(object) === REACT_FORWARD_REF_TYPE;\n    }\n\n    function isFragment(object) {\n      return typeOf(object) === REACT_FRAGMENT_TYPE;\n    }\n\n    function isLazy(object) {\n      return typeOf(object) === REACT_LAZY_TYPE;\n    }\n\n    function isMemo(object) {\n      return typeOf(object) === REACT_MEMO_TYPE;\n    }\n\n    function isPortal(object) {\n      return typeOf(object) === REACT_PORTAL_TYPE;\n    }\n\n    function isProfiler(object) {\n      return typeOf(object) === REACT_PROFILER_TYPE;\n    }\n\n    function isStrictMode(object) {\n      return typeOf(object) === REACT_STRICT_MODE_TYPE;\n    }\n\n    function isSuspense(object) {\n      return typeOf(object) === REACT_SUSPENSE_TYPE;\n    }\n\n    reactIs_development.AsyncMode = AsyncMode;\n    reactIs_development.ConcurrentMode = ConcurrentMode;\n    reactIs_development.ContextConsumer = ContextConsumer;\n    reactIs_development.ContextProvider = ContextProvider;\n    reactIs_development.Element = Element;\n    reactIs_development.ForwardRef = ForwardRef;\n    reactIs_development.Fragment = Fragment;\n    reactIs_development.Lazy = Lazy;\n    reactIs_development.Memo = Memo;\n    reactIs_development.Portal = Portal;\n    reactIs_development.Profiler = Profiler;\n    reactIs_development.StrictMode = StrictMode;\n    reactIs_development.Suspense = Suspense;\n    reactIs_development.isAsyncMode = isAsyncMode;\n    reactIs_development.isConcurrentMode = isConcurrentMode;\n    reactIs_development.isContextConsumer = isContextConsumer;\n    reactIs_development.isContextProvider = isContextProvider;\n    reactIs_development.isElement = isElement;\n    reactIs_development.isForwardRef = isForwardRef;\n    reactIs_development.isFragment = isFragment;\n    reactIs_development.isLazy = isLazy;\n    reactIs_development.isMemo = isMemo;\n    reactIs_development.isPortal = isPortal;\n    reactIs_development.isProfiler = isProfiler;\n    reactIs_development.isStrictMode = isStrictMode;\n    reactIs_development.isSuspense = isSuspense;\n    reactIs_development.isValidElementType = isValidElementType;\n    reactIs_development.typeOf = typeOf;\n  })();\n}\n\nif (process.env.NODE_ENV === 'production') {\n  reactIs$1.exports = reactIs_production_min;\n} else {\n  reactIs$1.exports = reactIs_development;\n}\n\nvar reactIs = reactIs$1.exports;\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\n\n\nvar REACT_STATICS = {\n  childContextTypes: true,\n  contextType: true,\n  contextTypes: true,\n  defaultProps: true,\n  displayName: true,\n  getDefaultProps: true,\n  getDerivedStateFromError: true,\n  getDerivedStateFromProps: true,\n  mixins: true,\n  propTypes: true,\n  type: true\n};\nvar KNOWN_STATICS = {\n  name: true,\n  length: true,\n  prototype: true,\n  caller: true,\n  callee: true,\n  arguments: true,\n  arity: true\n};\nvar FORWARD_REF_STATICS = {\n  '$$typeof': true,\n  render: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true\n};\nvar MEMO_STATICS = {\n  '$$typeof': true,\n  compare: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true,\n  type: true\n};\nvar TYPE_STATICS = {};\nTYPE_STATICS[reactIs.ForwardRef] = FORWARD_REF_STATICS;\nTYPE_STATICS[reactIs.Memo] = MEMO_STATICS;\n\nfunction getStatics(component) {\n  // React v16.11 and below\n  if (reactIs.isMemo(component)) {\n    return MEMO_STATICS;\n  } // React v16.12 and above\n\n\n  return TYPE_STATICS[component['$$typeof']] || REACT_STATICS;\n}\n\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols$1 = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = Object.prototype;\n\nfunction hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n  if (typeof sourceComponent !== 'string') {\n    // don't hoist over string (html) components\n    if (objectPrototype) {\n      var inheritedComponent = getPrototypeOf(sourceComponent);\n\n      if (inheritedComponent && inheritedComponent !== objectPrototype) {\n        hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n      }\n    }\n\n    var keys = getOwnPropertyNames(sourceComponent);\n\n    if (getOwnPropertySymbols$1) {\n      keys = keys.concat(getOwnPropertySymbols$1(sourceComponent));\n    }\n\n    var targetStatics = getStatics(targetComponent);\n    var sourceStatics = getStatics(sourceComponent);\n\n    for (var i = 0; i < keys.length; ++i) {\n      var key = keys[i];\n\n      if (!KNOWN_STATICS[key] && !(blacklist && blacklist[key]) && !(sourceStatics && sourceStatics[key]) && !(targetStatics && targetStatics[key])) {\n        var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n\n        try {\n          // Avoid failures from read-only properties\n          defineProperty(targetComponent, key, descriptor);\n        } catch (e) {}\n      }\n    }\n  }\n\n  return targetComponent;\n}\n\nvar hoistNonReactStatics_cjs = hoistNonReactStatics;\n\nvar hoistStatics = hoistNonReactStatics_cjs;\n\nfunction _typeof$1(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof$1 = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof$1 = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof$1(obj);\n}\n\nfunction _classCallCheck$b(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$9(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$9(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$9(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$9(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof$1(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _defineProperty$a(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/**\n * @param collect The props collector function\n * @param options The DnD options\n */\n\nfunction DragLayer(collect) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  checkDecoratorArguments('DragLayer', 'collect[, options]', collect, options);\n  invariant(typeof collect === 'function', 'Expected \"collect\" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ', 'Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer', collect);\n  invariant(isPlainObject(options), 'Expected \"options\" provided as the second argument to DragLayer to be a plain object when specified. ' + 'Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer', options);\n  return function decorateLayer(DecoratedComponent) {\n    var Decorated = DecoratedComponent;\n    var _options$arePropsEqua = options.arePropsEqual,\n        arePropsEqual = _options$arePropsEqua === void 0 ? shallowEqual : _options$arePropsEqua;\n    var displayName = Decorated.displayName || Decorated.name || 'Component';\n\n    var DragLayerContainer = /*#__PURE__*/function (_Component) {\n      _inherits(DragLayerContainer, _Component);\n\n      var _super = _createSuper(DragLayerContainer);\n\n      function DragLayerContainer() {\n        var _this;\n\n        _classCallCheck$b(this, DragLayerContainer);\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        _this = _super.call.apply(_super, [this].concat(args));\n\n        _defineProperty$a(_assertThisInitialized(_this), \"manager\", void 0);\n\n        _defineProperty$a(_assertThisInitialized(_this), \"isCurrentlyMounted\", false);\n\n        _defineProperty$a(_assertThisInitialized(_this), \"unsubscribeFromOffsetChange\", void 0);\n\n        _defineProperty$a(_assertThisInitialized(_this), \"unsubscribeFromStateChange\", void 0);\n\n        _defineProperty$a(_assertThisInitialized(_this), \"ref\", /*#__PURE__*/createRef());\n\n        _defineProperty$a(_assertThisInitialized(_this), \"handleChange\", function () {\n          if (!_this.isCurrentlyMounted) {\n            return;\n          }\n\n          var nextState = _this.getCurrentState();\n\n          if (!shallowEqual(nextState, _this.state)) {\n            _this.setState(nextState);\n          }\n        });\n\n        return _this;\n      }\n\n      _createClass$9(DragLayerContainer, [{\n        key: \"getDecoratedComponentInstance\",\n        value: function getDecoratedComponentInstance() {\n          invariant(this.ref.current, 'In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()');\n          return this.ref.current;\n        }\n      }, {\n        key: \"shouldComponentUpdate\",\n        value: function shouldComponentUpdate(nextProps, nextState) {\n          return !arePropsEqual(nextProps, this.props) || !shallowEqual(nextState, this.state);\n        }\n      }, {\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          this.isCurrentlyMounted = true;\n          this.handleChange();\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          this.isCurrentlyMounted = false;\n\n          if (this.unsubscribeFromOffsetChange) {\n            this.unsubscribeFromOffsetChange();\n            this.unsubscribeFromOffsetChange = undefined;\n          }\n\n          if (this.unsubscribeFromStateChange) {\n            this.unsubscribeFromStateChange();\n            this.unsubscribeFromStateChange = undefined;\n          }\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this2 = this;\n\n          return jsx(DndContext.Consumer, {\n            children: function children(_ref) {\n              var dragDropManager = _ref.dragDropManager;\n\n              if (dragDropManager === undefined) {\n                return null;\n              }\n\n              _this2.receiveDragDropManager(dragDropManager); // Let componentDidMount fire to initialize the collected state\n\n\n              if (!_this2.isCurrentlyMounted) {\n                return null;\n              }\n\n              return jsx(Decorated, Object.assign({}, _this2.props, _this2.state, {\n                ref: isRefable(Decorated) ? _this2.ref : null\n              }), void 0);\n            }\n          }, void 0);\n        }\n      }, {\n        key: \"receiveDragDropManager\",\n        value: function receiveDragDropManager(dragDropManager) {\n          if (this.manager !== undefined) {\n            return;\n          }\n\n          this.manager = dragDropManager;\n          invariant(_typeof$1(dragDropManager) === 'object', 'Could not find the drag and drop manager in the context of %s. ' + 'Make sure to render a DndProvider component in your top-level component. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context', displayName, displayName);\n          var monitor = this.manager.getMonitor();\n          this.unsubscribeFromOffsetChange = monitor.subscribeToOffsetChange(this.handleChange);\n          this.unsubscribeFromStateChange = monitor.subscribeToStateChange(this.handleChange);\n        }\n      }, {\n        key: \"getCurrentState\",\n        value: function getCurrentState() {\n          if (!this.manager) {\n            return {};\n          }\n\n          var monitor = this.manager.getMonitor();\n          return collect(monitor, this.props);\n        }\n      }]);\n\n      return DragLayerContainer;\n    }(Component);\n\n    _defineProperty$a(DragLayerContainer, \"displayName\", \"DragLayer(\".concat(displayName, \")\"));\n\n    _defineProperty$a(DragLayerContainer, \"DecoratedComponent\", DecoratedComponent);\n\n    return hoistStatics(DragLayerContainer, DecoratedComponent);\n  };\n}\n\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect;\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck$a(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$8(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$8(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$8(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$8(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$9(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar DragSourceImpl = /*#__PURE__*/function () {\n  function DragSourceImpl(spec, monitor, connector) {\n    _classCallCheck$a(this, DragSourceImpl);\n\n    _defineProperty$9(this, \"spec\", void 0);\n\n    _defineProperty$9(this, \"monitor\", void 0);\n\n    _defineProperty$9(this, \"connector\", void 0);\n\n    this.spec = spec;\n    this.monitor = monitor;\n    this.connector = connector;\n  }\n\n  _createClass$8(DragSourceImpl, [{\n    key: \"beginDrag\",\n    value: function beginDrag() {\n      var _result;\n\n      var spec = this.spec;\n      var monitor = this.monitor;\n      var result = null;\n\n      if (_typeof(spec.item) === 'object') {\n        result = spec.item;\n      } else if (typeof spec.item === 'function') {\n        result = spec.item(monitor);\n      } else {\n        result = {};\n      }\n\n      return (_result = result) !== null && _result !== void 0 ? _result : null;\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n\n      if (typeof spec.canDrag === 'boolean') {\n        return spec.canDrag;\n      } else if (typeof spec.canDrag === 'function') {\n        return spec.canDrag(monitor);\n      } else {\n        return true;\n      }\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging(globalMonitor, target) {\n      var spec = this.spec;\n      var monitor = this.monitor;\n      var isDragging = spec.isDragging;\n      return isDragging ? isDragging(monitor) : target === globalMonitor.getSourceId();\n    }\n  }, {\n    key: \"endDrag\",\n    value: function endDrag() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n      var connector = this.connector;\n      var end = spec.end;\n\n      if (end) {\n        end(monitor.getItem(), monitor);\n      }\n\n      connector.reconnect();\n    }\n  }]);\n\n  return DragSourceImpl;\n}();\n\nfunction useDragSource(spec, monitor, connector) {\n  var handler = useMemo(function () {\n    return new DragSourceImpl(spec, monitor, connector);\n  }, [monitor, connector]);\n  useEffect(function () {\n    handler.spec = spec;\n  }, [spec]);\n  return handler;\n}\n\n/**\n * A hook to retrieve the DragDropManager from Context\n */\n\nfunction useDragDropManager() {\n  var _useContext = useContext(DndContext),\n      dragDropManager = _useContext.dragDropManager;\n\n  invariant(dragDropManager != null, 'Expected drag drop context');\n  return dragDropManager;\n}\n\nfunction useDragType(spec) {\n  return useMemo(function () {\n    var result = spec.type;\n    invariant(result != null, 'spec.type must be defined');\n    return result;\n  }, [spec]);\n}\n\nfunction _slicedToArray$3(arr, i) {\n  return _arrayWithHoles$3(arr) || _iterableToArrayLimit$3(arr, i) || _unsupportedIterableToArray$6(arr, i) || _nonIterableRest$3();\n}\n\nfunction _nonIterableRest$3() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$6(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$6(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$6(o, minLen);\n}\n\nfunction _arrayLikeToArray$6(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit$3(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles$3(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction useRegisteredDragSource(spec, monitor, connector) {\n  var manager = useDragDropManager();\n  var handler = useDragSource(spec, monitor, connector);\n  var itemType = useDragType(spec);\n  useIsomorphicLayoutEffect(function registerDragSource() {\n    if (itemType != null) {\n      var _registerSource = registerSource(itemType, handler, manager),\n          _registerSource2 = _slicedToArray$3(_registerSource, 2),\n          handlerId = _registerSource2[0],\n          unregister = _registerSource2[1];\n\n      monitor.receiveHandlerId(handlerId);\n      connector.receiveHandlerId(handlerId);\n      return unregister;\n    }\n  }, [manager, monitor, connector, handler, itemType]);\n}\n\nfunction _toConsumableArray$1(arr) {\n  return _arrayWithoutHoles$1(arr) || _iterableToArray$1(arr) || _unsupportedIterableToArray$5(arr) || _nonIterableSpread$1();\n}\n\nfunction _nonIterableSpread$1() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$5(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$5(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$5(o, minLen);\n}\n\nfunction _iterableToArray$1(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles$1(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray$5(arr);\n}\n\nfunction _arrayLikeToArray$5(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\nfunction useOptionalFactory(arg, deps) {\n  var memoDeps = _toConsumableArray$1(deps || []);\n\n  if (deps == null && typeof arg !== 'function') {\n    memoDeps.push(arg);\n  }\n\n  return useMemo(function () {\n    return typeof arg === 'function' ? arg() : arg;\n  }, memoDeps);\n}\n\nfunction useDragSourceMonitor() {\n  var manager = useDragDropManager();\n  return useMemo(function () {\n    return new DragSourceMonitorImpl(manager);\n  }, [manager]);\n}\n\nfunction useDragSourceConnector(dragSourceOptions, dragPreviewOptions) {\n  var manager = useDragDropManager();\n  var connector = useMemo(function () {\n    return new SourceConnector(manager.getBackend());\n  }, [manager]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dragSourceOptions = dragSourceOptions || null;\n    connector.reconnect();\n    return function () {\n      return connector.disconnectDragSource();\n    };\n  }, [connector, dragSourceOptions]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dragPreviewOptions = dragPreviewOptions || null;\n    connector.reconnect();\n    return function () {\n      return connector.disconnectDragPreview();\n    };\n  }, [connector, dragPreviewOptions]);\n  return connector;\n}\n\nvar fastDeepEqual = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n    var length, i, keys;\n\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n\n      for (i = length; i-- !== 0;) if (!equal(a[i], b[i])) return false;\n\n      return true;\n    }\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;) if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  } // true if both NaN, false otherwise\n\n\n  return a !== a && b !== b;\n};\n\nfunction _slicedToArray$2(arr, i) {\n  return _arrayWithHoles$2(arr) || _iterableToArrayLimit$2(arr, i) || _unsupportedIterableToArray$4(arr, i) || _nonIterableRest$2();\n}\n\nfunction _nonIterableRest$2() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$4(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$4(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$4(o, minLen);\n}\n\nfunction _arrayLikeToArray$4(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit$2(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles$2(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n/**\n *\n * @param monitor The monitor to collect state from\n * @param collect The collecting function\n * @param onUpdate A method to invoke when updates occur\n */\n\nfunction useCollector(monitor, collect, onUpdate) {\n  var _useState = useState(function () {\n    return collect(monitor);\n  }),\n      _useState2 = _slicedToArray$2(_useState, 2),\n      collected = _useState2[0],\n      setCollected = _useState2[1];\n\n  var updateCollected = useCallback(function () {\n    var nextValue = collect(monitor); // This needs to be a deep-equality check because some monitor-collected values\n    // include XYCoord objects that may be equivalent, but do not have instance equality.\n\n    if (!fastDeepEqual(collected, nextValue)) {\n      setCollected(nextValue);\n\n      if (onUpdate) {\n        onUpdate();\n      }\n    }\n  }, [collected, monitor, onUpdate]); // update the collected properties after react renders.\n  // Note that the \"Dustbin Stress Test\" fails if this is not\n  // done when the component updates\n\n  useIsomorphicLayoutEffect(updateCollected);\n  return [collected, updateCollected];\n}\n\nfunction _slicedToArray$1(arr, i) {\n  return _arrayWithHoles$1(arr) || _iterableToArrayLimit$1(arr, i) || _unsupportedIterableToArray$3(arr, i) || _nonIterableRest$1();\n}\n\nfunction _nonIterableRest$1() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$3(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$3(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$3(o, minLen);\n}\n\nfunction _arrayLikeToArray$3(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit$1(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles$1(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction useMonitorOutput(monitor, collect, onCollect) {\n  var _useCollector = useCollector(monitor, collect, onCollect),\n      _useCollector2 = _slicedToArray$1(_useCollector, 2),\n      collected = _useCollector2[0],\n      updateCollected = _useCollector2[1];\n\n  useIsomorphicLayoutEffect(function subscribeToMonitorStateChange() {\n    var handlerId = monitor.getHandlerId();\n\n    if (handlerId == null) {\n      return;\n    }\n\n    return monitor.subscribeToStateChange(updateCollected, {\n      handlerIds: [handlerId]\n    });\n  }, [monitor, updateCollected]);\n  return collected;\n}\n\nfunction useCollectedProps(collector, monitor, connector) {\n  return useMonitorOutput(monitor, collector || function () {\n    return {};\n  }, function () {\n    return connector.reconnect();\n  });\n}\n\nfunction useConnectDragSource(connector) {\n  return useMemo(function () {\n    return connector.hooks.dragSource();\n  }, [connector]);\n}\nfunction useConnectDragPreview(connector) {\n  return useMemo(function () {\n    return connector.hooks.dragPreview();\n  }, [connector]);\n}\n\n/**\n * useDragSource hook\n * @param sourceSpec The drag source specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */\n\nfunction useDrag(specArg, deps) {\n  var spec = useOptionalFactory(specArg, deps);\n  invariant(!spec.begin, \"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)\");\n  var monitor = useDragSourceMonitor();\n  var connector = useDragSourceConnector(spec.options, spec.previewOptions);\n  useRegisteredDragSource(spec, monitor, connector);\n  return [useCollectedProps(spec.collect, monitor, connector), useConnectDragSource(connector), useConnectDragPreview(connector)];\n}\n\n/**\n * Internal utility hook to get an array-version of spec.accept.\n * The main utility here is that we aren't creating a new array on every render if a non-array spec.accept is passed in.\n * @param spec\n */\n\nfunction useAccept(spec) {\n  var accept = spec.accept;\n  return useMemo(function () {\n    invariant(spec.accept != null, 'accept must be defined');\n    return Array.isArray(accept) ? accept : [accept];\n  }, [accept]);\n}\n\nfunction _classCallCheck$9(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$7(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$7(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$7(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$7(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$8(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar DropTargetImpl = /*#__PURE__*/function () {\n  function DropTargetImpl(spec, monitor) {\n    _classCallCheck$9(this, DropTargetImpl);\n\n    _defineProperty$8(this, \"spec\", void 0);\n\n    _defineProperty$8(this, \"monitor\", void 0);\n\n    this.spec = spec;\n    this.monitor = monitor;\n  }\n\n  _createClass$7(DropTargetImpl, [{\n    key: \"canDrop\",\n    value: function canDrop() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n      return spec.canDrop ? spec.canDrop(monitor.getItem(), monitor) : true;\n    }\n  }, {\n    key: \"hover\",\n    value: function hover() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n\n      if (spec.hover) {\n        spec.hover(monitor.getItem(), monitor);\n      }\n    }\n  }, {\n    key: \"drop\",\n    value: function drop() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n\n      if (spec.drop) {\n        return spec.drop(monitor.getItem(), monitor);\n      }\n    }\n  }]);\n\n  return DropTargetImpl;\n}();\n\nfunction useDropTarget(spec, monitor) {\n  var dropTarget = useMemo(function () {\n    return new DropTargetImpl(spec, monitor);\n  }, [monitor]);\n  useEffect(function () {\n    dropTarget.spec = spec;\n  }, [spec]);\n  return dropTarget;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray$2(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$2(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$2(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$2(o, minLen);\n}\n\nfunction _arrayLikeToArray$2(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction useRegisteredDropTarget(spec, monitor, connector) {\n  var manager = useDragDropManager();\n  var dropTarget = useDropTarget(spec, monitor);\n  var accept = useAccept(spec);\n  useIsomorphicLayoutEffect(function registerDropTarget() {\n    var _registerTarget = registerTarget(accept, dropTarget, manager),\n        _registerTarget2 = _slicedToArray(_registerTarget, 2),\n        handlerId = _registerTarget2[0],\n        unregister = _registerTarget2[1];\n\n    monitor.receiveHandlerId(handlerId);\n    connector.receiveHandlerId(handlerId);\n    return unregister;\n  }, [manager, monitor, dropTarget, connector, accept.map(function (a) {\n    return a.toString();\n  }).join('|')]);\n}\n\nfunction useDropTargetMonitor() {\n  var manager = useDragDropManager();\n  return useMemo(function () {\n    return new DropTargetMonitorImpl(manager);\n  }, [manager]);\n}\n\nfunction useDropTargetConnector(options) {\n  var manager = useDragDropManager();\n  var connector = useMemo(function () {\n    return new TargetConnector(manager.getBackend());\n  }, [manager]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dropTargetOptions = options || null;\n    connector.reconnect();\n    return function () {\n      return connector.disconnectDropTarget();\n    };\n  }, [options]);\n  return connector;\n}\n\nfunction useConnectDropTarget(connector) {\n  return useMemo(function () {\n    return connector.hooks.dropTarget();\n  }, [connector]);\n}\n\n/**\n * useDropTarget Hook\n * @param spec The drop target specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */\n\nfunction useDrop(specArg, deps) {\n  var spec = useOptionalFactory(specArg, deps);\n  var monitor = useDropTargetMonitor();\n  var connector = useDropTargetConnector(spec.options);\n  useRegisteredDropTarget(spec, monitor, connector);\n  return [useCollectedProps(spec.collect, monitor, connector), useConnectDropTarget(connector)];\n}\n\nvar createTransition = (function (event, check) {\n  return {\n    _isMBTransition: true,\n    event: event,\n    check: check\n  };\n});\n\nvar TouchTransition = createTransition('touchstart', function (event) {\n  return event.touches != null; // eslint-disable-line no-eq-null, eqeqeq\n});\nvar MouseTransition = createTransition('mousedown', function (event) {\n  if (event.type) {\n    return event.type.indexOf('touch') === -1 && event.type.indexOf('mouse') !== -1;\n  }\n\n  return false;\n});\n\nfunction _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = _unsupportedIterableToArray$1(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray$1(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$1(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$1(o, minLen);\n}\n\nfunction _arrayLikeToArray$1(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _classCallCheck$8(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar PreviewList = function PreviewList() {\n  var _this = this;\n\n  _classCallCheck$8(this, PreviewList);\n\n  this.register = function (preview) {\n    _this.previews.push(preview);\n  };\n\n  this.unregister = function (preview) {\n    var index;\n\n    while ((index = _this.previews.indexOf(preview)) !== -1) {\n      _this.previews.splice(index, 1);\n    }\n  };\n\n  this.backendChanged = function (backend) {\n    var _iterator = _createForOfIteratorHelper(_this.previews),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var preview = _step.value;\n        preview.backendChanged(backend);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  };\n\n  this.previews = [];\n};\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _classCallCheck$7(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar _default = function _default(manager, context, sourceOptions) {\n  var _this = this;\n\n  _classCallCheck$7(this, _default);\n\n  this.setup = function () {\n    if (typeof window === 'undefined') {\n      return;\n    }\n\n    if (_this.constructor.isSetUp) {\n      throw new Error('Cannot have two MultiBackends at the same time.');\n    }\n\n    _this.constructor.isSetUp = true;\n\n    _this.addEventListeners(window);\n\n    _this.backends[_this.current].instance.setup();\n  };\n\n  this.teardown = function () {\n    if (typeof window === 'undefined') {\n      return;\n    }\n\n    _this.constructor.isSetUp = false;\n\n    _this.removeEventListeners(window);\n\n    _this.backends[_this.current].instance.teardown();\n  };\n\n  this.connectDragSource = function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _this.connectBackend('connectDragSource', args);\n  };\n\n  this.connectDragPreview = function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return _this.connectBackend('connectDragPreview', args);\n  };\n\n  this.connectDropTarget = function () {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    return _this.connectBackend('connectDropTarget', args);\n  };\n\n  this.previewEnabled = function () {\n    return _this.backends[_this.current].preview;\n  };\n\n  this.addEventListeners = function (target) {\n    _this.backends.forEach(function (backend) {\n      if (backend.transition) {\n        target.addEventListener(backend.transition.event, _this.backendSwitcher, true);\n      }\n    });\n  };\n\n  this.removeEventListeners = function (target) {\n    _this.backends.forEach(function (backend) {\n      if (backend.transition) {\n        target.removeEventListener(backend.transition.event, _this.backendSwitcher, true);\n      }\n    });\n  };\n\n  this.backendSwitcher = function (event) {\n    var oldBackend = _this.current;\n    var i = 0;\n\n    _this.backends.some(function (backend) {\n      if (i !== _this.current && backend.transition && backend.transition.check(event)) {\n        _this.current = i;\n        return true;\n      }\n\n      i += 1;\n      return false;\n    });\n\n    if (_this.current !== oldBackend) {\n      _this.backends[oldBackend].instance.teardown();\n\n      Object.keys(_this.nodes).forEach(function (id) {\n        var node = _this.nodes[id];\n        node.handler();\n        node.handler = _this.callBackend(node.func, node.args);\n      });\n\n      _this.previews.backendChanged(_this);\n\n      var newBackend = _this.backends[_this.current];\n      newBackend.instance.setup();\n\n      if (newBackend.skipDispatchOnTransition) {\n        return;\n      }\n\n      var newEvent = null;\n\n      try {\n        newEvent = new event.constructor(event.type, event);\n      } catch (_e) {\n        newEvent = document.createEvent('Event');\n        newEvent.initEvent(event.type, event.bubbles, event.cancelable);\n      }\n\n      event.target.dispatchEvent(newEvent);\n    }\n  };\n\n  this.callBackend = function (func, args) {\n    var _this$backends$_this$;\n\n    return (_this$backends$_this$ = _this.backends[_this.current].instance)[func].apply(_this$backends$_this$, _toConsumableArray(args));\n  };\n\n  this.connectBackend = function (func, args) {\n    var nodeId = \"\".concat(func, \"_\").concat(args[0]);\n\n    var handler = _this.callBackend(func, args);\n\n    _this.nodes[nodeId] = {\n      func: func,\n      args: args,\n      handler: handler\n    };\n    return function () {\n      var _this$nodes$nodeId;\n\n      var r = (_this$nodes$nodeId = _this.nodes[nodeId]).handler.apply(_this$nodes$nodeId, arguments);\n\n      delete _this.nodes[nodeId];\n      return r;\n    };\n  };\n\n  var options = Object.assign({\n    backends: []\n  }, sourceOptions || {});\n\n  if (options.backends.length < 1) {\n    throw new Error(\"You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)\\n        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx\");\n  }\n\n  this.current = 0;\n  this.previews = new PreviewList();\n  this.backends = [];\n  options.backends.forEach(function (backend) {\n    if (!backend.backend) {\n      throw new Error(\"You must specify a 'backend' property in your Backend entry: \".concat(backend));\n    }\n\n    var transition = backend.transition;\n\n    if (transition && !transition._isMBTransition) {\n      throw new Error(\"You must specify a valid 'transition' property (either undefined or the return of 'createTransition') in your Backend entry: \".concat(backend));\n    }\n\n    _this.backends.push({\n      instance: backend.backend(manager, context, backend.options),\n      preview: backend.preview || false,\n      transition: transition,\n      skipDispatchOnTransition: Boolean(backend.skipDispatchOnTransition)\n    });\n  });\n  this.nodes = {};\n} // DnD Backend API\n;\n\nvar MultiBackend = (function (manager, context, options) {\n  return new _default(manager, context, options);\n});\n\nvar propTypes = {exports: {}};\n\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n/* eslint-disable no-unused-vars */\n\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n  if (val === null || val === undefined) {\n    throw new TypeError('Object.assign cannot be called with null or undefined');\n  }\n\n  return Object(val);\n}\n\nfunction shouldUseNative() {\n  try {\n    if (!Object.assign) {\n      return false;\n    } // Detect buggy property enumeration order in older V8 versions.\n    // https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\n\n    var test1 = new String('abc'); // eslint-disable-line no-new-wrappers\n\n    test1[5] = 'de';\n\n    if (Object.getOwnPropertyNames(test1)[0] === '5') {\n      return false;\n    } // https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\n\n    var test2 = {};\n\n    for (var i = 0; i < 10; i++) {\n      test2['_' + String.fromCharCode(i)] = i;\n    }\n\n    var order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n      return test2[n];\n    });\n\n    if (order2.join('') !== '0123456789') {\n      return false;\n    } // https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\n\n    var test3 = {};\n    'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n      test3[letter] = letter;\n    });\n\n    if (Object.keys(Object.assign({}, test3)).join('') !== 'abcdefghijklmnopqrst') {\n      return false;\n    }\n\n    return true;\n  } catch (err) {\n    // We don't expect any of the above to throw, but better to be safe.\n    return false;\n  }\n}\n\nvar objectAssign = shouldUseNative() ? Object.assign : function (target, source) {\n  var from;\n  var to = toObject(target);\n  var symbols;\n\n  for (var s = 1; s < arguments.length; s++) {\n    from = Object(arguments[s]);\n\n    for (var key in from) {\n      if (hasOwnProperty.call(from, key)) {\n        to[key] = from[key];\n      }\n    }\n\n    if (getOwnPropertySymbols) {\n      symbols = getOwnPropertySymbols(from);\n\n      for (var i = 0; i < symbols.length; i++) {\n        if (propIsEnumerable.call(from, symbols[i])) {\n          to[symbols[i]] = from[symbols[i]];\n        }\n      }\n    }\n  }\n\n  return to;\n};\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar ReactPropTypesSecret$3 = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\nvar ReactPropTypesSecret_1 = ReactPropTypesSecret$3;\n\nvar has$2 = Function.call.bind(Object.prototype.hasOwnProperty);\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar printWarning$1 = function () {};\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactPropTypesSecret$2 = ReactPropTypesSecret_1;\n\n  var loggedTypeFailures = {};\n\n  var has$1 = has$2;\n\n  printWarning$1 = function (text) {\n    var message = 'Warning: ' + text;\n\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {\n      /**/\n    }\n  };\n}\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n * @private\n */\n\n\nfunction checkPropTypes$1(typeSpecs, values, location, componentName, getStack) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var typeSpecName in typeSpecs) {\n      if (has$1(typeSpecs, typeSpecName)) {\n        var error; // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            var err = Error((componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' + 'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.');\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n\n          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret$2);\n        } catch (ex) {\n          error = ex;\n        }\n\n        if (error && !(error instanceof Error)) {\n          printWarning$1((componentName || 'React class') + ': type specification of ' + location + ' `' + typeSpecName + '` is invalid; the type checker ' + 'function must return `null` or an `Error` but returned a ' + typeof error + '. ' + 'You may have forgotten to pass an argument to the type checker ' + 'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' + 'shape all require an argument).');\n        }\n\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n          var stack = getStack ? getStack() : '';\n          printWarning$1('Failed ' + location + ' type: ' + error.message + (stack != null ? stack : ''));\n        }\n      }\n    }\n  }\n}\n/**\n * Resets warning cache when testing.\n *\n * @private\n */\n\n\ncheckPropTypes$1.resetWarningCache = function () {\n  if (process.env.NODE_ENV !== 'production') {\n    loggedTypeFailures = {};\n  }\n};\n\nvar checkPropTypes_1 = checkPropTypes$1;\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar ReactIs$1 = reactIs$1.exports;\n\nvar assign = objectAssign;\n\nvar ReactPropTypesSecret$1 = ReactPropTypesSecret_1;\n\nvar has = has$2;\n\nvar checkPropTypes = checkPropTypes_1;\n\nvar printWarning = function () {};\n\nif (process.env.NODE_ENV !== 'production') {\n  printWarning = function (text) {\n    var message = 'Warning: ' + text;\n\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\nfunction emptyFunctionThatReturnsNull() {\n  return null;\n}\n\nvar factoryWithTypeCheckers = function (isValidElement, throwOnDirectAccess) {\n  /* global Symbol */\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n  /**\n   * Returns the iterator method function contained on the iterable object.\n   *\n   * Be sure to invoke the function with the iterable as context:\n   *\n   *     var iteratorFn = getIteratorFn(myIterable);\n   *     if (iteratorFn) {\n   *       var iterator = iteratorFn.call(myIterable);\n   *       ...\n   *     }\n   *\n   * @param {?object} maybeIterable\n   * @return {?function}\n   */\n\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n  /**\n   * Collection of methods that allow declaration and validation of props that are\n   * supplied to React components. Example usage:\n   *\n   *   var Props = require('ReactPropTypes');\n   *   var MyArticle = React.createClass({\n   *     propTypes: {\n   *       // An optional string prop named \"description\".\n   *       description: Props.string,\n   *\n   *       // A required enum prop named \"category\".\n   *       category: Props.oneOf(['News','Photos']).isRequired,\n   *\n   *       // A prop named \"dialog\" that requires an instance of Dialog.\n   *       dialog: Props.instanceOf(Dialog).isRequired\n   *     },\n   *     render: function() { ... }\n   *   });\n   *\n   * A more formal specification of how these methods are used:\n   *\n   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n   *   decl := ReactPropTypes.{type}(.isRequired)?\n   *\n   * Each and every declaration produces a function with the same signature. This\n   * allows the creation of custom validation functions. For example:\n   *\n   *  var MyLink = React.createClass({\n   *    propTypes: {\n   *      // An optional string or URI prop named \"href\".\n   *      href: function(props, propName, componentName) {\n   *        var propValue = props[propName];\n   *        if (propValue != null && typeof propValue !== 'string' &&\n   *            !(propValue instanceof URI)) {\n   *          return new Error(\n   *            'Expected a string or an URI for ' + propName + ' in ' +\n   *            componentName\n   *          );\n   *        }\n   *      }\n   *    },\n   *    render: function() {...}\n   *  });\n   *\n   * @internal\n   */\n\n\n  var ANONYMOUS = '<<anonymous>>'; // Important!\n  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bigint: createPrimitiveTypeChecker('bigint'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n    symbol: createPrimitiveTypeChecker('symbol'),\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    elementType: createElementTypeTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker,\n    exact: createStrictShapeTypeChecker\n  };\n  /**\n   * inlined Object.is polyfill to avoid requiring consumers ship their own\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   */\n\n  /*eslint-disable no-self-compare*/\n\n  function is(x, y) {\n    // SameValue algorithm\n    if (x === y) {\n      // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  }\n  /*eslint-enable no-self-compare*/\n\n  /**\n   * We use an Error-like object for backward compatibility as people may call\n   * PropTypes directly and inspect their output. However, we don't use real\n   * Errors anymore. We don't inspect their stack anyway, and creating them\n   * is prohibitively expensive if they are created too often, such as what\n   * happens in oneOfType() for any type before the one that matched.\n   */\n\n\n  function PropTypeError(message, data) {\n    this.message = message;\n    this.data = data && typeof data === 'object' ? data : {};\n    this.stack = '';\n  } // Make `instanceof Error` still work for returned errors.\n\n\n  PropTypeError.prototype = Error.prototype;\n\n  function createChainableTypeChecker(validate) {\n    if (process.env.NODE_ENV !== 'production') {\n      var manualPropTypeCallCache = {};\n      var manualPropTypeWarningCount = 0;\n    }\n\n    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n\n      if (secret !== ReactPropTypesSecret$1) {\n        if (throwOnDirectAccess) {\n          // New behavior only for users of `prop-types` package\n          var err = new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. ' + 'Use `PropTypes.checkPropTypes()` to call them. ' + 'Read more at http://fb.me/use-check-prop-types');\n          err.name = 'Invariant Violation';\n          throw err;\n        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n          // Old behavior for people using React.PropTypes\n          var cacheKey = componentName + ':' + propName;\n\n          if (!manualPropTypeCallCache[cacheKey] && // Avoid spamming the console because they are often not actionable except for lib authors\n          manualPropTypeWarningCount < 3) {\n            printWarning('You are manually calling a React.PropTypes validation ' + 'function for the `' + propFullName + '` prop on `' + componentName + '`. This is deprecated ' + 'and will throw in the standalone `prop-types` package. ' + 'You may be seeing this warning due to a third-party PropTypes ' + 'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.');\n            manualPropTypeCallCache[cacheKey] = true;\n            manualPropTypeWarningCount++;\n          }\n        }\n      }\n\n      if (props[propName] == null) {\n        if (isRequired) {\n          if (props[propName] === null) {\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n          }\n\n          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n        }\n\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName, secret) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n\n      if (propType !== expectedType) {\n        // `propValue` being instance of, say, date/regexp, pass the 'object'\n        // check, but we can offer a more precise error message here rather than\n        // 'of type `object`'.\n        var preciseType = getPreciseType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'), {\n          expectedType: expectedType\n        });\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunctionThatReturnsNull);\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n      }\n\n      var propValue = props[propName];\n\n      if (!Array.isArray(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret$1);\n\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n\n      if (!isValidElement(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n\n      if (!ReactIs$1.isValidElementType(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement type.'));\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (arguments.length > 1) {\n          printWarning('Invalid arguments supplied to oneOf, expected an array, got ' + arguments.length + ' arguments. ' + 'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).');\n        } else {\n          printWarning('Invalid argument supplied to oneOf, expected an array.');\n        }\n      }\n\n      return emptyFunctionThatReturnsNull;\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (is(propValue, expectedValues[i])) {\n          return null;\n        }\n      }\n\n      var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {\n        var type = getPreciseType(value);\n\n        if (type === 'symbol') {\n          return String(value);\n        }\n\n        return value;\n      });\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + String(propValue) + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n      }\n\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n\n      for (var key in propValue) {\n        if (has(propValue, key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret$1);\n\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n      var checker = arrayOfTypeCheckers[i];\n\n      if (typeof checker !== 'function') {\n        printWarning('Invalid argument supplied to oneOfType. Expected an array of check functions, but ' + 'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.');\n        return emptyFunctionThatReturnsNull;\n      }\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var expectedTypes = [];\n\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        var checkerResult = checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret$1);\n\n        if (checkerResult == null) {\n          return null;\n        }\n\n        if (checkerResult.data && has(checkerResult.data, 'expectedType')) {\n          expectedTypes.push(checkerResult.data.expectedType);\n        }\n      }\n\n      var expectedTypesMessage = expectedTypes.length > 0 ? ', expected one of type [' + expectedTypes.join(', ') + ']' : '';\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`' + expectedTypesMessage + '.'));\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function invalidValidatorError(componentName, location, propFullName, key, type) {\n    return new PropTypeError((componentName || 'React class') + ': ' + location + ' type `' + propFullName + '.' + key + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + type + '`.');\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n\n        if (typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret$1);\n\n        if (error) {\n          return error;\n        }\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createStrictShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      } // We need to check all keys in case some are required but missing from props.\n\n\n      var allKeys = assign({}, props[propName], shapeTypes);\n\n      for (var key in allKeys) {\n        var checker = shapeTypes[key];\n\n        if (has(shapeTypes, key) && typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n\n        if (!checker) {\n          return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' + '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') + '\\nValid keys: ' + JSON.stringify(Object.keys(shapeTypes), null, '  '));\n        }\n\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret$1);\n\n        if (error) {\n          return error;\n        }\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n\n      case 'boolean':\n        return !propValue;\n\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n\n        if (propValue === null || isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            // Iterator will provide entry [k,v] tuples rather than values.\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n\n      default:\n        return false;\n    }\n  }\n\n  function isSymbol(propType, propValue) {\n    // Native Symbol.\n    if (propType === 'symbol') {\n      return true;\n    } // falsy value can't be a Symbol\n\n\n    if (!propValue) {\n      return false;\n    } // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n\n\n    if (propValue['@@toStringTag'] === 'Symbol') {\n      return true;\n    } // Fallback for non-spec compliant Symbols which are polyfilled.\n\n\n    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n      return true;\n    }\n\n    return false;\n  } // Equivalent of `typeof` but with special handling for array and regexp.\n\n\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n\n    if (propValue instanceof RegExp) {\n      // Old webkits (at least until Android 4.0) return 'function' rather than\n      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n      // passes PropTypes.object.\n      return 'object';\n    }\n\n    if (isSymbol(propType, propValue)) {\n      return 'symbol';\n    }\n\n    return propType;\n  } // This handles more types than `getPropType`. Only used for error messages.\n  // See `createPrimitiveTypeChecker`.\n\n\n  function getPreciseType(propValue) {\n    if (typeof propValue === 'undefined' || propValue === null) {\n      return '' + propValue;\n    }\n\n    var propType = getPropType(propValue);\n\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n\n    return propType;\n  } // Returns a string that is postfixed to a warning about an invalid type.\n  // For example, \"undefined\" or \"of type array\"\n\n\n  function getPostfixForTypeWarning(value) {\n    var type = getPreciseType(value);\n\n    switch (type) {\n      case 'array':\n      case 'object':\n        return 'an ' + type;\n\n      case 'boolean':\n      case 'date':\n      case 'regexp':\n        return 'a ' + type;\n\n      default:\n        return type;\n    }\n  } // Returns class name of the object, if any.\n\n\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n\n    return propValue.constructor.name;\n  }\n\n  ReactPropTypes.checkPropTypes = checkPropTypes;\n  ReactPropTypes.resetWarningCache = checkPropTypes.resetWarningCache;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n  return ReactPropTypes;\n};\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar ReactPropTypesSecret = ReactPropTypesSecret_1;\n\nfunction emptyFunction() {}\n\nfunction emptyFunctionWithReset() {}\n\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nvar factoryWithThrowingShims = function () {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n\n    var err = new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. ' + 'Use PropTypes.checkPropTypes() to call them. ' + 'Read more at http://fb.me/use-check-prop-types');\n    err.name = 'Invariant Violation';\n    throw err;\n  }\n  shim.isRequired = shim;\n\n  function getShim() {\n    return shim;\n  }\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n  ReactPropTypes.PropTypes = ReactPropTypes;\n  return ReactPropTypes;\n};\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = reactIs$1.exports; // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n\n\n  var throwOnDirectAccess = true;\n  propTypes.exports = factoryWithTypeCheckers(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  propTypes.exports = factoryWithThrowingShims();\n}\n\nvar PropTypes = propTypes.exports;\n\n({\n  manager: PropTypes.any,\n  context: PropTypes.any,\n  options: PropTypes.any,\n  debugMode: PropTypes.bool\n});\n\n({\n  generator: PropTypes.func,\n  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func])\n});\n\n// cheap lodash replacements\nfunction memoize(fn) {\n  var result = null;\n\n  var memoized = function memoized() {\n    if (result == null) {\n      result = fn();\n    }\n\n    return result;\n  };\n\n  return memoized;\n}\n/**\n * drop-in replacement for _.without\n */\n\nfunction without(items, item) {\n  return items.filter(function (i) {\n    return i !== item;\n  });\n}\nfunction union(itemsA, itemsB) {\n  var set = new Set();\n\n  var insertItem = function insertItem(item) {\n    return set.add(item);\n  };\n\n  itemsA.forEach(insertItem);\n  itemsB.forEach(insertItem);\n  var result = [];\n  set.forEach(function (key) {\n    return result.push(key);\n  });\n  return result;\n}\n\nfunction _classCallCheck$6(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$6(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$6(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$6(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$6(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$7(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar EnterLeaveCounter = /*#__PURE__*/function () {\n  function EnterLeaveCounter(isNodeInDocument) {\n    _classCallCheck$6(this, EnterLeaveCounter);\n\n    _defineProperty$7(this, \"entered\", []);\n\n    _defineProperty$7(this, \"isNodeInDocument\", void 0);\n\n    this.isNodeInDocument = isNodeInDocument;\n  }\n\n  _createClass$6(EnterLeaveCounter, [{\n    key: \"enter\",\n    value: function enter(enteringNode) {\n      var _this = this;\n\n      var previousLength = this.entered.length;\n\n      var isNodeEntered = function isNodeEntered(node) {\n        return _this.isNodeInDocument(node) && (!node.contains || node.contains(enteringNode));\n      };\n\n      this.entered = union(this.entered.filter(isNodeEntered), [enteringNode]);\n      return previousLength === 0 && this.entered.length > 0;\n    }\n  }, {\n    key: \"leave\",\n    value: function leave(leavingNode) {\n      var previousLength = this.entered.length;\n      this.entered = without(this.entered.filter(this.isNodeInDocument), leavingNode);\n      return previousLength > 0 && this.entered.length === 0;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.entered = [];\n    }\n  }]);\n\n  return EnterLeaveCounter;\n}();\n\nvar isFirefox = memoize(function () {\n  return /firefox/i.test(navigator.userAgent);\n});\nvar isSafari = memoize(function () {\n  return Boolean(window.safari);\n});\n\nfunction _classCallCheck$5(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$5(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$5(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$5(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$5(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$6(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar MonotonicInterpolant = /*#__PURE__*/function () {\n  function MonotonicInterpolant(xs, ys) {\n    _classCallCheck$5(this, MonotonicInterpolant);\n\n    _defineProperty$6(this, \"xs\", void 0);\n\n    _defineProperty$6(this, \"ys\", void 0);\n\n    _defineProperty$6(this, \"c1s\", void 0);\n\n    _defineProperty$6(this, \"c2s\", void 0);\n\n    _defineProperty$6(this, \"c3s\", void 0);\n\n    var length = xs.length; // Rearrange xs and ys so that xs is sorted\n\n    var indexes = [];\n\n    for (var i = 0; i < length; i++) {\n      indexes.push(i);\n    }\n\n    indexes.sort(function (a, b) {\n      return xs[a] < xs[b] ? -1 : 1;\n    }); // Get consecutive differences and slopes\n    var dxs = [];\n    var ms = [];\n    var dx;\n    var dy;\n\n    for (var _i = 0; _i < length - 1; _i++) {\n      dx = xs[_i + 1] - xs[_i];\n      dy = ys[_i + 1] - ys[_i];\n      dxs.push(dx);\n      ms.push(dy / dx);\n    } // Get degree-1 coefficients\n\n\n    var c1s = [ms[0]];\n\n    for (var _i2 = 0; _i2 < dxs.length - 1; _i2++) {\n      var m2 = ms[_i2];\n      var mNext = ms[_i2 + 1];\n\n      if (m2 * mNext <= 0) {\n        c1s.push(0);\n      } else {\n        dx = dxs[_i2];\n        var dxNext = dxs[_i2 + 1];\n        var common = dx + dxNext;\n        c1s.push(3 * common / ((common + dxNext) / m2 + (common + dx) / mNext));\n      }\n    }\n\n    c1s.push(ms[ms.length - 1]); // Get degree-2 and degree-3 coefficients\n\n    var c2s = [];\n    var c3s = [];\n    var m;\n\n    for (var _i3 = 0; _i3 < c1s.length - 1; _i3++) {\n      m = ms[_i3];\n      var c1 = c1s[_i3];\n      var invDx = 1 / dxs[_i3];\n\n      var _common = c1 + c1s[_i3 + 1] - m - m;\n\n      c2s.push((m - c1 - _common) * invDx);\n      c3s.push(_common * invDx * invDx);\n    }\n\n    this.xs = xs;\n    this.ys = ys;\n    this.c1s = c1s;\n    this.c2s = c2s;\n    this.c3s = c3s;\n  }\n\n  _createClass$5(MonotonicInterpolant, [{\n    key: \"interpolate\",\n    value: function interpolate(x) {\n      var xs = this.xs,\n          ys = this.ys,\n          c1s = this.c1s,\n          c2s = this.c2s,\n          c3s = this.c3s; // The rightmost point in the dataset should give an exact result\n\n      var i = xs.length - 1;\n\n      if (x === xs[i]) {\n        return ys[i];\n      } // Search for the interval x is in, returning the corresponding y if x is one of the original xs\n\n\n      var low = 0;\n      var high = c3s.length - 1;\n      var mid;\n\n      while (low <= high) {\n        mid = Math.floor(0.5 * (low + high));\n        var xHere = xs[mid];\n\n        if (xHere < x) {\n          low = mid + 1;\n        } else if (xHere > x) {\n          high = mid - 1;\n        } else {\n          return ys[mid];\n        }\n      }\n\n      i = Math.max(0, high); // Interpolate\n\n      var diff = x - xs[i];\n      var diffSq = diff * diff;\n      return ys[i] + c1s[i] * diff + c2s[i] * diffSq + c3s[i] * diff * diffSq;\n    }\n  }]);\n\n  return MonotonicInterpolant;\n}();\n\nvar ELEMENT_NODE$1 = 1;\nfunction getNodeClientOffset$1(node) {\n  var el = node.nodeType === ELEMENT_NODE$1 ? node : node.parentElement;\n\n  if (!el) {\n    return null;\n  }\n\n  var _el$getBoundingClient = el.getBoundingClientRect(),\n      top = _el$getBoundingClient.top,\n      left = _el$getBoundingClient.left;\n\n  return {\n    x: left,\n    y: top\n  };\n}\nfunction getEventClientOffset$1(e) {\n  return {\n    x: e.clientX,\n    y: e.clientY\n  };\n}\n\nfunction isImageNode(node) {\n  var _document$documentEle;\n\n  return node.nodeName === 'IMG' && (isFirefox() || !((_document$documentEle = document.documentElement) !== null && _document$documentEle !== void 0 && _document$documentEle.contains(node)));\n}\n\nfunction getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight) {\n  var dragPreviewWidth = isImage ? dragPreview.width : sourceWidth;\n  var dragPreviewHeight = isImage ? dragPreview.height : sourceHeight; // Work around @2x coordinate discrepancies in browsers\n\n  if (isSafari() && isImage) {\n    dragPreviewHeight /= window.devicePixelRatio;\n    dragPreviewWidth /= window.devicePixelRatio;\n  }\n\n  return {\n    dragPreviewWidth: dragPreviewWidth,\n    dragPreviewHeight: dragPreviewHeight\n  };\n}\n\nfunction getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint) {\n  // The browsers will use the image intrinsic size under different conditions.\n  // Firefox only cares if it's an image, but WebKit also wants it to be detached.\n  var isImage = isImageNode(dragPreview);\n  var dragPreviewNode = isImage ? sourceNode : dragPreview;\n  var dragPreviewNodeOffsetFromClient = getNodeClientOffset$1(dragPreviewNode);\n  var offsetFromDragPreview = {\n    x: clientOffset.x - dragPreviewNodeOffsetFromClient.x,\n    y: clientOffset.y - dragPreviewNodeOffsetFromClient.y\n  };\n  var sourceWidth = sourceNode.offsetWidth,\n      sourceHeight = sourceNode.offsetHeight;\n  var anchorX = anchorPoint.anchorX,\n      anchorY = anchorPoint.anchorY;\n\n  var _getDragPreviewSize = getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight),\n      dragPreviewWidth = _getDragPreviewSize.dragPreviewWidth,\n      dragPreviewHeight = _getDragPreviewSize.dragPreviewHeight;\n\n  var calculateYOffset = function calculateYOffset() {\n    var interpolantY = new MonotonicInterpolant([0, 0.5, 1], [// Dock to the top\n    offsetFromDragPreview.y, // Align at the center\n    offsetFromDragPreview.y / sourceHeight * dragPreviewHeight, // Dock to the bottom\n    offsetFromDragPreview.y + dragPreviewHeight - sourceHeight]);\n    var y = interpolantY.interpolate(anchorY); // Work around Safari 8 positioning bug\n\n    if (isSafari() && isImage) {\n      // We'll have to wait for @3x to see if this is entirely correct\n      y += (window.devicePixelRatio - 1) * dragPreviewHeight;\n    }\n\n    return y;\n  };\n\n  var calculateXOffset = function calculateXOffset() {\n    // Interpolate coordinates depending on anchor point\n    // If you know a simpler way to do this, let me know\n    var interpolantX = new MonotonicInterpolant([0, 0.5, 1], [// Dock to the left\n    offsetFromDragPreview.x, // Align at the center\n    offsetFromDragPreview.x / sourceWidth * dragPreviewWidth, // Dock to the right\n    offsetFromDragPreview.x + dragPreviewWidth - sourceWidth]);\n    return interpolantX.interpolate(anchorX);\n  }; // Force offsets if specified in the options.\n\n\n  var offsetX = offsetPoint.offsetX,\n      offsetY = offsetPoint.offsetY;\n  var isManualOffsetX = offsetX === 0 || offsetX;\n  var isManualOffsetY = offsetY === 0 || offsetY;\n  return {\n    x: isManualOffsetX ? offsetX : calculateXOffset(),\n    y: isManualOffsetY ? offsetY : calculateYOffset()\n  };\n}\n\nvar FILE = '__NATIVE_FILE__';\nvar URL = '__NATIVE_URL__';\nvar TEXT = '__NATIVE_TEXT__';\nvar HTML = '__NATIVE_HTML__';\n\nvar NativeTypes = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  FILE: FILE,\n  URL: URL,\n  TEXT: TEXT,\n  HTML: HTML\n});\n\nfunction getDataFromDataTransfer(dataTransfer, typesToTry, defaultValue) {\n  var result = typesToTry.reduce(function (resultSoFar, typeToTry) {\n    return resultSoFar || dataTransfer.getData(typeToTry);\n  }, '');\n  return result != null ? result : defaultValue;\n}\n\nvar _nativeTypesConfig;\n\nfunction _defineProperty$5(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar nativeTypesConfig = (_nativeTypesConfig = {}, _defineProperty$5(_nativeTypesConfig, FILE, {\n  exposeProperties: {\n    files: function files(dataTransfer) {\n      return Array.prototype.slice.call(dataTransfer.files);\n    },\n    items: function items(dataTransfer) {\n      return dataTransfer.items;\n    },\n    dataTransfer: function dataTransfer(_dataTransfer) {\n      return _dataTransfer;\n    }\n  },\n  matchesTypes: ['Files']\n}), _defineProperty$5(_nativeTypesConfig, HTML, {\n  exposeProperties: {\n    html: function html(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '');\n    },\n    dataTransfer: function dataTransfer(_dataTransfer2) {\n      return _dataTransfer2;\n    }\n  },\n  matchesTypes: ['Html', 'text/html']\n}), _defineProperty$5(_nativeTypesConfig, URL, {\n  exposeProperties: {\n    urls: function urls(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '').split('\\n');\n    },\n    dataTransfer: function dataTransfer(_dataTransfer3) {\n      return _dataTransfer3;\n    }\n  },\n  matchesTypes: ['Url', 'text/uri-list']\n}), _defineProperty$5(_nativeTypesConfig, TEXT, {\n  exposeProperties: {\n    text: function text(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '');\n    },\n    dataTransfer: function dataTransfer(_dataTransfer4) {\n      return _dataTransfer4;\n    }\n  },\n  matchesTypes: ['Text', 'text/plain']\n}), _nativeTypesConfig);\n\nfunction _classCallCheck$4(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$4(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$4(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$4(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$4(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$4(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar NativeDragSource = /*#__PURE__*/function () {\n  function NativeDragSource(config) {\n    _classCallCheck$4(this, NativeDragSource);\n\n    _defineProperty$4(this, \"item\", void 0);\n\n    _defineProperty$4(this, \"config\", void 0);\n\n    this.config = config;\n    this.item = {};\n    this.initializeExposedProperties();\n  }\n\n  _createClass$4(NativeDragSource, [{\n    key: \"initializeExposedProperties\",\n    value: function initializeExposedProperties() {\n      var _this = this;\n\n      Object.keys(this.config.exposeProperties).forEach(function (property) {\n        Object.defineProperty(_this.item, property, {\n          configurable: true,\n          enumerable: true,\n          get: function get() {\n            // eslint-disable-next-line no-console\n            console.warn(\"Browser doesn't allow reading \\\"\".concat(property, \"\\\" until the drop event.\"));\n            return null;\n          }\n        });\n      });\n    }\n  }, {\n    key: \"loadDataTransfer\",\n    value: function loadDataTransfer(dataTransfer) {\n      var _this2 = this;\n\n      if (dataTransfer) {\n        var newProperties = {};\n        Object.keys(this.config.exposeProperties).forEach(function (property) {\n          newProperties[property] = {\n            value: _this2.config.exposeProperties[property](dataTransfer, _this2.config.matchesTypes),\n            configurable: true,\n            enumerable: true\n          };\n        });\n        Object.defineProperties(this.item, newProperties);\n      }\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      return true;\n    }\n  }, {\n    key: \"beginDrag\",\n    value: function beginDrag() {\n      return this.item;\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging(monitor, handle) {\n      return handle === monitor.getSourceId();\n    }\n  }, {\n    key: \"endDrag\",\n    value: function endDrag() {// empty\n    }\n  }]);\n\n  return NativeDragSource;\n}();\n\nfunction createNativeDragSource(type, dataTransfer) {\n  var result = new NativeDragSource(nativeTypesConfig[type]);\n  result.loadDataTransfer(dataTransfer);\n  return result;\n}\nfunction matchNativeItemType(dataTransfer) {\n  if (!dataTransfer) {\n    return null;\n  }\n\n  var dataTransferTypes = Array.prototype.slice.call(dataTransfer.types || []);\n  return Object.keys(nativeTypesConfig).filter(function (nativeItemType) {\n    var matchesTypes = nativeTypesConfig[nativeItemType].matchesTypes;\n    return matchesTypes.some(function (t) {\n      return dataTransferTypes.indexOf(t) > -1;\n    });\n  })[0] || null;\n}\n\nfunction _classCallCheck$3(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$3(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$3(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$3(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$3(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$3(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar OptionsReader$1 = /*#__PURE__*/function () {\n  function OptionsReader(globalContext, options) {\n    _classCallCheck$3(this, OptionsReader);\n\n    _defineProperty$3(this, \"ownerDocument\", null);\n\n    _defineProperty$3(this, \"globalContext\", void 0);\n\n    _defineProperty$3(this, \"optionsArgs\", void 0);\n\n    this.globalContext = globalContext;\n    this.optionsArgs = options;\n  }\n\n  _createClass$3(OptionsReader, [{\n    key: \"window\",\n    get: function get() {\n      if (this.globalContext) {\n        return this.globalContext;\n      } else if (typeof window !== 'undefined') {\n        return window;\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      var _this$globalContext;\n\n      if ((_this$globalContext = this.globalContext) !== null && _this$globalContext !== void 0 && _this$globalContext.document) {\n        return this.globalContext.document;\n      } else if (this.window) {\n        return this.window.document;\n      } else {\n        return undefined;\n      }\n    }\n  }, {\n    key: \"rootElement\",\n    get: function get() {\n      var _this$optionsArgs;\n\n      return ((_this$optionsArgs = this.optionsArgs) === null || _this$optionsArgs === void 0 ? void 0 : _this$optionsArgs.rootElement) || this.window;\n    }\n  }]);\n\n  return OptionsReader;\n}();\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty$2(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck$2(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$2(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$2(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$2(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$2(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$2(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar HTML5BackendImpl = /*#__PURE__*/function () {\n  // React-Dnd Components\n  // Internal State\n  function HTML5BackendImpl(manager, globalContext, options) {\n    var _this = this;\n\n    _classCallCheck$2(this, HTML5BackendImpl);\n\n    _defineProperty$2(this, \"options\", void 0);\n\n    _defineProperty$2(this, \"actions\", void 0);\n\n    _defineProperty$2(this, \"monitor\", void 0);\n\n    _defineProperty$2(this, \"registry\", void 0);\n\n    _defineProperty$2(this, \"enterLeaveCounter\", void 0);\n\n    _defineProperty$2(this, \"sourcePreviewNodes\", new Map());\n\n    _defineProperty$2(this, \"sourcePreviewNodeOptions\", new Map());\n\n    _defineProperty$2(this, \"sourceNodes\", new Map());\n\n    _defineProperty$2(this, \"sourceNodeOptions\", new Map());\n\n    _defineProperty$2(this, \"dragStartSourceIds\", null);\n\n    _defineProperty$2(this, \"dropTargetIds\", []);\n\n    _defineProperty$2(this, \"dragEnterTargetIds\", []);\n\n    _defineProperty$2(this, \"currentNativeSource\", null);\n\n    _defineProperty$2(this, \"currentNativeHandle\", null);\n\n    _defineProperty$2(this, \"currentDragSourceNode\", null);\n\n    _defineProperty$2(this, \"altKeyPressed\", false);\n\n    _defineProperty$2(this, \"mouseMoveTimeoutTimer\", null);\n\n    _defineProperty$2(this, \"asyncEndDragFrameId\", null);\n\n    _defineProperty$2(this, \"dragOverTargetIds\", null);\n\n    _defineProperty$2(this, \"lastClientOffset\", null);\n\n    _defineProperty$2(this, \"hoverRafId\", null);\n\n    _defineProperty$2(this, \"getSourceClientOffset\", function (sourceId) {\n      var source = _this.sourceNodes.get(sourceId);\n\n      return source && getNodeClientOffset$1(source) || null;\n    });\n\n    _defineProperty$2(this, \"endDragNativeItem\", function () {\n      if (!_this.isDraggingNativeItem()) {\n        return;\n      }\n\n      _this.actions.endDrag();\n\n      if (_this.currentNativeHandle) {\n        _this.registry.removeSource(_this.currentNativeHandle);\n      }\n\n      _this.currentNativeHandle = null;\n      _this.currentNativeSource = null;\n    });\n\n    _defineProperty$2(this, \"isNodeInDocument\", function (node) {\n      // Check the node either in the main document or in the current context\n      return Boolean(node && _this.document && _this.document.body && _this.document.body.contains(node));\n    });\n\n    _defineProperty$2(this, \"endDragIfSourceWasRemovedFromDOM\", function () {\n      var node = _this.currentDragSourceNode;\n\n      if (node == null || _this.isNodeInDocument(node)) {\n        return;\n      }\n\n      if (_this.clearCurrentDragSourceNode() && _this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragStartCapture\", function () {\n      _this.clearCurrentDragSourceNode();\n\n      _this.dragStartSourceIds = [];\n    });\n\n    _defineProperty$2(this, \"handleTopDragStart\", function (e) {\n      if (e.defaultPrevented) {\n        return;\n      }\n\n      var dragStartSourceIds = _this.dragStartSourceIds;\n      _this.dragStartSourceIds = null;\n      var clientOffset = getEventClientOffset$1(e); // Avoid crashing if we missed a drop event or our previous drag died\n\n      if (_this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      } // Don't publish the source just yet (see why below)\n\n\n      _this.actions.beginDrag(dragStartSourceIds || [], {\n        publishSource: false,\n        getSourceClientOffset: _this.getSourceClientOffset,\n        clientOffset: clientOffset\n      });\n\n      var dataTransfer = e.dataTransfer;\n      var nativeType = matchNativeItemType(dataTransfer);\n\n      if (_this.monitor.isDragging()) {\n        if (dataTransfer && typeof dataTransfer.setDragImage === 'function') {\n          // Use custom drag image if user specifies it.\n          // If child drag source refuses drag but parent agrees,\n          // use parent's node as drag image. Neither works in IE though.\n          var sourceId = _this.monitor.getSourceId();\n\n          var sourceNode = _this.sourceNodes.get(sourceId);\n\n          var dragPreview = _this.sourcePreviewNodes.get(sourceId) || sourceNode;\n\n          if (dragPreview) {\n            var _this$getCurrentSourc = _this.getCurrentSourcePreviewNodeOptions(),\n                anchorX = _this$getCurrentSourc.anchorX,\n                anchorY = _this$getCurrentSourc.anchorY,\n                offsetX = _this$getCurrentSourc.offsetX,\n                offsetY = _this$getCurrentSourc.offsetY;\n\n            var anchorPoint = {\n              anchorX: anchorX,\n              anchorY: anchorY\n            };\n            var offsetPoint = {\n              offsetX: offsetX,\n              offsetY: offsetY\n            };\n            var dragPreviewOffset = getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint);\n            dataTransfer.setDragImage(dragPreview, dragPreviewOffset.x, dragPreviewOffset.y);\n          }\n        }\n\n        try {\n          // Firefox won't drag without setting data\n          dataTransfer === null || dataTransfer === void 0 ? void 0 : dataTransfer.setData('application/json', {});\n        } catch (err) {// IE doesn't support MIME types in setData\n        } // Store drag source node so we can check whether\n        // it is removed from DOM and trigger endDrag manually.\n\n\n        _this.setCurrentDragSourceNode(e.target); // Now we are ready to publish the drag source.. or are we not?\n\n\n        var _this$getCurrentSourc2 = _this.getCurrentSourcePreviewNodeOptions(),\n            captureDraggingState = _this$getCurrentSourc2.captureDraggingState;\n\n        if (!captureDraggingState) {\n          // Usually we want to publish it in the next tick so that browser\n          // is able to screenshot the current (not yet dragging) state.\n          //\n          // It also neatly avoids a situation where render() returns null\n          // in the same tick for the source element, and browser freaks out.\n          setTimeout(function () {\n            return _this.actions.publishDragSource();\n          }, 0);\n        } else {\n          // In some cases the user may want to override this behavior, e.g.\n          // to work around IE not supporting custom drag previews.\n          //\n          // When using a custom drag layer, the only way to prevent\n          // the default drag preview from drawing in IE is to screenshot\n          // the dragging state in which the node itself has zero opacity\n          // and height. In this case, though, returning null from render()\n          // will abruptly end the dragging, which is not obvious.\n          //\n          // This is the reason such behavior is strictly opt-in.\n          _this.actions.publishDragSource();\n        }\n      } else if (nativeType) {\n        // A native item (such as URL) dragged from inside the document\n        _this.beginDragNativeItem(nativeType);\n      } else if (dataTransfer && !dataTransfer.types && (e.target && !e.target.hasAttribute || !e.target.hasAttribute('draggable'))) {\n        // Looks like a Safari bug: dataTransfer.types is null, but there was no draggable.\n        // Just let it drag. It's a native type (URL or text) and will be picked up in\n        // dragenter handler.\n        return;\n      } else {\n        // If by this time no drag source reacted, tell browser not to drag.\n        e.preventDefault();\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragEndCapture\", function () {\n      if (_this.clearCurrentDragSourceNode() && _this.monitor.isDragging()) {\n        // Firefox can dispatch this event in an infinite loop\n        // if dragend handler does something like showing an alert.\n        // Only proceed if we have not handled it already.\n        _this.actions.endDrag();\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragEnterCapture\", function (e) {\n      _this.dragEnterTargetIds = [];\n\n      var isFirstEnter = _this.enterLeaveCounter.enter(e.target);\n\n      if (!isFirstEnter || _this.monitor.isDragging()) {\n        return;\n      }\n\n      var dataTransfer = e.dataTransfer;\n      var nativeType = matchNativeItemType(dataTransfer);\n\n      if (nativeType) {\n        // A native item (such as file or URL) dragged from outside the document\n        _this.beginDragNativeItem(nativeType, dataTransfer);\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragEnter\", function (e) {\n      var dragEnterTargetIds = _this.dragEnterTargetIds;\n      _this.dragEnterTargetIds = [];\n\n      if (!_this.monitor.isDragging()) {\n        // This is probably a native item type we don't understand.\n        return;\n      }\n\n      _this.altKeyPressed = e.altKey; // If the target changes position as the result of `dragenter`, `dragover` might still\n      // get dispatched despite target being no longer there. The easy solution is to check\n      // whether there actually is a target before firing `hover`.\n\n      if (dragEnterTargetIds.length > 0) {\n        _this.actions.hover(dragEnterTargetIds, {\n          clientOffset: getEventClientOffset$1(e)\n        });\n      }\n\n      var canDrop = dragEnterTargetIds.some(function (targetId) {\n        return _this.monitor.canDropOnTarget(targetId);\n      });\n\n      if (canDrop) {\n        // IE requires this to fire dragover events\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n        }\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragOverCapture\", function () {\n      _this.dragOverTargetIds = [];\n    });\n\n    _defineProperty$2(this, \"handleTopDragOver\", function (e) {\n      var dragOverTargetIds = _this.dragOverTargetIds;\n      _this.dragOverTargetIds = [];\n\n      if (!_this.monitor.isDragging()) {\n        // This is probably a native item type we don't understand.\n        // Prevent default \"drop and blow away the whole document\" action.\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = 'none';\n        }\n\n        return;\n      }\n\n      _this.altKeyPressed = e.altKey;\n      _this.lastClientOffset = getEventClientOffset$1(e);\n\n      if (_this.hoverRafId === null && typeof requestAnimationFrame !== 'undefined') {\n        _this.hoverRafId = requestAnimationFrame(function () {\n          if (_this.monitor.isDragging()) {\n            _this.actions.hover(dragOverTargetIds || [], {\n              clientOffset: _this.lastClientOffset\n            });\n          }\n\n          _this.hoverRafId = null;\n        });\n      }\n\n      var canDrop = (dragOverTargetIds || []).some(function (targetId) {\n        return _this.monitor.canDropOnTarget(targetId);\n      });\n\n      if (canDrop) {\n        // Show user-specified drop effect.\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n        }\n      } else if (_this.isDraggingNativeItem()) {\n        // Don't show a nice cursor but still prevent default\n        // \"drop and blow away the whole document\" action.\n        e.preventDefault();\n      } else {\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = 'none';\n        }\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragLeaveCapture\", function (e) {\n      if (_this.isDraggingNativeItem()) {\n        e.preventDefault();\n      }\n\n      var isLastLeave = _this.enterLeaveCounter.leave(e.target);\n\n      if (!isLastLeave) {\n        return;\n      }\n\n      if (_this.isDraggingNativeItem()) {\n        setTimeout(function () {\n          return _this.endDragNativeItem();\n        }, 0);\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDropCapture\", function (e) {\n      _this.dropTargetIds = [];\n\n      if (_this.isDraggingNativeItem()) {\n        var _this$currentNativeSo;\n\n        e.preventDefault();\n        (_this$currentNativeSo = _this.currentNativeSource) === null || _this$currentNativeSo === void 0 ? void 0 : _this$currentNativeSo.loadDataTransfer(e.dataTransfer);\n      } else if (matchNativeItemType(e.dataTransfer)) {\n        // Dragging some elements, like <a> and <img> may still behave like a native drag event,\n        // even if the current drag event matches a user-defined type.\n        // Stop the default behavior when we're not expecting a native item to be dropped.\n        e.preventDefault();\n      }\n\n      _this.enterLeaveCounter.reset();\n    });\n\n    _defineProperty$2(this, \"handleTopDrop\", function (e) {\n      var dropTargetIds = _this.dropTargetIds;\n      _this.dropTargetIds = [];\n\n      _this.actions.hover(dropTargetIds, {\n        clientOffset: getEventClientOffset$1(e)\n      });\n\n      _this.actions.drop({\n        dropEffect: _this.getCurrentDropEffect()\n      });\n\n      if (_this.isDraggingNativeItem()) {\n        _this.endDragNativeItem();\n      } else if (_this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      }\n    });\n\n    _defineProperty$2(this, \"handleSelectStart\", function (e) {\n      var target = e.target; // Only IE requires us to explicitly say\n      // we want drag drop operation to start\n\n      if (typeof target.dragDrop !== 'function') {\n        return;\n      } // Inputs and textareas should be selectable\n\n\n      if (target.tagName === 'INPUT' || target.tagName === 'SELECT' || target.tagName === 'TEXTAREA' || target.isContentEditable) {\n        return;\n      } // For other targets, ask IE\n      // to enable drag and drop\n\n\n      e.preventDefault();\n      target.dragDrop();\n    });\n\n    this.options = new OptionsReader$1(globalContext, options);\n    this.actions = manager.getActions();\n    this.monitor = manager.getMonitor();\n    this.registry = manager.getRegistry();\n    this.enterLeaveCounter = new EnterLeaveCounter(this.isNodeInDocument);\n  }\n  /**\n   * Generate profiling statistics for the HTML5Backend.\n   */\n\n\n  _createClass$2(HTML5BackendImpl, [{\n    key: \"profile\",\n    value: function profile() {\n      var _this$dragStartSource, _this$dragOverTargetI;\n\n      return {\n        sourcePreviewNodes: this.sourcePreviewNodes.size,\n        sourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,\n        sourceNodeOptions: this.sourceNodeOptions.size,\n        sourceNodes: this.sourceNodes.size,\n        dragStartSourceIds: ((_this$dragStartSource = this.dragStartSourceIds) === null || _this$dragStartSource === void 0 ? void 0 : _this$dragStartSource.length) || 0,\n        dropTargetIds: this.dropTargetIds.length,\n        dragEnterTargetIds: this.dragEnterTargetIds.length,\n        dragOverTargetIds: ((_this$dragOverTargetI = this.dragOverTargetIds) === null || _this$dragOverTargetI === void 0 ? void 0 : _this$dragOverTargetI.length) || 0\n      };\n    } // public for test\n\n  }, {\n    key: \"window\",\n    get: function get() {\n      return this.options.window;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      return this.options.document;\n    }\n    /**\n     * Get the root element to use for event subscriptions\n     */\n\n  }, {\n    key: \"rootElement\",\n    get: function get() {\n      return this.options.rootElement;\n    }\n  }, {\n    key: \"setup\",\n    value: function setup() {\n      var root = this.rootElement;\n\n      if (root === undefined) {\n        return;\n      }\n\n      if (root.__isReactDndBackendSetUp) {\n        throw new Error('Cannot have two HTML5 backends at the same time.');\n      }\n\n      root.__isReactDndBackendSetUp = true;\n      this.addEventListeners(root);\n    }\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      var root = this.rootElement;\n\n      if (root === undefined) {\n        return;\n      }\n\n      root.__isReactDndBackendSetUp = false;\n      this.removeEventListeners(this.rootElement);\n      this.clearCurrentDragSourceNode();\n\n      if (this.asyncEndDragFrameId) {\n        var _this$window;\n\n        (_this$window = this.window) === null || _this$window === void 0 ? void 0 : _this$window.cancelAnimationFrame(this.asyncEndDragFrameId);\n      }\n    }\n  }, {\n    key: \"connectDragPreview\",\n    value: function connectDragPreview(sourceId, node, options) {\n      var _this2 = this;\n\n      this.sourcePreviewNodeOptions.set(sourceId, options);\n      this.sourcePreviewNodes.set(sourceId, node);\n      return function () {\n        _this2.sourcePreviewNodes.delete(sourceId);\n\n        _this2.sourcePreviewNodeOptions.delete(sourceId);\n      };\n    }\n  }, {\n    key: \"connectDragSource\",\n    value: function connectDragSource(sourceId, node, options) {\n      var _this3 = this;\n\n      this.sourceNodes.set(sourceId, node);\n      this.sourceNodeOptions.set(sourceId, options);\n\n      var handleDragStart = function handleDragStart(e) {\n        return _this3.handleDragStart(e, sourceId);\n      };\n\n      var handleSelectStart = function handleSelectStart(e) {\n        return _this3.handleSelectStart(e);\n      };\n\n      node.setAttribute('draggable', 'true');\n      node.addEventListener('dragstart', handleDragStart);\n      node.addEventListener('selectstart', handleSelectStart);\n      return function () {\n        _this3.sourceNodes.delete(sourceId);\n\n        _this3.sourceNodeOptions.delete(sourceId);\n\n        node.removeEventListener('dragstart', handleDragStart);\n        node.removeEventListener('selectstart', handleSelectStart);\n        node.setAttribute('draggable', 'false');\n      };\n    }\n  }, {\n    key: \"connectDropTarget\",\n    value: function connectDropTarget(targetId, node) {\n      var _this4 = this;\n\n      var handleDragEnter = function handleDragEnter(e) {\n        return _this4.handleDragEnter(e, targetId);\n      };\n\n      var handleDragOver = function handleDragOver(e) {\n        return _this4.handleDragOver(e, targetId);\n      };\n\n      var handleDrop = function handleDrop(e) {\n        return _this4.handleDrop(e, targetId);\n      };\n\n      node.addEventListener('dragenter', handleDragEnter);\n      node.addEventListener('dragover', handleDragOver);\n      node.addEventListener('drop', handleDrop);\n      return function () {\n        node.removeEventListener('dragenter', handleDragEnter);\n        node.removeEventListener('dragover', handleDragOver);\n        node.removeEventListener('drop', handleDrop);\n      };\n    }\n  }, {\n    key: \"addEventListeners\",\n    value: function addEventListeners(target) {\n      // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n      if (!target.addEventListener) {\n        return;\n      }\n\n      target.addEventListener('dragstart', this.handleTopDragStart);\n      target.addEventListener('dragstart', this.handleTopDragStartCapture, true);\n      target.addEventListener('dragend', this.handleTopDragEndCapture, true);\n      target.addEventListener('dragenter', this.handleTopDragEnter);\n      target.addEventListener('dragenter', this.handleTopDragEnterCapture, true);\n      target.addEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n      target.addEventListener('dragover', this.handleTopDragOver);\n      target.addEventListener('dragover', this.handleTopDragOverCapture, true);\n      target.addEventListener('drop', this.handleTopDrop);\n      target.addEventListener('drop', this.handleTopDropCapture, true);\n    }\n  }, {\n    key: \"removeEventListeners\",\n    value: function removeEventListeners(target) {\n      // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n      if (!target.removeEventListener) {\n        return;\n      }\n\n      target.removeEventListener('dragstart', this.handleTopDragStart);\n      target.removeEventListener('dragstart', this.handleTopDragStartCapture, true);\n      target.removeEventListener('dragend', this.handleTopDragEndCapture, true);\n      target.removeEventListener('dragenter', this.handleTopDragEnter);\n      target.removeEventListener('dragenter', this.handleTopDragEnterCapture, true);\n      target.removeEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n      target.removeEventListener('dragover', this.handleTopDragOver);\n      target.removeEventListener('dragover', this.handleTopDragOverCapture, true);\n      target.removeEventListener('drop', this.handleTopDrop);\n      target.removeEventListener('drop', this.handleTopDropCapture, true);\n    }\n  }, {\n    key: \"getCurrentSourceNodeOptions\",\n    value: function getCurrentSourceNodeOptions() {\n      var sourceId = this.monitor.getSourceId();\n      var sourceNodeOptions = this.sourceNodeOptions.get(sourceId);\n      return _objectSpread({\n        dropEffect: this.altKeyPressed ? 'copy' : 'move'\n      }, sourceNodeOptions || {});\n    }\n  }, {\n    key: \"getCurrentDropEffect\",\n    value: function getCurrentDropEffect() {\n      if (this.isDraggingNativeItem()) {\n        // It makes more sense to default to 'copy' for native resources\n        return 'copy';\n      }\n\n      return this.getCurrentSourceNodeOptions().dropEffect;\n    }\n  }, {\n    key: \"getCurrentSourcePreviewNodeOptions\",\n    value: function getCurrentSourcePreviewNodeOptions() {\n      var sourceId = this.monitor.getSourceId();\n      var sourcePreviewNodeOptions = this.sourcePreviewNodeOptions.get(sourceId);\n      return _objectSpread({\n        anchorX: 0.5,\n        anchorY: 0.5,\n        captureDraggingState: false\n      }, sourcePreviewNodeOptions || {});\n    }\n  }, {\n    key: \"isDraggingNativeItem\",\n    value: function isDraggingNativeItem() {\n      var itemType = this.monitor.getItemType();\n      return Object.keys(NativeTypes).some(function (key) {\n        return NativeTypes[key] === itemType;\n      });\n    }\n  }, {\n    key: \"beginDragNativeItem\",\n    value: function beginDragNativeItem(type, dataTransfer) {\n      this.clearCurrentDragSourceNode();\n      this.currentNativeSource = createNativeDragSource(type, dataTransfer);\n      this.currentNativeHandle = this.registry.addSource(type, this.currentNativeSource);\n      this.actions.beginDrag([this.currentNativeHandle]);\n    }\n  }, {\n    key: \"setCurrentDragSourceNode\",\n    value: function setCurrentDragSourceNode(node) {\n      var _this5 = this;\n\n      this.clearCurrentDragSourceNode();\n      this.currentDragSourceNode = node; // A timeout of > 0 is necessary to resolve Firefox issue referenced\n      // See:\n      //   * https://github.com/react-dnd/react-dnd/pull/928\n      //   * https://github.com/react-dnd/react-dnd/issues/869\n\n      var MOUSE_MOVE_TIMEOUT = 1000; // Receiving a mouse event in the middle of a dragging operation\n      // means it has ended and the drag source node disappeared from DOM,\n      // so the browser didn't dispatch the dragend event.\n      //\n      // We need to wait before we start listening for mousemove events.\n      // This is needed because the drag preview needs to be drawn or else it fires an 'mousemove' event\n      // immediately in some browsers.\n      //\n      // See:\n      //   * https://github.com/react-dnd/react-dnd/pull/928\n      //   * https://github.com/react-dnd/react-dnd/issues/869\n      //\n\n      this.mouseMoveTimeoutTimer = setTimeout(function () {\n        var _this5$rootElement;\n\n        return (_this5$rootElement = _this5.rootElement) === null || _this5$rootElement === void 0 ? void 0 : _this5$rootElement.addEventListener('mousemove', _this5.endDragIfSourceWasRemovedFromDOM, true);\n      }, MOUSE_MOVE_TIMEOUT);\n    }\n  }, {\n    key: \"clearCurrentDragSourceNode\",\n    value: function clearCurrentDragSourceNode() {\n      if (this.currentDragSourceNode) {\n        this.currentDragSourceNode = null;\n\n        if (this.rootElement) {\n          var _this$window2;\n\n          (_this$window2 = this.window) === null || _this$window2 === void 0 ? void 0 : _this$window2.clearTimeout(this.mouseMoveTimeoutTimer || undefined);\n          this.rootElement.removeEventListener('mousemove', this.endDragIfSourceWasRemovedFromDOM, true);\n        }\n\n        this.mouseMoveTimeoutTimer = null;\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"handleDragStart\",\n    value: function handleDragStart(e, sourceId) {\n      if (e.defaultPrevented) {\n        return;\n      }\n\n      if (!this.dragStartSourceIds) {\n        this.dragStartSourceIds = [];\n      }\n\n      this.dragStartSourceIds.unshift(sourceId);\n    }\n  }, {\n    key: \"handleDragEnter\",\n    value: function handleDragEnter(e, targetId) {\n      this.dragEnterTargetIds.unshift(targetId);\n    }\n  }, {\n    key: \"handleDragOver\",\n    value: function handleDragOver(e, targetId) {\n      if (this.dragOverTargetIds === null) {\n        this.dragOverTargetIds = [];\n      }\n\n      this.dragOverTargetIds.unshift(targetId);\n    }\n  }, {\n    key: \"handleDrop\",\n    value: function handleDrop(e, targetId) {\n      this.dropTargetIds.unshift(targetId);\n    }\n  }]);\n\n  return HTML5BackendImpl;\n}();\n\nvar emptyImage;\nfunction getEmptyImage() {\n  if (!emptyImage) {\n    emptyImage = new Image();\n    emptyImage.src = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n  }\n\n  return emptyImage;\n}\n\nvar HTML5Backend = function createBackend(manager, context, options) {\n  return new HTML5BackendImpl(manager, context, options);\n};\n\nvar ListenerType;\n\n(function (ListenerType) {\n  ListenerType[\"mouse\"] = \"mouse\";\n  ListenerType[\"touch\"] = \"touch\";\n  ListenerType[\"keyboard\"] = \"keyboard\";\n})(ListenerType || (ListenerType = {}));\n\n// Used for MouseEvent.buttons (note the s on the end).\nvar MouseButtons = {\n  Left: 1,\n  Right: 2,\n  Center: 4\n}; // Used for e.button (note the lack of an s on the end).\n\nvar MouseButton = {\n  Left: 0,\n  Center: 1,\n  Right: 2\n};\n/**\n * Only touch events and mouse events where the left button is pressed should initiate a drag.\n * @param {MouseEvent | TouchEvent} e The event\n */\n\nfunction eventShouldStartDrag(e) {\n  // For touch events, button will be undefined. If e.button is defined,\n  // then it should be MouseButton.Left.\n  return e.button === undefined || e.button === MouseButton.Left;\n}\n/**\n * Only touch events and mouse events where the left mouse button is no longer held should end a drag.\n * It's possible the user mouse downs with the left mouse button, then mouse down and ups with the right mouse button.\n * We don't want releasing the right mouse button to end the drag.\n * @param {MouseEvent | TouchEvent} e The event\n */\n\nfunction eventShouldEndDrag(e) {\n  // Touch events will have buttons be undefined, while mouse events will have e.buttons's left button\n  // bit field unset if the left mouse button has been released\n  return e.buttons === undefined || (e.buttons & MouseButtons.Left) === 0;\n}\nfunction isTouchEvent(e) {\n  return !!e.targetTouches;\n}\n\nvar ELEMENT_NODE = 1;\nfunction getNodeClientOffset(node) {\n  var el = node.nodeType === ELEMENT_NODE ? node : node.parentElement;\n\n  if (!el) {\n    return undefined;\n  }\n\n  var _el$getBoundingClient = el.getBoundingClientRect(),\n      top = _el$getBoundingClient.top,\n      left = _el$getBoundingClient.left;\n\n  return {\n    x: left,\n    y: top\n  };\n}\nfunction getEventClientTouchOffset(e, lastTargetTouchFallback) {\n  if (e.targetTouches.length === 1) {\n    return getEventClientOffset(e.targetTouches[0]);\n  } else if (lastTargetTouchFallback && e.touches.length === 1) {\n    if (e.touches[0].target === lastTargetTouchFallback.target) {\n      return getEventClientOffset(e.touches[0]);\n    }\n  }\n}\nfunction getEventClientOffset(e, lastTargetTouchFallback) {\n  if (isTouchEvent(e)) {\n    return getEventClientTouchOffset(e, lastTargetTouchFallback);\n  } else {\n    return {\n      x: e.clientX,\n      y: e.clientY\n    };\n  }\n}\n\nfunction distance(x1, y1, x2, y2) {\n  return Math.sqrt(Math.pow(Math.abs(x2 - x1), 2) + Math.pow(Math.abs(y2 - y1), 2));\n}\nfunction inAngleRanges(x1, y1, x2, y2, angleRanges) {\n  if (!angleRanges) {\n    return false;\n  }\n\n  var angle = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI + 180;\n\n  for (var i = 0; i < angleRanges.length; ++i) {\n    if ((angleRanges[i].start == null || angle >= angleRanges[i].start) && (angleRanges[i].end == null || angle <= angleRanges[i].end)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nvar supportsPassive = function () {\n  // simular to jQuery's test\n  var supported = false;\n\n  try {\n    addEventListener('test', function () {// do nothing\n    }, Object.defineProperty({}, 'passive', {\n      get: function get() {\n        supported = true;\n        return true;\n      }\n    }));\n  } catch (e) {// do nothing\n  }\n\n  return supported;\n}();\n\nfunction _classCallCheck$1(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$1(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$1(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$1(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$1(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$1(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar OptionsReader = /*#__PURE__*/function () {\n  function OptionsReader(args, context) {\n    _classCallCheck$1(this, OptionsReader);\n\n    _defineProperty$1(this, \"args\", void 0);\n\n    _defineProperty$1(this, \"context\", void 0);\n\n    this.args = args;\n    this.context = context;\n  }\n\n  _createClass$1(OptionsReader, [{\n    key: \"delay\",\n    get: function get() {\n      var _this$args$delay;\n\n      return (_this$args$delay = this.args.delay) !== null && _this$args$delay !== void 0 ? _this$args$delay : 0;\n    }\n  }, {\n    key: \"scrollAngleRanges\",\n    get: function get() {\n      return this.args.scrollAngleRanges;\n    }\n  }, {\n    key: \"getDropTargetElementsAtPoint\",\n    get: function get() {\n      return this.args.getDropTargetElementsAtPoint;\n    }\n  }, {\n    key: \"ignoreContextMenu\",\n    get: function get() {\n      var _this$args$ignoreCont;\n\n      return (_this$args$ignoreCont = this.args.ignoreContextMenu) !== null && _this$args$ignoreCont !== void 0 ? _this$args$ignoreCont : false;\n    }\n  }, {\n    key: \"enableHoverOutsideTarget\",\n    get: function get() {\n      var _this$args$enableHove;\n\n      return (_this$args$enableHove = this.args.enableHoverOutsideTarget) !== null && _this$args$enableHove !== void 0 ? _this$args$enableHove : false;\n    }\n  }, {\n    key: \"enableKeyboardEvents\",\n    get: function get() {\n      var _this$args$enableKeyb;\n\n      return (_this$args$enableKeyb = this.args.enableKeyboardEvents) !== null && _this$args$enableKeyb !== void 0 ? _this$args$enableKeyb : false;\n    }\n  }, {\n    key: \"enableMouseEvents\",\n    get: function get() {\n      var _this$args$enableMous;\n\n      return (_this$args$enableMous = this.args.enableMouseEvents) !== null && _this$args$enableMous !== void 0 ? _this$args$enableMous : false;\n    }\n  }, {\n    key: \"enableTouchEvents\",\n    get: function get() {\n      var _this$args$enableTouc;\n\n      return (_this$args$enableTouc = this.args.enableTouchEvents) !== null && _this$args$enableTouc !== void 0 ? _this$args$enableTouc : true;\n    }\n  }, {\n    key: \"touchSlop\",\n    get: function get() {\n      return this.args.touchSlop || 0;\n    }\n  }, {\n    key: \"delayTouchStart\",\n    get: function get() {\n      var _ref, _this$args$delayTouch, _this$args, _this$args2;\n\n      return (_ref = (_this$args$delayTouch = (_this$args = this.args) === null || _this$args === void 0 ? void 0 : _this$args.delayTouchStart) !== null && _this$args$delayTouch !== void 0 ? _this$args$delayTouch : (_this$args2 = this.args) === null || _this$args2 === void 0 ? void 0 : _this$args2.delay) !== null && _ref !== void 0 ? _ref : 0;\n    }\n  }, {\n    key: \"delayMouseStart\",\n    get: function get() {\n      var _ref2, _this$args$delayMouse, _this$args3, _this$args4;\n\n      return (_ref2 = (_this$args$delayMouse = (_this$args3 = this.args) === null || _this$args3 === void 0 ? void 0 : _this$args3.delayMouseStart) !== null && _this$args$delayMouse !== void 0 ? _this$args$delayMouse : (_this$args4 = this.args) === null || _this$args4 === void 0 ? void 0 : _this$args4.delay) !== null && _ref2 !== void 0 ? _ref2 : 0;\n    }\n  }, {\n    key: \"window\",\n    get: function get() {\n      if (this.context && this.context.window) {\n        return this.context.window;\n      } else if (typeof window !== 'undefined') {\n        return window;\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      var _this$context;\n\n      if ((_this$context = this.context) !== null && _this$context !== void 0 && _this$context.document) {\n        return this.context.document;\n      }\n\n      if (this.window) {\n        return this.window.document;\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"rootElement\",\n    get: function get() {\n      var _this$args5;\n\n      return ((_this$args5 = this.args) === null || _this$args5 === void 0 ? void 0 : _this$args5.rootElement) || this.document;\n    }\n  }]);\n\n  return OptionsReader;\n}();\n\nvar _eventNames;\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar eventNames = (_eventNames = {}, _defineProperty(_eventNames, ListenerType.mouse, {\n  start: 'mousedown',\n  move: 'mousemove',\n  end: 'mouseup',\n  contextmenu: 'contextmenu'\n}), _defineProperty(_eventNames, ListenerType.touch, {\n  start: 'touchstart',\n  move: 'touchmove',\n  end: 'touchend'\n}), _defineProperty(_eventNames, ListenerType.keyboard, {\n  keydown: 'keydown'\n}), _eventNames);\nvar TouchBackendImpl = /*#__PURE__*/function () {\n  // React-DnD Dependencies\n  // Internal State\n  // Patch for iOS 13, discussion over #1585\n  function TouchBackendImpl(manager, context, options) {\n    var _this = this;\n\n    _classCallCheck(this, TouchBackendImpl);\n\n    _defineProperty(this, \"options\", void 0);\n\n    _defineProperty(this, \"actions\", void 0);\n\n    _defineProperty(this, \"monitor\", void 0);\n\n    _defineProperty(this, \"sourceNodes\", void 0);\n\n    _defineProperty(this, \"sourcePreviewNodes\", void 0);\n\n    _defineProperty(this, \"sourcePreviewNodeOptions\", void 0);\n\n    _defineProperty(this, \"targetNodes\", void 0);\n\n    _defineProperty(this, \"_mouseClientOffset\", void 0);\n\n    _defineProperty(this, \"_isScrolling\", void 0);\n\n    _defineProperty(this, \"listenerTypes\", void 0);\n\n    _defineProperty(this, \"moveStartSourceIds\", void 0);\n\n    _defineProperty(this, \"waitingForDelay\", void 0);\n\n    _defineProperty(this, \"timeout\", void 0);\n\n    _defineProperty(this, \"dragOverTargetIds\", void 0);\n\n    _defineProperty(this, \"draggedSourceNode\", void 0);\n\n    _defineProperty(this, \"draggedSourceNodeRemovalObserver\", void 0);\n\n    _defineProperty(this, \"lastTargetTouchFallback\", void 0);\n\n    _defineProperty(this, \"getSourceClientOffset\", function (sourceId) {\n      var element = _this.sourceNodes.get(sourceId);\n\n      return element && getNodeClientOffset(element);\n    });\n\n    _defineProperty(this, \"handleTopMoveStartCapture\", function (e) {\n      if (!eventShouldStartDrag(e)) {\n        return;\n      }\n\n      _this.moveStartSourceIds = [];\n    });\n\n    _defineProperty(this, \"handleMoveStart\", function (sourceId) {\n      // Just because we received an event doesn't necessarily mean we need to collect drag sources.\n      // We only collect start collecting drag sources on touch and left mouse events.\n      if (Array.isArray(_this.moveStartSourceIds)) {\n        _this.moveStartSourceIds.unshift(sourceId);\n      }\n    });\n\n    _defineProperty(this, \"handleTopMoveStart\", function (e) {\n      if (!eventShouldStartDrag(e)) {\n        return;\n      } // Don't prematurely preventDefault() here since it might:\n      // 1. Mess up scrolling\n      // 2. Mess up long tap (which brings up context menu)\n      // 3. If there's an anchor link as a child, tap won't be triggered on link\n\n\n      var clientOffset = getEventClientOffset(e);\n\n      if (clientOffset) {\n        if (isTouchEvent(e)) {\n          _this.lastTargetTouchFallback = e.targetTouches[0];\n        }\n\n        _this._mouseClientOffset = clientOffset;\n      }\n\n      _this.waitingForDelay = false;\n    });\n\n    _defineProperty(this, \"handleTopMoveStartDelay\", function (e) {\n      if (!eventShouldStartDrag(e)) {\n        return;\n      }\n\n      var delay = e.type === eventNames.touch.start ? _this.options.delayTouchStart : _this.options.delayMouseStart;\n      _this.timeout = setTimeout(_this.handleTopMoveStart.bind(_this, e), delay);\n      _this.waitingForDelay = true;\n    });\n\n    _defineProperty(this, \"handleTopMoveCapture\", function () {\n      _this.dragOverTargetIds = [];\n    });\n\n    _defineProperty(this, \"handleMove\", function (_evt, targetId) {\n      if (_this.dragOverTargetIds) {\n        _this.dragOverTargetIds.unshift(targetId);\n      }\n    });\n\n    _defineProperty(this, \"handleTopMove\", function (e) {\n      if (_this.timeout) {\n        clearTimeout(_this.timeout);\n      }\n\n      if (!_this.document || _this.waitingForDelay) {\n        return;\n      }\n\n      var moveStartSourceIds = _this.moveStartSourceIds,\n          dragOverTargetIds = _this.dragOverTargetIds;\n      var enableHoverOutsideTarget = _this.options.enableHoverOutsideTarget;\n      var clientOffset = getEventClientOffset(e, _this.lastTargetTouchFallback);\n\n      if (!clientOffset) {\n        return;\n      } // If the touch move started as a scroll, or is is between the scroll angles\n\n\n      if (_this._isScrolling || !_this.monitor.isDragging() && inAngleRanges(_this._mouseClientOffset.x || 0, _this._mouseClientOffset.y || 0, clientOffset.x, clientOffset.y, _this.options.scrollAngleRanges)) {\n        _this._isScrolling = true;\n        return;\n      } // If we're not dragging and we've moved a little, that counts as a drag start\n\n\n      if (!_this.monitor.isDragging() && // eslint-disable-next-line no-prototype-builtins\n      _this._mouseClientOffset.hasOwnProperty('x') && moveStartSourceIds && distance(_this._mouseClientOffset.x || 0, _this._mouseClientOffset.y || 0, clientOffset.x, clientOffset.y) > (_this.options.touchSlop ? _this.options.touchSlop : 0)) {\n        _this.moveStartSourceIds = undefined;\n\n        _this.actions.beginDrag(moveStartSourceIds, {\n          clientOffset: _this._mouseClientOffset,\n          getSourceClientOffset: _this.getSourceClientOffset,\n          publishSource: false\n        });\n      }\n\n      if (!_this.monitor.isDragging()) {\n        return;\n      }\n\n      var sourceNode = _this.sourceNodes.get(_this.monitor.getSourceId());\n\n      _this.installSourceNodeRemovalObserver(sourceNode);\n\n      _this.actions.publishDragSource();\n\n      if (e.cancelable) e.preventDefault(); // Get the node elements of the hovered DropTargets\n\n      var dragOverTargetNodes = (dragOverTargetIds || []).map(function (key) {\n        return _this.targetNodes.get(key);\n      }).filter(function (e) {\n        return !!e;\n      }); // Get the a ordered list of nodes that are touched by\n\n      var elementsAtPoint = _this.options.getDropTargetElementsAtPoint ? _this.options.getDropTargetElementsAtPoint(clientOffset.x, clientOffset.y, dragOverTargetNodes) : _this.document.elementsFromPoint(clientOffset.x, clientOffset.y); // Extend list with parents that are not receiving elementsFromPoint events (size 0 elements and svg groups)\n\n      var elementsAtPointExtended = [];\n\n      for (var nodeId in elementsAtPoint) {\n        // eslint-disable-next-line no-prototype-builtins\n        if (!elementsAtPoint.hasOwnProperty(nodeId)) {\n          continue;\n        }\n\n        var currentNode = elementsAtPoint[nodeId];\n        elementsAtPointExtended.push(currentNode);\n\n        while (currentNode) {\n          currentNode = currentNode.parentElement;\n\n          if (currentNode && elementsAtPointExtended.indexOf(currentNode) === -1) {\n            elementsAtPointExtended.push(currentNode);\n          }\n        }\n      }\n\n      var orderedDragOverTargetIds = elementsAtPointExtended // Filter off nodes that arent a hovered DropTargets nodes\n      .filter(function (node) {\n        return dragOverTargetNodes.indexOf(node) > -1;\n      }) // Map back the nodes elements to targetIds\n      .map(function (node) {\n        return _this._getDropTargetId(node);\n      }) // Filter off possible null rows\n      .filter(function (node) {\n        return !!node;\n      }).filter(function (id, index, ids) {\n        return ids.indexOf(id) === index;\n      }); // Invoke hover for drop targets when source node is still over and pointer is outside\n\n      if (enableHoverOutsideTarget) {\n        for (var targetId in _this.targetNodes) {\n          var targetNode = _this.targetNodes.get(targetId);\n\n          if (sourceNode && targetNode && targetNode.contains(sourceNode) && orderedDragOverTargetIds.indexOf(targetId) === -1) {\n            orderedDragOverTargetIds.unshift(targetId);\n            break;\n          }\n        }\n      } // Reverse order because dnd-core reverse it before calling the DropTarget drop methods\n\n\n      orderedDragOverTargetIds.reverse();\n\n      _this.actions.hover(orderedDragOverTargetIds, {\n        clientOffset: clientOffset\n      });\n    });\n\n    _defineProperty(this, \"_getDropTargetId\", function (node) {\n      var keys = _this.targetNodes.keys();\n\n      var next = keys.next();\n\n      while (next.done === false) {\n        var targetId = next.value;\n\n        if (node === _this.targetNodes.get(targetId)) {\n          return targetId;\n        } else {\n          next = keys.next();\n        }\n      }\n\n      return undefined;\n    });\n\n    _defineProperty(this, \"handleTopMoveEndCapture\", function (e) {\n      _this._isScrolling = false;\n      _this.lastTargetTouchFallback = undefined;\n\n      if (!eventShouldEndDrag(e)) {\n        return;\n      }\n\n      if (!_this.monitor.isDragging() || _this.monitor.didDrop()) {\n        _this.moveStartSourceIds = undefined;\n        return;\n      }\n\n      if (e.cancelable) e.preventDefault();\n      _this._mouseClientOffset = {};\n\n      _this.uninstallSourceNodeRemovalObserver();\n\n      _this.actions.drop();\n\n      _this.actions.endDrag();\n    });\n\n    _defineProperty(this, \"handleCancelOnEscape\", function (e) {\n      if (e.key === 'Escape' && _this.monitor.isDragging()) {\n        _this._mouseClientOffset = {};\n\n        _this.uninstallSourceNodeRemovalObserver();\n\n        _this.actions.endDrag();\n      }\n    });\n\n    this.options = new OptionsReader(options, context);\n    this.actions = manager.getActions();\n    this.monitor = manager.getMonitor();\n    this.sourceNodes = new Map();\n    this.sourcePreviewNodes = new Map();\n    this.sourcePreviewNodeOptions = new Map();\n    this.targetNodes = new Map();\n    this.listenerTypes = [];\n    this._mouseClientOffset = {};\n    this._isScrolling = false;\n\n    if (this.options.enableMouseEvents) {\n      this.listenerTypes.push(ListenerType.mouse);\n    }\n\n    if (this.options.enableTouchEvents) {\n      this.listenerTypes.push(ListenerType.touch);\n    }\n\n    if (this.options.enableKeyboardEvents) {\n      this.listenerTypes.push(ListenerType.keyboard);\n    }\n  }\n  /**\n   * Generate profiling statistics for the HTML5Backend.\n   */\n\n\n  _createClass(TouchBackendImpl, [{\n    key: \"profile\",\n    value: function profile() {\n      var _this$dragOverTargetI;\n\n      return {\n        sourceNodes: this.sourceNodes.size,\n        sourcePreviewNodes: this.sourcePreviewNodes.size,\n        sourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,\n        targetNodes: this.targetNodes.size,\n        dragOverTargetIds: ((_this$dragOverTargetI = this.dragOverTargetIds) === null || _this$dragOverTargetI === void 0 ? void 0 : _this$dragOverTargetI.length) || 0\n      };\n    } // public for test\n\n  }, {\n    key: \"document\",\n    get: function get() {\n      return this.options.document;\n    }\n  }, {\n    key: \"setup\",\n    value: function setup() {\n      var root = this.options.rootElement;\n\n      if (!root) {\n        return;\n      }\n\n      invariant(!TouchBackendImpl.isSetUp, 'Cannot have two Touch backends at the same time.');\n      TouchBackendImpl.isSetUp = true;\n      this.addEventListener(root, 'start', this.getTopMoveStartHandler());\n      this.addEventListener(root, 'start', this.handleTopMoveStartCapture, true);\n      this.addEventListener(root, 'move', this.handleTopMove);\n      this.addEventListener(root, 'move', this.handleTopMoveCapture, true);\n      this.addEventListener(root, 'end', this.handleTopMoveEndCapture, true);\n\n      if (this.options.enableMouseEvents && !this.options.ignoreContextMenu) {\n        this.addEventListener(root, 'contextmenu', this.handleTopMoveEndCapture);\n      }\n\n      if (this.options.enableKeyboardEvents) {\n        this.addEventListener(root, 'keydown', this.handleCancelOnEscape, true);\n      }\n    }\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      var root = this.options.rootElement;\n\n      if (!root) {\n        return;\n      }\n\n      TouchBackendImpl.isSetUp = false;\n      this._mouseClientOffset = {};\n      this.removeEventListener(root, 'start', this.handleTopMoveStartCapture, true);\n      this.removeEventListener(root, 'start', this.handleTopMoveStart);\n      this.removeEventListener(root, 'move', this.handleTopMoveCapture, true);\n      this.removeEventListener(root, 'move', this.handleTopMove);\n      this.removeEventListener(root, 'end', this.handleTopMoveEndCapture, true);\n\n      if (this.options.enableMouseEvents && !this.options.ignoreContextMenu) {\n        this.removeEventListener(root, 'contextmenu', this.handleTopMoveEndCapture);\n      }\n\n      if (this.options.enableKeyboardEvents) {\n        this.removeEventListener(root, 'keydown', this.handleCancelOnEscape, true);\n      }\n\n      this.uninstallSourceNodeRemovalObserver();\n    }\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener(subject, event, handler, capture) {\n      var options = supportsPassive ? {\n        capture: capture,\n        passive: false\n      } : capture;\n      this.listenerTypes.forEach(function (listenerType) {\n        var evt = eventNames[listenerType][event];\n\n        if (evt) {\n          subject.addEventListener(evt, handler, options);\n        }\n      });\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener(subject, event, handler, capture) {\n      var options = supportsPassive ? {\n        capture: capture,\n        passive: false\n      } : capture;\n      this.listenerTypes.forEach(function (listenerType) {\n        var evt = eventNames[listenerType][event];\n\n        if (evt) {\n          subject.removeEventListener(evt, handler, options);\n        }\n      });\n    }\n  }, {\n    key: \"connectDragSource\",\n    value: function connectDragSource(sourceId, node) {\n      var _this2 = this;\n\n      var handleMoveStart = this.handleMoveStart.bind(this, sourceId);\n      this.sourceNodes.set(sourceId, node);\n      this.addEventListener(node, 'start', handleMoveStart);\n      return function () {\n        _this2.sourceNodes.delete(sourceId);\n\n        _this2.removeEventListener(node, 'start', handleMoveStart);\n      };\n    }\n  }, {\n    key: \"connectDragPreview\",\n    value: function connectDragPreview(sourceId, node, options) {\n      var _this3 = this;\n\n      this.sourcePreviewNodeOptions.set(sourceId, options);\n      this.sourcePreviewNodes.set(sourceId, node);\n      return function () {\n        _this3.sourcePreviewNodes.delete(sourceId);\n\n        _this3.sourcePreviewNodeOptions.delete(sourceId);\n      };\n    }\n  }, {\n    key: \"connectDropTarget\",\n    value: function connectDropTarget(targetId, node) {\n      var _this4 = this;\n\n      var root = this.options.rootElement;\n\n      if (!this.document || !root) {\n        return function () {\n          /* noop */\n        };\n      }\n\n      var handleMove = function handleMove(e) {\n        if (!_this4.document || !root || !_this4.monitor.isDragging()) {\n          return;\n        }\n\n        var coords;\n        /**\n         * Grab the coordinates for the current mouse/touch position\n         */\n\n        switch (e.type) {\n          case eventNames.mouse.move:\n            coords = {\n              x: e.clientX,\n              y: e.clientY\n            };\n            break;\n\n          case eventNames.touch.move:\n            coords = {\n              x: e.touches[0].clientX,\n              y: e.touches[0].clientY\n            };\n            break;\n        }\n        /**\n         * Use the coordinates to grab the element the drag ended on.\n         * If the element is the same as the target node (or any of it's children) then we have hit a drop target and can handle the move.\n         */\n\n\n        var droppedOn = coords != null ? _this4.document.elementFromPoint(coords.x, coords.y) : undefined;\n        var childMatch = droppedOn && node.contains(droppedOn);\n\n        if (droppedOn === node || childMatch) {\n          return _this4.handleMove(e, targetId);\n        }\n      };\n      /**\n       * Attaching the event listener to the body so that touchmove will work while dragging over multiple target elements.\n       */\n\n\n      this.addEventListener(this.document.body, 'move', handleMove);\n      this.targetNodes.set(targetId, node);\n      return function () {\n        if (_this4.document) {\n          _this4.targetNodes.delete(targetId);\n\n          _this4.removeEventListener(_this4.document.body, 'move', handleMove);\n        }\n      };\n    }\n  }, {\n    key: \"getTopMoveStartHandler\",\n    value: function getTopMoveStartHandler() {\n      if (!this.options.delayTouchStart && !this.options.delayMouseStart) {\n        return this.handleTopMoveStart;\n      }\n\n      return this.handleTopMoveStartDelay;\n    }\n  }, {\n    key: \"installSourceNodeRemovalObserver\",\n    value: function installSourceNodeRemovalObserver(node) {\n      var _this5 = this;\n\n      this.uninstallSourceNodeRemovalObserver();\n      this.draggedSourceNode = node;\n      this.draggedSourceNodeRemovalObserver = new MutationObserver(function () {\n        if (node && !node.parentElement) {\n          _this5.resurrectSourceNode();\n\n          _this5.uninstallSourceNodeRemovalObserver();\n        }\n      });\n\n      if (!node || !node.parentElement) {\n        return;\n      }\n\n      this.draggedSourceNodeRemovalObserver.observe(node.parentElement, {\n        childList: true\n      });\n    }\n  }, {\n    key: \"resurrectSourceNode\",\n    value: function resurrectSourceNode() {\n      if (this.document && this.draggedSourceNode) {\n        this.draggedSourceNode.style.display = 'none';\n        this.draggedSourceNode.removeAttribute('data-reactid');\n        this.document.body.appendChild(this.draggedSourceNode);\n      }\n    }\n  }, {\n    key: \"uninstallSourceNodeRemovalObserver\",\n    value: function uninstallSourceNodeRemovalObserver() {\n      if (this.draggedSourceNodeRemovalObserver) {\n        this.draggedSourceNodeRemovalObserver.disconnect();\n      }\n\n      this.draggedSourceNodeRemovalObserver = undefined;\n      this.draggedSourceNode = undefined;\n    }\n  }]);\n\n  return TouchBackendImpl;\n}();\n\n_defineProperty(TouchBackendImpl, \"isSetUp\", void 0);\n\nvar TouchBackend = function createBackend(manager) {\n  var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return new TouchBackendImpl(manager, context, options);\n};\n\nvar HTML5toTouch = {\n  backends: [{\n    backend: HTML5Backend,\n    transition: MouseTransition\n  }, {\n    backend: TouchBackend,\n    options: {\n      enableMouseEvents: true\n    },\n    preview: true,\n    transition: TouchTransition\n  }]\n};\n\nconst COLUMNS = 'abcdefgh'.split('');\nconst chessboardDefaultProps = {\n  animationDuration: 300,\n  areArrowsAllowed: true,\n  arePiecesDraggable: true,\n  arePremovesAllowed: false,\n  boardOrientation: 'white',\n  boardWidth: 560,\n  clearPremovesOnRightClick: true,\n  customArrows: [],\n  customArrowColor: 'rgb(255,170,0)',\n  customBoardStyle: {},\n  customDarkSquareStyle: {\n    backgroundColor: '#B58863'\n  },\n  customDndBackend: undefined,\n  customDndBackendOptions: undefined,\n  customDropSquareStyle: {\n    boxShadow: 'inset 0 0 1px 6px rgba(255,255,255,0.75)'\n  },\n  customLightSquareStyle: {\n    backgroundColor: '#F0D9B5'\n  },\n  customPieces: {},\n  customPremoveDarkSquareStyle: {\n    backgroundColor: '#A42323'\n  },\n  customPremoveLightSquareStyle: {\n    backgroundColor: '#BD2828'\n  },\n  customSquareStyles: {},\n  dropOffBoardAction: 'snapback',\n  id: 0,\n  isDraggablePiece: () => true,\n  getPositionObject: () => {},\n  onDragOverSquare: () => {},\n  onMouseOutSquare: () => {},\n  onMouseOverSquare: () => {},\n  onPieceClick: () => {},\n  onPieceDragBegin: () => {},\n  onPieceDragEnd: () => {},\n  onPieceDrop: () => true,\n  onSquareClick: () => {},\n  onSquareRightClick: () => {},\n  position: 'start',\n  showBoardNotation: true,\n  // showSparePieces: false,\n  snapToCursor: true\n};\n\nconst startPositionObject = {\n  a8: 'bR',\n  b8: 'bN',\n  c8: 'bB',\n  d8: 'bQ',\n  e8: 'bK',\n  f8: 'bB',\n  g8: 'bN',\n  h8: 'bR',\n  a7: 'bP',\n  b7: 'bP',\n  c7: 'bP',\n  d7: 'bP',\n  e7: 'bP',\n  f7: 'bP',\n  g7: 'bP',\n  h7: 'bP',\n  a2: 'wP',\n  b2: 'wP',\n  c2: 'wP',\n  d2: 'wP',\n  e2: 'wP',\n  f2: 'wP',\n  g2: 'wP',\n  h2: 'wP',\n  a1: 'wR',\n  b1: 'wN',\n  c1: 'wB',\n  d1: 'wQ',\n  e1: 'wK',\n  f1: 'wB',\n  g1: 'wN',\n  h1: 'wR'\n};\nconst whiteColumnValues = {\n  a: 0,\n  b: 1,\n  c: 2,\n  d: 3,\n  e: 4,\n  f: 5,\n  g: 6,\n  h: 7\n};\nconst blackColumnValues = {\n  a: 7,\n  b: 6,\n  c: 5,\n  d: 4,\n  e: 3,\n  f: 2,\n  g: 1,\n  h: 0\n};\nconst whiteRows = [7, 6, 5, 4, 3, 2, 1, 0];\nconst blackRows = [0, 1, 2, 3, 4, 5, 6, 7];\nconst getRelativeCoords = (boardOrientation, boardWidth, square) => {\n  const squareWidth = boardWidth / 8;\n  const columns = boardOrientation === 'white' ? whiteColumnValues : blackColumnValues;\n  const rows = boardOrientation === 'white' ? whiteRows : blackRows;\n  const x = columns[square[0]] * squareWidth + squareWidth / 2;\n  const y = rows[square[1] - 1] * squareWidth + squareWidth / 2;\n  return {\n    x,\n    y\n  };\n};\nconst isDifferentFromStart = newPosition => {\n  let isDifferent = false;\n  Object.keys(startPositionObject).forEach(square => {\n    if (newPosition[square] !== startPositionObject[square]) isDifferent = true;\n  });\n  Object.keys(newPosition).forEach(square => {\n    if (startPositionObject[square] !== newPosition[square]) isDifferent = true;\n  });\n  return isDifferent;\n};\nconst getPositionDifferences = (currentPosition, newPosition) => {\n  const difference = {\n    removed: {},\n    added: {}\n  }; // removed from current\n\n  Object.keys(currentPosition).forEach(square => {\n    if (newPosition[square] !== currentPosition[square]) difference.removed[square] = currentPosition[square];\n  }); // added from new\n\n  Object.keys(newPosition).forEach(square => {\n    if (currentPosition[square] !== newPosition[square]) difference.added[square] = newPosition[square];\n  });\n  return difference;\n};\n\nfunction isString(s) {\n  return typeof s === 'string';\n}\n\nfunction convertPositionToObject(position) {\n  if (position === 'start') return fenToObj('rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR');\n  if (validFen(position)) return fenToObj(position);\n  if (validPositionObject(position)) return position;\n  return {};\n}\nfunction fenToObj(fen) {\n  if (!validFen(fen)) return false; // cut off any move, castling, etc info from the end. we're only interested in position information\n\n  fen = fen.replace(/ .+$/, '');\n  const rows = fen.split('/');\n  const position = {};\n  let currentRow = 8;\n\n  for (let i = 0; i < 8; i++) {\n    const row = rows[i].split('');\n    let colIdx = 0; // loop through each character in the FEN section\n\n    for (let j = 0; j < row.length; j++) {\n      // number / empty squares\n      if (row[j].search(/[1-8]/) !== -1) {\n        const numEmptySquares = parseInt(row[j], 10);\n        colIdx = colIdx + numEmptySquares;\n      } else {\n        // piece\n        const square = COLUMNS[colIdx] + currentRow;\n        position[square] = fenToPieceCode(row[j]);\n        colIdx = colIdx + 1;\n      }\n    }\n\n    currentRow = currentRow - 1;\n  }\n\n  return position;\n}\n\nfunction expandFenEmptySquares(fen) {\n  return fen.replace(/8/g, '11111111').replace(/7/g, '1111111').replace(/6/g, '111111').replace(/5/g, '11111').replace(/4/g, '1111').replace(/3/g, '111').replace(/2/g, '11');\n}\n\nfunction validFen(fen) {\n  if (!isString(fen)) return false; // cut off any move, castling, etc info from the end. we're only interested in position information\n\n  fen = fen.replace(/ .+$/, ''); // expand the empty square numbers to just 1s\n\n  fen = expandFenEmptySquares(fen); // FEN should be 8 sections separated by slashes\n\n  const chunks = fen.split('/');\n  if (chunks.length !== 8) return false; // check each section\n\n  for (let i = 0; i < 8; i++) {\n    if (chunks[i].length !== 8 || chunks[i].search(/[^kqrnbpKQRNBP1]/) !== -1) {\n      return false;\n    }\n  }\n\n  return true;\n} // convert FEN piece code to bP, wK, etc\n\nfunction fenToPieceCode(piece) {\n  // black piece\n  if (piece.toLowerCase() === piece) {\n    return 'b' + piece.toUpperCase();\n  } // white piece\n\n\n  return 'w' + piece.toUpperCase();\n}\n\nfunction validSquare(square) {\n  return isString(square) && square.search(/^[a-h][1-8]$/) !== -1;\n}\n\nfunction validPieceCode(code) {\n  return isString(code) && code.search(/^[bw][KQRNBP]$/) !== -1;\n}\n\nfunction validPositionObject(pos) {\n  if (pos === null || typeof pos !== 'object') return false;\n\n  for (const i in pos) {\n    if (!pos[i]) continue;\n\n    if (!validSquare(i) || !validPieceCode(pos[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nconst defaultPieces = {\n  wP: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsx(\"path\", {\n      d: \"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z\",\n      style: {\n        opacity: '1',\n        fill: '#ffffff',\n        fillOpacity: '1',\n        fillRule: 'nonzero',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'miter',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      }\n    })\n  }),\n  wR: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: '#ffffff',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14\",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 34,14 L 31,17 L 14,17 L 11,14\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 31,17 L 31,29.5 L 14,29.5 L 14,17\",\n        style: {\n          strokeLinecap: 'butt',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11,14 L 34,14\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        }\n      })]\n    })\n  }),\n  wN: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: 'none',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z\",\n        style: {\n          fill: '#000000',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z\",\n        transform: \"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)\",\n        style: {\n          fill: '#000000',\n          stroke: '#000000'\n        }\n      })]\n    })\n  }),\n  wB: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: 'none',\n        fillRule: 'evenodd',\n        fillOpacity: '1',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsxs(\"g\", {\n        style: {\n          fill: '#ffffff',\n          stroke: '#000000',\n          strokeLinecap: 'butt'\n        },\n        children: [/*#__PURE__*/jsx(\"path\", {\n          d: \"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z\"\n        })]\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        }\n      })]\n    })\n  }),\n  wQ: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        fill: '#ffffff',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinejoin: 'round'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11.5,30 C 15,29 30,29 33.5,30\",\n        style: {\n          fill: 'none'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12,33.5 C 18,32.5 27,32.5 33,33.5\",\n        style: {\n          fill: 'none'\n        }\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"6\",\n        cy: \"12\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"14\",\n        cy: \"9\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"22.5\",\n        cy: \"8\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"31\",\n        cy: \"9\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"39\",\n        cy: \"12\",\n        r: \"2\"\n      })]\n    })\n  }),\n  wK: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        fill: 'none',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 22.5,11.63 L 22.5,6\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 20,8 L 25,8\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#000000',\n          strokeLinecap: 'butt',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,30 C 18,27 27,27 32.5,30\",\n        style: {\n          fill: 'none',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5\",\n        style: {\n          fill: 'none',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,37 C 18,34 27,34 32.5,37\",\n        style: {\n          fill: 'none',\n          stroke: '#000000'\n        }\n      })]\n    })\n  }),\n  bP: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsx(\"path\", {\n      d: \"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z\",\n      style: {\n        opacity: '1',\n        fill: '#000000',\n        fillOpacity: '1',\n        fillRule: 'nonzero',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'miter',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      }\n    })\n  }),\n  bR: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: '#000000',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z \",\n        style: {\n          strokeLinecap: 'butt',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12,35.5 L 33,35.5 L 33,35.5\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeWidth: '1',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 13,31.5 L 32,31.5\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeWidth: '1',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 14,29.5 L 31,29.5\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeWidth: '1',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 14,16.5 L 31,16.5\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeWidth: '1',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11,14 L 34,14\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeWidth: '1',\n          strokeLinejoin: 'miter'\n        }\n      })]\n    })\n  }),\n  bN: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: 'none',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18\",\n        style: {\n          fill: '#000000',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10\",\n        style: {\n          fill: '#000000',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#ffffff'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z\",\n        transform: \"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#ffffff'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z \",\n        style: {\n          fill: '#ffffff',\n          stroke: 'none'\n        }\n      })]\n    })\n  }),\n  bB: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: 'none',\n        fillRule: 'evenodd',\n        fillOpacity: '1',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsxs(\"g\", {\n        style: {\n          fill: '#000000',\n          stroke: '#000000',\n          strokeLinecap: 'butt'\n        },\n        children: [/*#__PURE__*/jsx(\"path\", {\n          d: \"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z\"\n        })]\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeLinejoin: 'miter'\n        }\n      })]\n    })\n  }),\n  bQ: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        fill: '#000000',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z\",\n        style: {\n          strokeLinecap: 'butt',\n          fill: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11.5,30 C 15,29 30,29 33.5,30\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"m 12,33.5 c 6,-1 15,-1 21,0\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"6\",\n        cy: \"12\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"14\",\n        cy: \"9\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"22.5\",\n        cy: \"8\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"31\",\n        cy: \"9\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"39\",\n        cy: \"12\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11,38.5 A 35,35 1 0 0 34,38.5\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsxs(\"g\", {\n        style: {\n          fill: 'none',\n          stroke: '#ffffff'\n        },\n        children: [/*#__PURE__*/jsx(\"path\", {\n          d: \"M 11,29 A 35,35 1 0 1 34,29\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 12.5,31.5 L 32.5,31.5\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5\"\n        })]\n      })]\n    })\n  }),\n  bK: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        fill: 'none',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 22.5,11.63 L 22.5,6\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        },\n        id: \"path6570\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25\",\n        style: {\n          fill: '#000000',\n          fillOpacity: '1',\n          strokeLinecap: 'butt',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37\",\n        style: {\n          fill: '#000000',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 20,8 L 25,8\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff'\n        }\n      })]\n    })\n  })\n};\n\nconst ChessboardContext = /*#__PURE__*/React.createContext();\nconst useChessboard = () => useContext(ChessboardContext);\nconst ChessboardProvider = /*#__PURE__*/forwardRef(({\n  animationDuration,\n  areArrowsAllowed,\n  arePiecesDraggable,\n  arePremovesAllowed,\n  boardOrientation,\n  boardWidth,\n  clearPremovesOnRightClick,\n  customArrows,\n  customArrowColor,\n  customBoardStyle,\n  customDarkSquareStyle,\n  customDropSquareStyle,\n  customLightSquareStyle,\n  customPieces,\n  customPremoveDarkSquareStyle,\n  customPremoveLightSquareStyle,\n  customSquareStyles,\n  dropOffBoardAction,\n  id,\n  isDraggablePiece,\n  getPositionObject,\n  onDragOverSquare,\n  onMouseOutSquare,\n  onMouseOverSquare,\n  onPieceClick,\n  onPieceDragBegin,\n  onPieceDragEnd,\n  onPieceDrop,\n  onSquareClick,\n  onSquareRightClick,\n  position,\n  showBoardNotation,\n  showSparePieces,\n  snapToCursor,\n  children\n}, ref) => {\n  // position stored and displayed on board\n  const [currentPosition, setCurrentPosition] = useState(convertPositionToObject(position)); // calculated differences between current and incoming positions\n\n  const [positionDifferences, setPositionDifferences] = useState({}); // colour of last piece moved to determine if premoving\n\n  const [lastPieceColour, setLastPieceColour] = useState(undefined); // current premoves\n\n  const [premoves, setPremoves] = useState([]); // ref used to access current value during timeouts (closures)\n\n  const premovesRef = useRef(premoves); // current right mouse down square\n\n  const [currentRightClickDown, setCurrentRightClickDown] = useState(); // current arrows\n\n  const [arrows, setArrows] = useState([]); // chess pieces/styling\n\n  const [chessPieces, setChessPieces] = useState({ ...defaultPieces,\n    ...customPieces\n  }); // whether the last move was a manual drop or not\n\n  const [manualDrop, setManualDrop] = useState(false); // the most recent timeout whilst waiting for animation to complete\n\n  const [previousTimeout, setPreviousTimeout] = useState(undefined); // if currently waiting for an animation to finish\n\n  const [waitingForAnimation, setWaitingForAnimation] = useState(false); // open clearPremoves() to allow user to call on undo/reset/whenever\n\n  useImperativeHandle(ref, () => ({\n    clearPremoves() {\n      clearPremoves();\n    }\n\n  })); // handle custom pieces change\n\n  useEffect(() => {\n    setChessPieces({ ...defaultPieces,\n      ...customPieces\n    });\n  }, [customPieces]); // handle external position change\n\n  useEffect(() => {\n    var _Object$keys, _Object$entries, _Object$entries$;\n\n    const newPosition = convertPositionToObject(position);\n    const differences = getPositionDifferences(currentPosition, newPosition);\n    const newPieceColour = ((_Object$keys = Object.keys(differences.added)) === null || _Object$keys === void 0 ? void 0 : _Object$keys.length) <= 2 ? (_Object$entries = Object.entries(differences.added)) === null || _Object$entries === void 0 ? void 0 : (_Object$entries$ = _Object$entries[0]) === null || _Object$entries$ === void 0 ? void 0 : _Object$entries$[1][0] : undefined; // external move has come in before animation is over\n    // cancel animation and immediately update position\n\n    if (waitingForAnimation) {\n      setCurrentPosition(newPosition);\n      setWaitingForAnimation(false);\n      arePremovesAllowed && attemptPremove(newPieceColour);\n\n      if (previousTimeout) {\n        clearTimeout(previousTimeout);\n      }\n    } else {\n      // move was made using drag and drop\n      if (manualDrop) {\n        setCurrentPosition(newPosition);\n        setWaitingForAnimation(false);\n        arePremovesAllowed && attemptPremove(newPieceColour);\n      } else {\n        // move was made by external position change\n        // if position === start then don't override newPieceColour\n        // needs isDifferentFromStart in scenario where premoves have been cleared upon board reset but first move is made by computer, the last move colour would need to be updated\n        if (isDifferentFromStart(newPosition) && lastPieceColour !== undefined) {\n          setLastPieceColour(newPieceColour);\n        } else {\n          // position === start, likely a board reset\n          setLastPieceColour(undefined);\n        }\n\n        setPositionDifferences(differences); // animate external move\n\n        setWaitingForAnimation(true);\n        const newTimeout = setTimeout(() => {\n          setCurrentPosition(newPosition);\n          setWaitingForAnimation(false);\n          arePremovesAllowed && attemptPremove(newPieceColour);\n        }, animationDuration);\n        setPreviousTimeout(newTimeout);\n      }\n    } // reset manual drop, ready for next move to be made by user or external\n\n\n    setManualDrop(false); // inform latest position information\n\n    getPositionObject(newPosition); // clear arrows\n\n    clearArrows(); // clear timeout on unmount\n\n    return () => {\n      clearTimeout(previousTimeout);\n    };\n  }, [position]); // handle external arrows change\n\n  useEffect(() => {\n    setArrows(customArrows);\n  }, [customArrows]); // handle drop position change\n\n  function handleSetPosition(sourceSq, targetSq, piece) {\n    // if dropped back down, don't do anything\n    if (sourceSq === targetSq) {\n      return;\n    }\n\n    clearArrows(); // if second move is made for same colour, or there are still premoves queued, then this move needs to be added to premove queue instead of played\n    // premoves length check for colour is added in because white could make 3 premoves, and then black responds to the first move (changing the last piece colour) and then white pre-moves again\n\n    if (arePremovesAllowed && waitingForAnimation || arePremovesAllowed && (lastPieceColour === piece[0] || premovesRef.current.filter(p => p.piece[0] === piece[0]).length > 0)) {\n      const oldPremoves = [...premovesRef.current];\n      oldPremoves.push({\n        sourceSq,\n        targetSq,\n        piece\n      });\n      premovesRef.current = oldPremoves;\n      setPremoves([...oldPremoves]);\n      return;\n    } // if transitioning, don't allow new drop\n\n\n    if (!arePremovesAllowed && waitingForAnimation) return;\n    const newOnDropPosition = { ...currentPosition\n    };\n    setManualDrop(true);\n    setLastPieceColour(piece[0]); // if onPieceDrop function provided, execute it, position must be updated externally and captured by useEffect above for this move to show on board\n\n    if (onPieceDrop.length) {\n      const isValidMove = onPieceDrop(sourceSq, targetSq, piece);\n      if (!isValidMove) clearPremoves();\n    } else {\n      // delete if dropping off board\n      if (dropOffBoardAction === 'trash' && !targetSq) {\n        delete newOnDropPosition[sourceSq];\n      } // delete source piece if not dropping from spare piece\n\n\n      if (sourceSq !== 'spare') {\n        delete newOnDropPosition[sourceSq];\n      } // add piece in new position\n\n\n      newOnDropPosition[targetSq] = piece;\n      setCurrentPosition(newOnDropPosition);\n    } // inform latest position information\n\n\n    getPositionObject(newOnDropPosition);\n  }\n\n  function attemptPremove(newPieceColour) {\n    if (premovesRef.current.length === 0) return; // get current value of premove as this is called in a timeout so value may have changed since timeout was set\n\n    const premove = premovesRef.current[0]; // if premove is a differing colour to last move made, then this move can be made\n\n    if (premove.piece[0] !== undefined && premove.piece[0] !== newPieceColour && onPieceDrop.length) {\n      setLastPieceColour(premove.piece[0]);\n      setManualDrop(true); // pre-move doesn't need animation\n\n      const isValidMove = onPieceDrop(premove.sourceSq, premove.targetSq, premove.piece); // premove was successful and can be removed from queue\n\n      if (isValidMove) {\n        const oldPremoves = [...premovesRef.current];\n        oldPremoves.shift();\n        premovesRef.current = oldPremoves;\n        setPremoves([...oldPremoves]);\n      } else {\n        // premove wasn't successful, clear premove queue\n        clearPremoves();\n      }\n    }\n  }\n\n  function clearPremoves(clearLastPieceColour = true) {\n    // don't clear when right clicking to clear, otherwise you won't be able to premove again before next go\n    if (clearLastPieceColour) setLastPieceColour(undefined);\n    premovesRef.current = [];\n    setPremoves([]);\n  }\n\n  function onRightClickDown(square) {\n    setCurrentRightClickDown(square);\n  }\n\n  function onRightClickUp(square) {\n    if (!areArrowsAllowed) return;\n\n    if (currentRightClickDown) {\n      // same square, don't draw an arrow, but do clear premoves and run onSquareRightClick\n      if (currentRightClickDown === square) {\n        setCurrentRightClickDown(null);\n        clearPremovesOnRightClick && clearPremoves(false);\n        onSquareRightClick(square);\n        return;\n      } // if arrow already exists then it needs to be removed\n\n\n      for (const i in arrows) {\n        if (arrows[i][0] === currentRightClickDown && arrows[i][1] === square) {\n          setArrows(oldArrows => {\n            const newArrows = [...oldArrows];\n            newArrows.splice(i, 1);\n            return newArrows;\n          });\n          return;\n        }\n      } // different square, draw an arrow\n\n\n      setArrows(oldArrows => [...oldArrows, [currentRightClickDown, square]]);\n    } else setCurrentRightClickDown(null);\n  }\n\n  function clearCurrentRightClickDown() {\n    setCurrentRightClickDown(null);\n  }\n\n  function clearArrows() {\n    setArrows([]);\n  }\n\n  return /*#__PURE__*/jsx(ChessboardContext.Provider, {\n    value: {\n      animationDuration,\n      arePiecesDraggable,\n      arePremovesAllowed,\n      boardOrientation,\n      boardWidth,\n      customArrowColor,\n      customBoardStyle,\n      customDarkSquareStyle,\n      customDropSquareStyle,\n      customLightSquareStyle,\n      customPremoveDarkSquareStyle,\n      customPremoveLightSquareStyle,\n      customSquareStyles,\n      dropOffBoardAction,\n      id,\n      isDraggablePiece,\n      getPositionObject,\n      onDragOverSquare,\n      onMouseOutSquare,\n      onMouseOverSquare,\n      onPieceClick,\n      onPieceDragBegin,\n      onPieceDragEnd,\n      onPieceDrop,\n      onSquareClick,\n      onSquareRightClick,\n      showBoardNotation,\n      showSparePieces,\n      snapToCursor,\n      arrows,\n      chessPieces,\n      clearArrows,\n      clearCurrentRightClickDown,\n      clearPremoves,\n      currentPosition,\n      handleSetPosition,\n      lastPieceColour,\n      manualDrop,\n      onRightClickDown,\n      onRightClickUp,\n      positionDifferences,\n      premoves,\n      setChessPieces,\n      setCurrentPosition,\n      setManualDrop,\n      waitingForAnimation\n    },\n    children: children\n  });\n});\n\nfunction Notation({\n  row,\n  col\n}) {\n  const {\n    boardOrientation,\n    boardWidth,\n    customDarkSquareStyle,\n    customLightSquareStyle\n  } = useChessboard();\n  const whiteColor = customLightSquareStyle.backgroundColor;\n  const blackColor = customDarkSquareStyle.backgroundColor;\n  const isRow = col === 0;\n  const isColumn = row === 7;\n  const isBottomLeftSquare = isRow && isColumn;\n\n  function getRow() {\n    return boardOrientation === 'white' ? 8 - row : row + 1;\n  }\n\n  function getColumn() {\n    return boardOrientation === 'black' ? COLUMNS[7 - col] : COLUMNS[col];\n  }\n\n  function renderBottomLeft() {\n    return /*#__PURE__*/jsxs(Fragment, {\n      children: [/*#__PURE__*/jsx(\"div\", {\n        style: { ...notationStyle,\n          ...{\n            color: whiteColor\n          },\n          ...numericStyle(boardWidth)\n        },\n        children: getRow()\n      }), /*#__PURE__*/jsx(\"div\", {\n        style: { ...notationStyle,\n          ...{\n            color: whiteColor\n          },\n          ...alphaStyle(boardWidth)\n        },\n        children: getColumn()\n      })]\n    });\n  }\n\n  function renderLetters() {\n    return /*#__PURE__*/jsx(\"div\", {\n      style: { ...notationStyle,\n        ...{\n          color: col % 2 !== 0 ? blackColor : whiteColor\n        },\n        ...alphaStyle(boardWidth)\n      },\n      children: getColumn()\n    });\n  }\n\n  function renderNumbers() {\n    return /*#__PURE__*/jsx(\"div\", {\n      style: { ...notationStyle,\n        ...(boardOrientation === 'black' ? {\n          color: row % 2 === 0 ? blackColor : whiteColor\n        } : {\n          color: row % 2 === 0 ? blackColor : whiteColor\n        }),\n        ...numericStyle(boardWidth)\n      },\n      children: getRow()\n    });\n  }\n\n  if (isBottomLeftSquare) {\n    return renderBottomLeft();\n  }\n\n  if (isColumn) {\n    return renderLetters();\n  }\n\n  if (isRow) {\n    return renderNumbers();\n  }\n\n  return null;\n}\n\nconst alphaStyle = width => ({\n  alignSelf: 'flex-end',\n  paddingLeft: width / 8 - width / 48,\n  fontSize: width / 48\n});\n\nconst numericStyle = width => ({\n  alignSelf: 'flex-start',\n  paddingRight: width / 8 - width / 48,\n  fontSize: width / 48\n});\n\nconst notationStyle = {\n  zIndex: 3,\n  position: 'absolute'\n};\n\nfunction Piece({\n  piece,\n  square,\n  squares,\n  isPremovedPiece = false\n}) {\n  const {\n    animationDuration,\n    arePiecesDraggable,\n    arePremovesAllowed,\n    boardWidth,\n    id,\n    isDraggablePiece,\n    onPieceClick,\n    onPieceDragBegin,\n    onPieceDragEnd,\n    premoves,\n    chessPieces,\n    dropTarget,\n    positionDifferences,\n    waitingForAnimation,\n    currentPosition\n  } = useChessboard();\n  const [pieceStyle, setPieceStyle] = useState({\n    opacity: 1,\n    zIndex: 5,\n    touchAction: 'none',\n    cursor: arePiecesDraggable && isDraggablePiece({\n      piece,\n      sourceSquare: square\n    }) ? '-webkit-grab' : 'default'\n  });\n  const [{\n    canDrag,\n    isDragging\n  }, drag, dragPreview] = useDrag(() => ({\n    type: 'piece',\n    item: () => {\n      onPieceDragBegin(piece, square);\n      return {\n        piece,\n        square,\n        id\n      };\n    },\n    end: () => onPieceDragEnd(piece, square),\n    collect: monitor => ({\n      canDrag: isDraggablePiece({\n        piece,\n        sourceSquare: square\n      }),\n      isDragging: !!monitor.isDragging()\n    })\n  }), [piece, square, currentPosition, id]); // hide the default preview\n\n  useEffect(() => {\n    dragPreview(getEmptyImage(), {\n      captureDraggingState: true\n    });\n  }, []); // hide piece on drag\n\n  useEffect(() => {\n    setPieceStyle(oldPieceStyle => ({ ...oldPieceStyle,\n      opacity: isDragging ? 0 : 1\n    }));\n  }, [isDragging]); // hide piece on matching premoves\n\n  useEffect(() => {\n    // if premoves aren't allowed, don't waste time on calculations\n    if (!arePremovesAllowed) return;\n    let hidePiece = false; // side effect: if piece moves into pre-moved square, its hidden\n    // if there are any premove targets on this square, hide the piece underneath\n\n    if (!isPremovedPiece && premoves.find(p => p.targetSq === square)) hidePiece = true; // if sourceSq === sq and piece matches then this piece has been pre-moved elsewhere?\n\n    if (premoves.find(p => p.sourceSq === square && p.piece === piece)) hidePiece = true; // TODO: If a premoved piece returns to a premoved square, it will hide (e1, e2, e1)\n\n    setPieceStyle(oldPieceStyle => ({ ...oldPieceStyle,\n      display: hidePiece ? 'none' : 'unset'\n    }));\n  }, [currentPosition, premoves]); // new move has come in\n  // if waiting for animation, then animation has started and we can perform animation\n  // we need to head towards where we need to go, we are the source, we are heading towards the target\n\n  useEffect(() => {\n    var _positionDifferences$;\n\n    const removedPiece = (_positionDifferences$ = positionDifferences.removed) === null || _positionDifferences$ === void 0 ? void 0 : _positionDifferences$[square]; // return as null and not loaded yet\n\n    if (!positionDifferences.added) return; // check if piece matches or if removed piece was a pawn and new square is on 1st or 8th rank (promotion)\n\n    const newSquare = Object.entries(positionDifferences.added).find(([s, p]) => p === removedPiece || (removedPiece === null || removedPiece === void 0 ? void 0 : removedPiece[1]) === 'P' && (s[1] === '1' || s[1] === '8')); // we can perform animation if our square was in removed, AND the matching piece is in added AND this isn't a premoved piece\n\n    if (waitingForAnimation && removedPiece && newSquare && !isPremovedPiece) {\n      const {\n        sourceSq,\n        targetSq\n      } = getSquareCoordinates(square, newSquare[0]);\n\n      if (sourceSq && targetSq) {\n        setPieceStyle(oldPieceStyle => ({ ...oldPieceStyle,\n          transform: `translate(${targetSq.x - sourceSq.x}px, ${targetSq.y - sourceSq.y}px)`,\n          transition: `transform ${animationDuration}ms`,\n          zIndex: 6\n        }));\n      }\n    }\n  }, [positionDifferences]); // translate to their own positions (repaint on undo)\n\n  useEffect(() => {\n    const {\n      sourceSq\n    } = getSingleSquareCoordinates(square);\n\n    if (sourceSq) {\n      setPieceStyle(oldPieceStyle => ({ ...oldPieceStyle,\n        transform: `translate(${0}px, ${0}px)`,\n        transition: `transform ${0}ms`\n      }));\n    }\n  }, [currentPosition]); // update is piece draggable\n\n  useEffect(() => {\n    setPieceStyle(oldPieceStyle => ({ ...oldPieceStyle,\n      cursor: arePiecesDraggable && isDraggablePiece({\n        piece,\n        sourceSquare: square\n      }) ? '-webkit-grab' : 'default'\n    }));\n  }, [square, currentPosition, arePiecesDraggable]);\n\n  function getSingleSquareCoordinates(square) {\n    return {\n      sourceSq: squares[square]\n    };\n  }\n\n  function getSquareCoordinates(sourceSquare, targetSquare) {\n    return {\n      sourceSq: squares[sourceSquare],\n      targetSq: squares[targetSquare]\n    };\n  }\n\n  return /*#__PURE__*/jsx(\"div\", {\n    ref: arePiecesDraggable ? canDrag ? drag : null : null,\n    onClick: () => onPieceClick(piece),\n    style: pieceStyle,\n    children: typeof chessPieces[piece] === 'function' ? chessPieces[piece]({\n      squareWidth: boardWidth / 8,\n      isDragging,\n      droppedPiece: dropTarget === null || dropTarget === void 0 ? void 0 : dropTarget.piece,\n      targetSquare: dropTarget === null || dropTarget === void 0 ? void 0 : dropTarget.target,\n      sourceSquare: dropTarget === null || dropTarget === void 0 ? void 0 : dropTarget.source\n    }) : /*#__PURE__*/jsx(\"svg\", {\n      viewBox: '1 1 43 43',\n      width: boardWidth / 8,\n      height: boardWidth / 8,\n      children: /*#__PURE__*/jsx(\"g\", {\n        children: chessPieces[piece]\n      })\n    })\n  });\n}\n\nfunction Square({\n  square,\n  squareColor,\n  setSquares,\n  squareHasPremove,\n  children\n}) {\n  const squareRef = useRef();\n  const {\n    boardWidth,\n    boardOrientation,\n    clearArrows,\n    currentPosition,\n    customBoardStyle,\n    customDarkSquareStyle,\n    customDropSquareStyle,\n    customLightSquareStyle,\n    customPremoveDarkSquareStyle,\n    customPremoveLightSquareStyle,\n    customSquareStyles,\n    handleSetPosition,\n    lastPieceColour,\n    onDragOverSquare,\n    onMouseOutSquare,\n    onMouseOverSquare,\n    onPieceDrop,\n    onRightClickDown,\n    onRightClickUp,\n    onSquareClick,\n    waitingForAnimation\n  } = useChessboard();\n  const [{\n    isOver\n  }, drop] = useDrop(() => ({\n    accept: 'piece',\n    drop: item => handleSetPosition(item.square, square, item.piece),\n    collect: monitor => ({\n      isOver: !!monitor.isOver()\n    })\n  }), [square, currentPosition, onPieceDrop, waitingForAnimation, lastPieceColour]);\n  useEffect(() => {\n    const {\n      x,\n      y\n    } = squareRef.current.getBoundingClientRect();\n    setSquares(oldSquares => ({ ...oldSquares,\n      [square]: {\n        x,\n        y\n      }\n    }));\n  }, [boardWidth, boardOrientation]);\n  const defaultSquareStyle = { ...borderRadius(customBoardStyle, square, boardOrientation),\n    ...(squareColor === 'black' ? customDarkSquareStyle : customLightSquareStyle),\n    ...(squareHasPremove && (squareColor === 'black' ? customPremoveDarkSquareStyle : customPremoveLightSquareStyle)),\n    ...(isOver && customDropSquareStyle)\n  };\n  return /*#__PURE__*/jsx(\"div\", {\n    ref: drop,\n    style: defaultSquareStyle,\n    \"data-square-color\": squareColor,\n    \"data-square\": square,\n    onMouseOver: () => onMouseOverSquare(square),\n    onMouseOut: () => onMouseOutSquare(square),\n    onMouseDown: e => {\n      if (e.button === 2) onRightClickDown(square);\n    },\n    onMouseUp: e => {\n      if (e.button === 2) onRightClickUp(square);\n    },\n    onDragEnter: () => onDragOverSquare(square),\n    onClick: () => {\n      onSquareClick(square);\n      clearArrows();\n    },\n    onContextMenu: e => {\n      e.preventDefault();\n    },\n    children: /*#__PURE__*/jsx(\"div\", {\n      ref: squareRef,\n      style: { ...size(boardWidth),\n        ...center,\n        ...(!squareHasPremove && (customSquareStyles === null || customSquareStyles === void 0 ? void 0 : customSquareStyles[square]))\n      },\n      children: children\n    })\n  });\n}\nconst center = {\n  display: 'flex',\n  justifyContent: 'center'\n};\n\nconst size = width => ({\n  width: width / 8,\n  height: width / 8\n});\n\nconst borderRadius = (customBoardStyle, square, boardOrientation) => {\n  if (!customBoardStyle.borderRadius) return {};\n\n  if (square === 'a1') {\n    return boardOrientation === 'white' ? {\n      borderBottomLeftRadius: customBoardStyle.borderRadius\n    } : {\n      borderTopRightRadius: customBoardStyle.borderRadius\n    };\n  }\n\n  if (square === 'a8') {\n    return boardOrientation === 'white' ? {\n      borderTopLeftRadius: customBoardStyle.borderRadius\n    } : {\n      borderBottomRightRadius: customBoardStyle.borderRadius\n    };\n  }\n\n  if (square === 'h1') {\n    return boardOrientation === 'white' ? {\n      borderBottomRightRadius: customBoardStyle.borderRadius\n    } : {\n      borderTopLeftRadius: customBoardStyle.borderRadius\n    };\n  }\n\n  if (square === 'h8') {\n    return boardOrientation === 'white' ? {\n      borderTopRightRadius: customBoardStyle.borderRadius\n    } : {\n      borderBottomLeftRadius: customBoardStyle.borderRadius\n    };\n  }\n\n  return {};\n};\n\nfunction Squares({\n  children\n}) {\n  const {\n    boardOrientation,\n    boardWidth,\n    customBoardStyle,\n    id\n  } = useChessboard();\n  return /*#__PURE__*/jsx(\"div\", {\n    \"data-boardid\": id,\n    style: { ...boardStyles(boardWidth),\n      ...customBoardStyle\n    },\n    children: [...Array(8)].map((_, r) => {\n      return /*#__PURE__*/jsx(\"div\", {\n        style: rowStyles(boardWidth),\n        children: [...Array(8)].map((_, c) => {\n          // a1, a2 ...\n          const square = boardOrientation === 'black' ? COLUMNS[7 - c] + (r + 1) : COLUMNS[c] + (8 - r);\n          const squareColor = c % 2 === r % 2 ? 'white' : 'black';\n          return children({\n            square,\n            squareColor,\n            col: c,\n            row: r\n          });\n        })\n      }, r.toString());\n    })\n  });\n}\n\nconst boardStyles = width => ({\n  cursor: 'default',\n  height: width,\n  width\n});\n\nconst rowStyles = width => ({\n  display: 'flex',\n  flexWrap: 'nowrap',\n  width\n});\n\nconst errorImage = {\n  whiteKing: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    style: {\n      shapeRendering: 'geometricPrecision',\n      textRendering: 'geometricPrecision',\n      imageRendering: 'optimizeQuality'\n    },\n    viewBox: \"0 0 4210 12970\",\n    x: \"0px\",\n    y: \"0px\",\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    width: \"250\",\n    height: \"250\",\n    children: /*#__PURE__*/jsx(\"g\", {\n      children: /*#__PURE__*/jsx(\"path\", {\n        style: {\n          fill: 'black',\n          fillRule: 'nonzero'\n        },\n        d: \"M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z\"\n      })\n    })\n  })\n};\n\nfunction ErrorBoundary({\n  children\n}) {\n  try {\n    return children;\n  } catch (error) {\n    return /*#__PURE__*/jsx(WhiteKing, {\n      showError: true\n    });\n  }\n}\nfunction WhiteKing({\n  showError = false\n}) {\n  return /*#__PURE__*/jsxs(\"div\", {\n    style: container,\n    children: [/*#__PURE__*/jsx(\"div\", {\n      style: whiteKingStyle,\n      children: errorImage.whiteKing\n    }), showError && /*#__PURE__*/jsx(\"h1\", {\n      children: \"Something went wrong\"\n    })]\n  });\n}\nconst container = {\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  flexDirection: 'column'\n};\nconst whiteKingStyle = {\n  width: 250,\n  height: 250,\n  transform: 'rotate(90deg)'\n};\n\nfunction Board() {\n  const boardRef = useRef();\n  const [squares, setSquares] = useState({});\n  const {\n    arrows,\n    boardOrientation,\n    boardWidth,\n    clearCurrentRightClickDown,\n    customArrowColor,\n    showBoardNotation,\n    currentPosition,\n    premoves\n  } = useChessboard();\n  useEffect(() => {\n    function handleClickOutside(event) {\n      if (boardRef.current && !boardRef.current.contains(event.target)) {\n        clearCurrentRightClickDown();\n      }\n    }\n\n    document.addEventListener('mouseup', handleClickOutside);\n    return () => {\n      document.removeEventListener('mouseup', handleClickOutside);\n    };\n  }, []);\n  return boardWidth ? /*#__PURE__*/jsxs(\"div\", {\n    ref: boardRef,\n    style: {\n      position: 'relative'\n    },\n    children: [/*#__PURE__*/jsx(Squares, {\n      children: ({\n        square,\n        squareColor,\n        col,\n        row\n      }) => {\n        const squareHasPremove = premoves.find(p => p.sourceSq === square || p.targetSq === square);\n        const squareHasPremoveTarget = premoves.find(p => p.targetSq === square);\n        return /*#__PURE__*/jsxs(Square, {\n          square: square,\n          squareColor: squareColor,\n          setSquares: setSquares,\n          squareHasPremove: squareHasPremove,\n          children: [currentPosition[square] && /*#__PURE__*/jsx(Piece, {\n            piece: currentPosition[square],\n            square: square,\n            squares: squares\n          }), squareHasPremoveTarget && /*#__PURE__*/jsx(Piece, {\n            isPremovedPiece: true,\n            piece: squareHasPremoveTarget.piece,\n            square: square,\n            squares: squares\n          }), showBoardNotation && /*#__PURE__*/jsx(Notation, {\n            row: row,\n            col: col\n          })]\n        }, `${col}${row}`);\n      }\n    }), /*#__PURE__*/jsx(\"svg\", {\n      width: boardWidth,\n      height: boardWidth,\n      style: {\n        position: 'absolute',\n        top: '0',\n        left: '0',\n        pointerEvents: 'none',\n        zIndex: '10'\n      },\n      children: arrows.map(arrow => {\n        const from = getRelativeCoords(boardOrientation, boardWidth, arrow[0]);\n        const to = getRelativeCoords(boardOrientation, boardWidth, arrow[1]);\n        return /*#__PURE__*/jsxs(Fragment$1, {\n          children: [/*#__PURE__*/jsx(\"defs\", {\n            children: /*#__PURE__*/jsx(\"marker\", {\n              id: \"arrowhead\",\n              markerWidth: \"2\",\n              markerHeight: \"2.5\",\n              refX: \"1.25\",\n              refY: \"1.25\",\n              orient: \"auto\",\n              children: /*#__PURE__*/jsx(\"polygon\", {\n                points: \"0 0, 2 1.25, 0 2.5\",\n                style: {\n                  fill: customArrowColor\n                }\n              })\n            })\n          }), /*#__PURE__*/jsx(\"line\", {\n            x1: from.x,\n            y1: from.y,\n            x2: to.x,\n            y2: to.y,\n            style: {\n              stroke: customArrowColor,\n              strokeWidth: boardWidth / 36\n            },\n            markerEnd: \"url(#arrowhead)\"\n          })]\n        }, `${arrow[0]}-${arrow[1]}`);\n      })\n    })]\n  }) : /*#__PURE__*/jsx(WhiteKing, {});\n}\n\nfunction CDragLayer(props) {\n  const {\n    boardWidth,\n    chessPieces,\n    id,\n    snapToCursor\n  } = useChessboard();\n  const {\n    isDragging,\n    item,\n    clientOffset,\n    sourceClientOffset\n  } = props;\n  const layerStyles = {\n    position: 'fixed',\n    pointerEvents: 'none',\n    zIndex: 10,\n    left: 0,\n    top: 0\n  };\n  const getItemStyle = useCallback((clientOffset, sourceClientOffset) => {\n    if (!clientOffset || !sourceClientOffset) return {\n      display: 'none'\n    };\n    let {\n      x,\n      y\n    } = snapToCursor ? clientOffset : sourceClientOffset;\n\n    if (snapToCursor) {\n      const halfSquareWidth = boardWidth / 8 / 2;\n      x -= halfSquareWidth;\n      y -= halfSquareWidth;\n    }\n\n    const transform = `translate(${x}px, ${y}px)`;\n    return {\n      transform,\n      WebkitTransform: transform,\n      touchAction: 'none'\n    };\n  }, [boardWidth, snapToCursor]);\n  return isDragging && item.id === id ? /*#__PURE__*/jsx(\"div\", {\n    style: layerStyles,\n    children: /*#__PURE__*/jsx(\"div\", {\n      style: getItemStyle(clientOffset, sourceClientOffset),\n      children: typeof chessPieces[item.piece] === 'function' ? chessPieces[item.piece]({\n        squareWidth: boardWidth / 8,\n        isDragging: true\n      }) : /*#__PURE__*/jsx(\"svg\", {\n        viewBox: '1 1 43 43',\n        width: boardWidth / 8,\n        height: boardWidth / 8,\n        children: /*#__PURE__*/jsx(\"g\", {\n          children: chessPieces[item.piece]\n        })\n      })\n    })\n  }) : null;\n}\n\nfunction collect(monitor) {\n  return {\n    item: monitor.getItem(),\n    clientOffset: monitor.getClientOffset(),\n    sourceClientOffset: monitor.getSourceClientOffset(),\n    isDragging: monitor.isDragging()\n  };\n}\n\nconst CustomDragLayer = DragLayer(collect)(CDragLayer);\n\nconst Chessboard = /*#__PURE__*/forwardRef((props, ref) => {\n  const {\n    customDndBackend,\n    customDndBackendOptions,\n    ...otherProps\n  } = props;\n  return /*#__PURE__*/jsx(ErrorBoundary, {\n    children: /*#__PURE__*/jsx(DndProvider, {\n      backend: customDndBackend || MultiBackend,\n      options: customDndBackend ? customDndBackendOptions : HTML5toTouch,\n      children: /*#__PURE__*/jsxs(ChessboardProvider, {\n        ref: ref,\n        ...otherProps,\n        children: [/*#__PURE__*/jsx(CustomDragLayer, {}), /*#__PURE__*/jsx(\"div\", {\n          children: /*#__PURE__*/jsx(Board, {})\n        })]\n      })\n    })\n  });\n});\nChessboard.defaultProps = chessboardDefaultProps;\n\nexport { Chessboard };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}