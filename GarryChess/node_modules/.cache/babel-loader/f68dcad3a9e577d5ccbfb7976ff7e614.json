{"ast":null,"code":"/*\r\n\r\nA library that extends any chessboard library to allow users to draw arrows and circles.\r\nRight-click to draw arrows and circles, left-click to clear the drawings.\r\n\r\nAuthor: Brendon McBain\r\nDate: 07/04/2020\r\n\r\n*/\nvar ChessboardArrows = function (id) {\n  let RES_FACTOR = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n  let COLOUR = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'rgb(50, 104, 168)';\n  const NUM_SQUARES = 8;\n  var resFactor, colour, drawCanvas, drawContext, primaryCanvas, primaryContext, initialPoint, mouseDown;\n  resFactor = RES_FACTOR;\n  colour = COLOUR; // drawing canvas\n\n  drawCanvas = document.getElementById('drawing_canvas');\n  drawContext = changeResolution(drawCanvas, resFactor);\n  setContextStyle(drawContext); // primary canvas\n\n  primaryCanvas = document.getElementById('primary_canvas');\n  primaryContext = changeResolution(primaryCanvas, resFactor);\n  setContextStyle(primaryContext); // setup mouse event callbacks\n\n  var board = document.getElementById(id);\n  board.addEventListener(\"mousedown\", function (event) {\n    onMouseDown(event);\n  });\n  board.addEventListener(\"mouseup\", function (event) {\n    onMouseUp(event);\n  });\n  board.addEventListener(\"mousemove\", function (event) {\n    onMouseMove(event);\n  });\n  board.addEventListener('contextmenu', function (e) {\n    e.preventDefault();\n  }, false); // initialise vars\n\n  initialPoint = {\n    x: null,\n    y: null\n  };\n  finalPoint = {\n    x: null,\n    y: null\n  };\n  arrowWidth = 15;\n  mouseDown = false; // source: https://stackoverflow.com/questions/808826/draw-arrow-on-canvas-tag\n\n  function drawArrow(context, fromx, fromy, tox, toy, r) {\n    var x_center = tox;\n    var y_center = toy;\n    var angle, x, y;\n    context.beginPath();\n    angle = Math.atan2(toy - fromy, tox - fromx);\n    x = r * Math.cos(angle) + x_center;\n    y = r * Math.sin(angle) + y_center;\n    context.moveTo(x, y);\n    angle += 1 / 3 * (2 * Math.PI);\n    x = r * Math.cos(angle) + x_center;\n    y = r * Math.sin(angle) + y_center;\n    context.lineTo(x, y);\n    angle += 1 / 3 * (2 * Math.PI);\n    x = r * Math.cos(angle) + x_center;\n    y = r * Math.sin(angle) + y_center;\n    context.lineTo(x, y);\n    context.closePath();\n    context.fill();\n  }\n\n  function getMousePos(canvas, evt) {\n    var rect = canvas.getBoundingClientRect();\n    return {\n      x: Q(evt.clientX - rect.left),\n      y: Q(evt.clientY - rect.top)\n    };\n  }\n\n  function setContextStyle(context) {\n    context.strokeStyle = context.fillStyle = colour;\n    context.lineJoin = 'butt';\n  }\n\n  function onMouseDown(event) {\n    if (event.which == 3) {\n      // right click\n      mouseDown = true;\n      initialPoint = finalPoint = getMousePos(drawCanvas, event);\n      drawCircle(drawContext, initialPoint.x, initialPoint.y, primaryCanvas.width / (resFactor * NUM_SQUARES * 2) - 1);\n    }\n  }\n\n  function onMouseUp(event) {\n    if (event.which == 3) {\n      // right click\n      mouseDown = false; // if starting position == ending position, draw a circle to primary canvas\n\n      if (initialPoint.x == finalPoint.x && initialPoint.y == finalPoint.y) {\n        drawCircle(primaryContext, initialPoint.x, initialPoint.y, primaryCanvas.width / (resFactor * NUM_SQUARES * 2) - 1); // reduce radius of square by 1px\n      } // otherwise draw an arrow \n      else {\n        drawArrowToCanvas(primaryContext);\n      }\n\n      drawContext.clearRect(0, 0, drawCanvas.width, drawCanvas.height);\n    } else if (event.which == 1) {\n      // left click\n      // clear canvases\n      drawContext.clearRect(0, 0, drawCanvas.width, drawCanvas.height);\n      primaryContext.clearRect(0, 0, primaryCanvas.width, primaryCanvas.height);\n    }\n  }\n\n  function onMouseMove(event) {\n    finalPoint = getMousePos(drawCanvas, event);\n    if (!mouseDown) return;\n    if (initialPoint.x == finalPoint.x && initialPoint.y == finalPoint.y) return;\n    drawContext.clearRect(0, 0, drawCanvas.width, drawCanvas.height);\n    drawArrowToCanvas(drawContext);\n  }\n\n  function drawArrowToCanvas(context) {\n    // offset finalPoint so the arrow head hits the center of the square\n    var xFactor, yFactor, offsetSize;\n\n    if (finalPoint.x == initialPoint.x) {\n      yFactor = Math.sign(finalPoint.y - initialPoint.y) * arrowWidth;\n      xFactor = 0;\n    } else if (finalPoint.y == initialPoint.y) {\n      xFactor = Math.sign(finalPoint.x - initialPoint.x) * arrowWidth;\n      yFactor = 0;\n    } else {\n      // find delta x and delta y to achieve hypotenuse of arrowWidth\n      slope_mag = Math.abs((finalPoint.y - initialPoint.y) / (finalPoint.x - initialPoint.x));\n      xFactor = Math.sign(finalPoint.x - initialPoint.x) * arrowWidth / Math.sqrt(1 + Math.pow(slope_mag, 2));\n      yFactor = Math.sign(finalPoint.y - initialPoint.y) * Math.abs(xFactor) * slope_mag;\n    } // draw line\n\n\n    context.beginPath();\n    context.lineCap = \"round\";\n    context.lineWidth = 8;\n    context.moveTo(initialPoint.x, initialPoint.y);\n    context.lineTo(finalPoint.x - xFactor, finalPoint.y - yFactor);\n    context.stroke(); // draw arrow head\n\n    drawArrow(context, initialPoint.x, initialPoint.y, finalPoint.x - xFactor, finalPoint.y - yFactor, arrowWidth);\n  }\n\n  function Q(x, d) {\n    // mid-tread quantiser\n    d = primaryCanvas.width / (resFactor * NUM_SQUARES);\n    return d * (Math.floor(x / d) + 0.5);\n  }\n\n  function drawCircle(context, x, y, r) {\n    context.beginPath();\n    context.lineWidth = 3;\n    context.arc(x, y, r, 0, 2 * Math.PI);\n    context.stroke();\n  } // source: https://stackoverflow.com/questions/14488849/higher-dpi-graphics-with-html5-canvas\n\n\n  function changeResolution(canvas, scaleFactor) {\n    // Set up CSS size.\n    canvas.style.width = canvas.style.width || canvas.width + 'px';\n    canvas.style.height = canvas.style.height || canvas.height + 'px'; // Resize canvas and scale future draws.\n\n    canvas.width = Math.ceil(canvas.width * scaleFactor);\n    canvas.height = Math.ceil(canvas.height * scaleFactor);\n    var ctx = canvas.getContext('2d');\n    ctx.scale(scaleFactor, scaleFactor);\n    return ctx;\n  }\n};","map":{"version":3,"names":["ChessboardArrows","id","RES_FACTOR","COLOUR","NUM_SQUARES","resFactor","colour","drawCanvas","drawContext","primaryCanvas","primaryContext","initialPoint","mouseDown","document","getElementById","changeResolution","setContextStyle","board","addEventListener","event","onMouseDown","onMouseUp","onMouseMove","e","preventDefault","x","y","finalPoint","arrowWidth","drawArrow","context","fromx","fromy","tox","toy","r","x_center","y_center","angle","beginPath","Math","atan2","cos","sin","moveTo","PI","lineTo","closePath","fill","getMousePos","canvas","evt","rect","getBoundingClientRect","Q","clientX","left","clientY","top","strokeStyle","fillStyle","lineJoin","which","drawCircle","width","drawArrowToCanvas","clearRect","height","xFactor","yFactor","offsetSize","sign","slope_mag","abs","sqrt","pow","lineCap","lineWidth","stroke","d","floor","arc","scaleFactor","style","ceil","ctx","getContext","scale"],"sources":["/Users/kianeghbalnia/Desktop/garry-chess/GarryChess/node_modules/chessboard-arrows/chessboard-arrows.js"],"sourcesContent":["/*\r\n\r\nA library that extends any chessboard library to allow users to draw arrows and circles.\r\nRight-click to draw arrows and circles, left-click to clear the drawings.\r\n\r\nAuthor: Brendon McBain\r\nDate: 07/04/2020\r\n\r\n*/\r\n\r\nvar ChessboardArrows = function (id, RES_FACTOR = 2, COLOUR = 'rgb(50, 104, 168)') {\r\n\r\nconst NUM_SQUARES = 8;\r\nvar resFactor, colour, drawCanvas, drawContext, primaryCanvas, primaryContext, initialPoint, mouseDown\r\n\r\nresFactor = RES_FACTOR;\r\ncolour = COLOUR; \r\n\r\n// drawing canvas\r\ndrawCanvas = document.getElementById('drawing_canvas');\r\ndrawContext = changeResolution(drawCanvas, resFactor);\r\nsetContextStyle(drawContext);\r\n\r\n// primary canvas\r\nprimaryCanvas = document.getElementById('primary_canvas');\r\nprimaryContext = changeResolution(primaryCanvas, resFactor);\r\nsetContextStyle(primaryContext);\r\n\r\n// setup mouse event callbacks\r\nvar board = document.getElementById(id);\r\nboard.addEventListener(\"mousedown\", function(event) { onMouseDown(event); });\r\nboard.addEventListener(\"mouseup\", function(event) { onMouseUp(event); });\r\nboard.addEventListener(\"mousemove\", function(event) { onMouseMove(event); });\r\nboard.addEventListener('contextmenu', function (e) { e.preventDefault(); }, false);\r\n\r\n// initialise vars\r\ninitialPoint = { x: null, y: null };\r\nfinalPoint = { x: null, y: null };\r\narrowWidth = 15;\r\nmouseDown = false;\r\n\r\n\r\n// source: https://stackoverflow.com/questions/808826/draw-arrow-on-canvas-tag\r\nfunction drawArrow(context, fromx, fromy, tox, toy, r) {\r\n\tvar x_center = tox;\r\n\tvar y_center = toy;\r\n\tvar angle, x, y;\r\n\t\r\n\tcontext.beginPath();\r\n\t\r\n\tangle = Math.atan2(toy-fromy,tox-fromx)\r\n\tx = r*Math.cos(angle) + x_center;\r\n\ty = r*Math.sin(angle) + y_center;\r\n\r\n\tcontext.moveTo(x, y);\r\n\t\r\n\tangle += (1/3)*(2*Math.PI)\r\n\tx = r*Math.cos(angle) + x_center;\r\n\ty = r*Math.sin(angle) + y_center;\r\n\t\r\n\tcontext.lineTo(x, y);\r\n\t\r\n\tangle += (1/3)*(2*Math.PI)\r\n\tx = r*Math.cos(angle) + x_center;\r\n\ty = r*Math.sin(angle) + y_center;\r\n\t\r\n\tcontext.lineTo(x, y);\r\n\tcontext.closePath();\r\n\tcontext.fill();\r\n}\r\n\r\nfunction getMousePos(canvas, evt) {\r\n    var rect = canvas.getBoundingClientRect();\r\n    return {\r\n      x: Q(evt.clientX - rect.left),\r\n      y: Q(evt.clientY - rect.top)\r\n    };\r\n}\r\n\r\nfunction setContextStyle(context) {\r\n    context.strokeStyle = context.fillStyle = colour;\r\n    context.lineJoin = 'butt';\r\n}\r\n\r\nfunction onMouseDown(event) {\r\n    if (event.which == 3) { // right click\r\n        mouseDown = true;\r\n        initialPoint = finalPoint = getMousePos(drawCanvas, event);\r\n        drawCircle(drawContext, initialPoint.x, initialPoint.y, primaryCanvas.width/(resFactor*NUM_SQUARES*2) - 1);\r\n    }\r\n}\r\n\r\nfunction onMouseUp(event) {\r\n    if (event.which == 3) { // right click\r\n        mouseDown = false;\r\n        // if starting position == ending position, draw a circle to primary canvas\r\n        if (initialPoint.x == finalPoint.x && initialPoint.y == finalPoint.y) {\r\n            drawCircle(primaryContext, initialPoint.x, initialPoint.y, primaryCanvas.width/(resFactor*NUM_SQUARES*2) - 1); // reduce radius of square by 1px\r\n        }\r\n        // otherwise draw an arrow \r\n        else {\r\n            drawArrowToCanvas(primaryContext);\r\n        }\r\n        drawContext.clearRect(0, 0, drawCanvas.width, drawCanvas.height);\r\n    }\r\n    else if (event.which == 1) { // left click\r\n        // clear canvases\r\n        drawContext.clearRect(0, 0, drawCanvas.width, drawCanvas.height);\r\n        primaryContext.clearRect(0, 0, primaryCanvas.width, primaryCanvas.height);\r\n    }\r\n}\r\n\r\nfunction onMouseMove(event) {\r\n    finalPoint = getMousePos(drawCanvas, event);\r\n\r\n    if (!mouseDown) return;\r\n    if (initialPoint.x == finalPoint.x && initialPoint.y == finalPoint.y) return;\r\n\r\n    drawContext.clearRect(0, 0, drawCanvas.width, drawCanvas.height);\r\n    drawArrowToCanvas(drawContext);\r\n}\r\n\r\nfunction drawArrowToCanvas(context) {\r\n    // offset finalPoint so the arrow head hits the center of the square\r\n    var xFactor, yFactor, offsetSize;\r\n    if (finalPoint.x == initialPoint.x) {\r\n        yFactor = Math.sign(finalPoint.y - initialPoint.y)*arrowWidth;\r\n        xFactor = 0\r\n    }\r\n    else if (finalPoint.y == initialPoint.y) {\r\n        xFactor = Math.sign(finalPoint.x - initialPoint.x)*arrowWidth;\r\n        yFactor = 0;\r\n    }\r\n    else {\r\n        // find delta x and delta y to achieve hypotenuse of arrowWidth\r\n        slope_mag = Math.abs((finalPoint.y - initialPoint.y)/(finalPoint.x - initialPoint.x));\r\n        xFactor = Math.sign(finalPoint.x - initialPoint.x)*arrowWidth/Math.sqrt(1 + Math.pow(slope_mag, 2));\r\n        yFactor = Math.sign(finalPoint.y - initialPoint.y)*Math.abs(xFactor)*slope_mag;\r\n    }\r\n\r\n    // draw line\r\n    context.beginPath();\r\n    context.lineCap = \"round\";\r\n    context.lineWidth = 8;\r\n    context.moveTo(initialPoint.x, initialPoint.y);\r\n    context.lineTo(finalPoint.x - xFactor, finalPoint.y - yFactor);\r\n    context.stroke();\r\n\r\n    // draw arrow head\r\n    drawArrow(context, initialPoint.x, initialPoint.y, finalPoint.x - xFactor, finalPoint.y - yFactor, arrowWidth);\r\n}\r\n\r\nfunction Q(x, d) {  // mid-tread quantiser\r\n    d = primaryCanvas.width/(resFactor*NUM_SQUARES);\r\n    return d*(Math.floor(x/d) + 0.5);\r\n}\r\n\r\nfunction drawCircle(context, x, y, r) {\r\n    context.beginPath();\r\n    context.lineWidth = 3;\r\n    context.arc(x, y, r, 0, 2 * Math.PI);\r\n    context.stroke();\r\n}\r\n\r\n// source: https://stackoverflow.com/questions/14488849/higher-dpi-graphics-with-html5-canvas\r\nfunction changeResolution(canvas, scaleFactor) {\r\n    // Set up CSS size.\r\n    canvas.style.width = canvas.style.width || canvas.width + 'px';\r\n    canvas.style.height = canvas.style.height || canvas.height + 'px';\r\n\r\n    // Resize canvas and scale future draws.\r\n    canvas.width = Math.ceil(canvas.width * scaleFactor);\r\n    canvas.height = Math.ceil(canvas.height * scaleFactor);\r\n    var ctx = canvas.getContext('2d');\r\n    ctx.scale(scaleFactor, scaleFactor);\r\n    return ctx;\r\n}\r\n\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}